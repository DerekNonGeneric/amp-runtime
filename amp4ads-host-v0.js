var g;function m(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function u(a){var b=Object.create(null);if(!a)return b;for(var c;c=aa.exec(a);){var d=decodeURIComponent(c[1]).trim(),e=c[2]?decodeURIComponent(c[2]).trim():"";b[d]=e}return b};var v="";
function w(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;if(c.context&&c.context.mode)c=c.context.mode;else{var d=u(c.location.originalHash||c.location.hash),e=u(c.location.search);v||(v=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"01123456789");c={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,minified:!0,lite:void 0!=e.amp_lite,test:!1,log:d.log,version:"123456789",rtvVersion:v}}c=b.AMP_MODE=c}return c}
;var ba=Date.now();function ca(){var a=da;self.reportError=a}function x(a,b,c){this.win=a;this.N=b;this.h=this.win.console&&this.win.console.log&&"0"!=w().log?this.N({localDev:!1,development:w(void 0).development,filter:w(void 0).filter,minified:!0,lite:w(void 0).lite,test:!1,log:w(void 0).log,version:w(void 0).version,rtvVersion:w(void 0).rtvVersion}):0;this.m=c||""}
function y(a,b,c,d){if(0!=a.h){var e=a.win.console.log;"ERROR"==c?e=a.win.console.error||e:"INFO"==c?e=a.win.console.info||e:"WARN"==c&&(e=a.win.console.warn||e);d.unshift(Date.now()-ba,"["+b+"]");e.apply(a.win.console,d)}}g=x.prototype;g.isEnabled=function(){return 0!=this.h};g.fine=function(a,b){4<=this.h&&y(this,a,"FINE",Array.prototype.slice.call(arguments,1))};g.info=function(a,b){3<=this.h&&y(this,a,"INFO",Array.prototype.slice.call(arguments,1))};
g.warn=function(a,b){2<=this.h&&y(this,a,"WARN",Array.prototype.slice.call(arguments,1))};g.C=function(a,b){if(1<=this.h)y(this,a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=z.apply(null,Array.prototype.slice.call(arguments,1));A(this,c);return c}};g.error=function(a,b){var c=this.C.apply(this,arguments);c&&self.reportError(c)};g.expectedError=function(a,b){var c=this.C.apply(this,arguments);c&&(c.expected=!0,self.reportError(c))};
g.createError=function(a){var b=z.apply(null,arguments);A(this,b);return b};g.createExpectedError=function(a){var b=z.apply(null,arguments);A(this,b);b.expected=!0;return b};
g.assert=function(a,b,c){var d;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),h=f,k=[];""!=f&&k.push(f);for(f=2;f<arguments.length;f++){var n=arguments[f];n&&n.tagName&&(d=n);var q=e.shift();k.push(n);var r=q.trim();""!=r&&k.push(r);var r=h,l;l=(l=n)&&1==l.nodeType?l.tagName.toLowerCase()+(l.id?"#"+l.id:""):l;h=r+(l+q)}f=Error(h);f.fromAssert=!0;f.associatedElement=d;f.messageArray=k;A(this,f);self.reportError(f);throw f;}return a};
g.assertElement=function(a,b){this.assert(a&&1==a.nodeType,(b||"Element expected")+": %s",a);return a};g.assertString=function(a,b){this.assert("string"==typeof a,(b||"String expected")+": %s",a);return a};g.assertNumber=function(a,b){this.assert("number"==typeof a,(b||"Number expected")+": %s",a);return a};g.assertEnumValue=function(a,b,c){a:{for(var d in a)if(a[d]===b){a=!0;break a}a=!1}if(a)return b;this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};
function A(a,b){b=B(b);a.m?b.message?-1==b.message.indexOf(a.m)&&(b.message+=a.m):b.message=a.m:0<=b.message.indexOf("\u200b\u200b\u200b")&&(b.message=b.message.replace("\u200b\u200b\u200b",""))}function B(a){var b=a.message,c=String(Math.random());a.message=c;if(a.message===c)return a.message=b,a;var b=Error(a.message),d;for(d in a)b[d]=a[d];b.stack=a.stack;return b}
function z(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=B(e):(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function C(a){var b=z.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}self.log=self.log||{user:null,dev:null};var D=self.log,E=null;
function ea(){if(!D.user){if(!E)throw Error("failed to call initLogConstructor");D.user=new E(self,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b")}}function F(){if(D.dev)return D.dev;if(!E)throw Error("failed to call initLogConstructor");return D.dev=new E(self,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0})};function G(a){var b=Object.create(null);a&&Object.assign(b,a);return b};var H=self.AMP_CONFIG||{},fa=("string"==typeof H.cdnProxyRegex?new RegExp(H.cdnProxyRegex):H.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org/,ga=H.errorReportingUrl||"https://amp-error-reporting.appspot.com/r";var I,J;function K(a,b){a=a.__AMP_TOP||a;return L(a,b)}function ha(a){var b,c=M,d=a=a.__AMP_TOP||a,e=a,f=c,h=N(d),k=h.documentState;k||(k=h.documentState={obj:null,promise:null,resolve:null,context:null,ctor:null});k.ctor||k.obj||(k.ctor=f,k.context=e,k.resolve&&L(d,"documentState"));b&&L(a,"documentState")}function O(a){a=ia(a);a=ia(a);a=a.isSingleDoc()?a.win:a;return L(a,"resources")}function ia(a){return a.nodeType?K((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}
function L(a,b){var c=N(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function ja(a,b){var c=ka(a,b);if(c)return c;var d,e=new Promise(function(a){d=a});N(a)[b]={obj:null,promise:e,resolve:d,context:null,ctor:null};return e}function ka(a,b){var c=N(a)[b];if(c){if(c.promise)return c.promise;L(a,b);return c.promise=Promise.resolve(c.obj)}return null}function N(a){var b=a.services;b||(b=a.services={});return b};var la=null;Promise.resolve();function ma(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){b(a)&&(d.clearInterval(f),c())},5)}};function na(){var a=oa();return function(b){return setTimeout(b,a())}}function oa(){var a=0;return function(){var b=Math.pow(1.5,a++),c;c=b*(c||.3)*Math.random();.5<Math.random()&&(c*=-1);b+=c;return 1E3*b}};function P(){this.b=null}g=P.prototype;g.add=function(a){var b=this;this.b||(this.b=[]);this.b.push(a);return function(){b.remove(a)}};g.remove=function(a){this.b&&(a=this.b.indexOf(a),-1<a&&this.b.splice(a,1))};g.removeAll=function(){this.b&&(this.b.length=0)};g.fire=function(a){if(this.b)for(var b=this.b,c=0;c<b.length;c++)(0,b[c])(a)};g.getHandlerCount=function(){return this.b?this.b.length:0};var Q,pa="Webkit webkit Moz moz ms O o".split(" ");function R(a,b,c){if(m(b,"--"))return b;Q||(Q=G());var d=Q[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<pa.length;f++){var h=pa[f]+e;if(void 0!==a[h]){e=h;break a}}e=""}var k=e;void 0!==a[k]&&(d=k)}c||(Q[b]=d)}return d}function S(a,b){for(var c in b){var d=a,e=b[c],f=R(d.style,c,void 0);f&&(d.style[f]=e)}}
function qa(a){var b="position z-index left right top bottom width height min-width min-height".split(" "),c={};b.forEach(function(a){c[a]=null});S(a,c)};function M(a){this.win=a;this.c=a.document;this.f=R(this.c,"hidden",!0);void 0===this.c[this.f]&&(this.f=null);this.o=R(this.c,"visibilityState",!0);void 0===this.c[this.o]&&(this.o=null);this.I=new P;this.i=null;if(this.f){this.i="visibilitychange";var b=this.f.indexOf("Hidden");-1!=b&&(this.i=this.f.substring(0,b)+"Visibilitychange")}this.B=this.P.bind(this);this.i&&this.c.addEventListener(this.i,this.B);this.g=null}g=M.prototype;g.S=function(){this.i&&this.c.removeEventListener(this.i,this.B)};
g.isHidden=function(){return this.f?this.c[this.f]:!1};g.getVisibilityState=function(){return this.o?this.c[this.o]:this.isHidden()?"hidden":"visible"};g.onVisibilityChanged=function(a){return this.I.add(a)};g.P=function(){this.I.fire()};g.onBodyAvailable=function(a){var b=this.c;if(b.body)return a(),null;this.g||(this.g=new P,ma(b.documentElement,function(){return!!b.body},this.O.bind(this)));return this.g.add(a)};g.O=function(){this.g.fire();this.g.removeAll();this.g=null};var ra={"amp-dynamic-css-classes":"[custom-element=amp-dynamic-css-classes]",variant:"amp-experiment"};function sa(a){var b=ta(a).map(function(b){return K(a,"timer").timeoutPromise(3E3,ja(a,b),"Render timeout waiting for service "+b+" to be ready.")});return Promise.all(b)}function ta(a){var b=a.document;return Object.keys(ra).filter(function(a){return b.querySelector(ra[a])})};function ua(a){var b,c=a.defaultView;if(!c.__AMP_BODY_VISIBLE){var d=function(){S(a.body,{opacity:1,visibility:"visible",animation:"none"});try{O(a).renderStarted()}catch(e){}};try{ha(c),K(c,"documentState").onBodyAvailable(function(){c.__AMP_BODY_VISIBLE||(c.__AMP_BODY_VISIBLE=!0,b?sa(c).catch(function(a){C(a);return[]}).then(function(b){d();0<b.length&&O(a).schedulePass(1,!0);try{var e=K(c,"performance");e.tick("mbv");e.flush()}catch(h){}}):d())})}catch(e){d(),C(e)}}};var T=self.AMPErrors||[];self.AMPErrors=T;function U(a){U=na();return U(a)}function va(a){try{return JSON.stringify(a)}catch(b){return String(a)}}var V;
function da(a,b){try{var c;if(a)if(void 0!==a.message)a=B(a),c=!0;else{var d=a;a=Error(va(d));a.origError=d}else a=Error("Unknown error");if(a.reported)return a;a.reported=!0;var e=b||a.associatedElement;e&&e.classList&&(e.classList.add("i-amphtml-error"),w().development&&(e.classList.add("i-amphtml-element-error"),e.setAttribute("error-message",a.message)));if(self.console){var f=console.error||console.log;a.messageArray?f.apply(console,a.messageArray):e?f.call(console,a.message,e):f.call(console,
a.message)}e&&e.J&&e.J("amp:error",a.message);wa.call(void 0,void 0,void 0,void 0,void 0,a)}catch(h){setTimeout(function(){throw h;})}return a}function wa(a,b,c,d,e){this&&this.document&&ua(this.document);if(!w().development){var f=!1;try{f=xa()}catch(k){}if(!(f&&.01<Math.random())){var h=ya(a,b,c,d,e,f);h&&U(function(){(new Image).src=h})}}}
function ya(a,b,c,d,e,f){var h=!1;e&&(a=e.message?e.message:String(e),e.expected&&(h=!0));a||(a="Unknown error");if(!/_reported_/.test(a)&&"CANCELLED"!=a){if(-1!=a.indexOf("Failed to load:")||"Script error."==a)if(h=!0,.001<Math.random())return;var k=0<=a.indexOf("\u200b\u200b\u200b");f=ga+"?v="+encodeURIComponent("123456789")+"&noAmp="+(f?1:0)+"&m="+encodeURIComponent(a.replace("\u200b\u200b\u200b",""))+"&a="+(k?1:0);h&&(f+="&ex=1");var n="1p";self.context&&self.context.location?(f+=
"&3p=1",n="3p"):w().runtime&&(n=w().runtime);f+="&rt="+n;var q=self;q.AMP_CONFIG&&q.AMP_CONFIG.canary&&(f+="&ca=1");self.location.ancestorOrigins&&self.location.ancestorOrigins[0]&&(f+="&or="+encodeURIComponent(self.location.ancestorOrigins[0]));self.viewerState&&(f+="&vs="+encodeURIComponent(self.viewerState));self.parent&&self.parent!=self&&(f+="&iem=1");if(self.AMP&&self.AMP.viewer){var r=self.AMP.viewer.getResolvedViewerUrl(),l=self.AMP.viewer.maybeGetMessagingOrigin();r&&(f+="&rvu="+encodeURIComponent(r));
l&&(f+="&mso="+encodeURIComponent(l))}V||(V=za());f+="&jse="+V;var p=[],q=la,t;for(t in q)p.push(t+"="+(q[t]?"1":"0"));f+="&exps="+encodeURIComponent(p.join(","));if(e){f+="&el="+encodeURIComponent(e&&e.associatedElement?e.associatedElement.tagName:"u");e.args&&(f+="&args="+encodeURIComponent(JSON.stringify(e.args)));if(!k&&!e.ignoreStack&&e.stack){var Ea=(e.stack||"").substr(0,1E3);f+="&s="+encodeURIComponent(Ea)}e.message+=" _reported_"}else f+="&f="+encodeURIComponent(b||"")+"&l="+encodeURIComponent(c||
"")+"&c="+encodeURIComponent(d||"");f+="&r="+encodeURIComponent(self.document.referrer);f+="&ae="+encodeURIComponent(T.join(","));T.push(a);f+="&fr="+encodeURIComponent(self.location.originalHash||self.location.hash);2072<=f.length&&(f=f.substr(0,2064).replace(/\%[^&%]+$/,"")+"&SHORT=1");return f}}
function xa(){for(var a=self.document.querySelectorAll("script[src]"),b=0;b<a.length;b++){var c=a[b].src.toLowerCase();if("string"==typeof c){I||(I=self.document.createElement("a"),J=self.UrlCache||(self.UrlCache=Object.create(null)));var d=J[c];if(d)c=d;else{d=I;d.href=c;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);
if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;c=J[c]=e}}if(!fa.test(c.origin))return!0}return!1}
function za(){function a(){}a.prototype.t=function(){throw Error("message");};var b=new a;try{b.t()}catch(e){var c=e.stack;if(m(c,"t@"))return"Safari";if(-1<c.indexOf(".prototype.t@"))return"Firefox";var d=c.split("\n").pop();if(/\bat .* \(/i.test(d))return"IE";if(m(c,"Error: message"))return"Chrome"}return"unknown"};function Aa(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c}};function W(a,b,c){a.requestAnimationFrame(function(){b.measure&&b.measure(c);b.mutate(c)})}function Ba(a){var b=700;setTimeout(a,b)};function Ca(a,b,c){var d=500,e=c.width/2-b.width/2-b.left+"px",f=c.height/2-b.height/2-b.top+"px",h=b.top+"px",k=c.width-(b.left+b.width)+"px",n=b.left+"px",q=c.height-(b.top+b.height)+"px",r=b.height+"px",l=b.width+"px",p;p=e;var t=f;"number"==typeof p&&(p+="px");void 0===t?p="translate("+p+")":("number"==typeof t&&(t+="px"),p="translate("+p+","+t+")");S(a,{position:"fixed",top:h,right:k,left:n,bottom:q,height:r,width:l,transition:"transform "+d/1E3+"s ease",transform:p})};function Da(a,b,c){W(a,{measure:function(c){c.viewportSize={width:a.innerWidth,height:a.innerHeight};c.rect=b.getBoundingClientRect()},mutate:function(d){Ca(b,d.rect,d.viewportSize);Ba(function(){W(a,{mutate:function(){S(b,{position:"fixed","z-index":1E3,left:0,right:0,top:0,bottom:0,width:"100vw",height:"100vh",transition:null,transform:null});c()}})})}},{})}function Fa(a,b,c){W(a,{mutate:function(){qa(b);c()}})};function Ga(a,b){var c=100;function d(d){h=null;f=a.setTimeout(e,c);b.apply(null,d)}function e(){f=0;h&&d(h)}var f=0,h=null;return function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];f?h=b:d(b)}};function Ha(a){this.a=a;this.l=null;var b=this.a;a=b.document;if(a.scrollingElement)a=a.scrollingElement;else{var c;if(c=a.body)b=b.navigator.userAgent,c=/WebKit/i.test(b)&&!/Edge/i.test(b);a=c?a.body:a.documentElement}this.G=a;this.H=this.A=this.w=null}
Ha.prototype.observe=function(a,b){var c=this;if(!this.l){this.l=new P;var d=Ga(this.a,function(){Ia(c);c.l.fire()});Ia(this);this.a.addEventListener("scroll",d,!0);this.a.addEventListener("resize",d,!0)}b(Ja(this,a));this.l.add(function(){b(Ja(c,a))})};function Ia(a){a.w=a.G.scrollLeft||a.a.pageXOffset;a.A=a.G.scrollTop||a.a.pageYOffset;a.H=Aa(Math.round(a.w),Math.round(a.A),a.a.innerWidth,a.a.innerHeight)}
function Ja(a,b){b=b.getBoundingClientRect();return{viewport:a.H,target:Aa(Math.round(b.left+a.w),Math.round(b.top+a.A),Math.round(b.width),Math.round(b.height))}};function X(a,b,c){var d;c=void 0===c?G(void 0):c;d=void 0===d?null:d;c.type=a;c.sentinel=b;return"amp-"+(d||"")+JSON.stringify(c)};function Y(){this.u={}}Y.prototype.listen=function(a,b){this.u[a]=b};Y.prototype.fire=function(a,b,c){return a in this.u?this.u[a].apply(b,c):!1};function Z(a,b){this.a=a;this.D=b;this.s=Object.create(null);this.F=Object.create(null);this.R=new Ha(a);this.j=new Y;this.j.listen("send-positions",this.M);this.j.listen("full-overlay-frame",this.L);this.j.listen("cancel-full-overlay-frame",this.K)}
Z.prototype.processMessage=function(a){var b;var c=a.data;if("string"==typeof c&&0==c.indexOf("amp-")&&-1!=c.indexOf("{")){var d=c.indexOf("{");try{b=JSON.parse(c.substr(d))}catch(h){F().error("MESSAGING","Failed to parse message: "+c,h),b=null}}else b=null;if(!b||!b.sentinel)return!1;a:if(c=a.source,d=b.sentinel,this.s[d])c=this.s[d];else{for(;c.parent!==this.a&&c!==this.a.top;)c=c.parent;for(var e=0;e<this.D.length;e++){var f=this.D[e];if(f.contentWindow===c){c=this.s[d]=f;break a}}c=null}return c?
this.j.fire(b.type,this,[c,b,a.source,a.origin])?!0:(F().warn("InaboxMessagingHost","Unprocessed AMP message:",a),!1):(F().info("InaboxMessagingHost","Ignored message from untrusted iframe:",a),!1)};Z.prototype.M=function(a,b,c,d){if(this.F[b.sentinel])return!1;this.F[b.sentinel]=!0;this.R.observe(a,function(a){c.postMessage(X("position",b.sentinel,a),d)});return!0};
Z.prototype.L=function(a,b,c,d){Da(this.a,a,function(){c.postMessage(X("full-overlay-frame-response",b.sentinel,G({success:!0})),d)});return!0};Z.prototype.K=function(a,b,c,d){Fa(this.a,a,function(){c.postMessage(X("cancel-full-overlay-frame-response",b.sentinel,G({success:!0})),d)});return!0};Ka();function Ka(){var a=self;if(a.ampInaboxInitialized)F().info("inabox-host","Skip a 2nd attempt of initializing AMP inabox host.");else{a.ampInaboxInitialized=!0;E=x;F();ea();ca();var b=new Z(a,a.ampInaboxIframes);a.ampInaboxPendingMessages.forEach(function(a){b.processMessage(a)});a.addEventListener("message",b.processMessage.bind(b))}};
//# sourceMappingURL=amp4ads-host-v0.js.map

