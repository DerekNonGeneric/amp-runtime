(self.AMP=self.AMP||[]).push({n:"amp-ad-network-doubleclick-impl",v:"123456789",f:(function(AMP){var h;function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function aa(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function q(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var ca=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function u(a){var b=Object.create(null);if(!a)return b;for(var c;c=ca.exec(a);){var d=decodeURIComponent(c[1]).trim(),e=c[2]?decodeURIComponent(c[2]).trim():"";b[d]=e}return b};var da="";
function v(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;if(c.context&&c.context.mode)c=c.context.mode;else{var d=u(c.location.originalHash||c.location.hash),e=u(c.location.search);da||(da=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"01123456789");c={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,minified:!0,lite:void 0!=e.amp_lite,test:!1,log:d.log,version:"123456789",rtvVersion:da}}c=b.AMP_MODE=c}return c}
;var ea=Object.prototype.toString;function fa(a){return"[object Object]"===ea.call(a)}function ga(a){var b=ha,c;for(c in b)if(b[c]===a)return!0;return!1};Date.now();function ia(a){var b=a.message,c=String(Math.random());a.message=c;if(a.message===c)return a.message=b,a;var b=Error(a.message),d;for(d in a)b[d]=a[d];b.stack=a.stack;return b}function ja(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=ia(e):(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function ka(a){var b=ja.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}
self.log=self.log||{user:null,dev:null};var x=self.log;function y(){if(x.user)return x.user;throw Error("failed to call initLogConstructor");}function z(){if(x.dev)return x.dev;throw Error("failed to call initLogConstructor");};function B(a){var b=Object.create(null);a&&Object.assign(b,a);return b};function la(a){return"undefined"!==typeof TextDecoder?Promise.resolve((new TextDecoder("utf-8")).decode(a)):new Promise(function(b,c){var d=new FileReader;d.onerror=function(){c(d.error)};d.onloadend=function(){b(d.result)};d.readAsText(new Blob([a]))})}
function ma(a){return"undefined"!==typeof TextEncoder?Promise.resolve((new TextEncoder("utf-8")).encode(a)):new Promise(function(b,c){var d=new FileReader;d.onerror=function(){c(d.error)};d.onloadend=function(){b(new Uint8Array(d.result))};d.readAsArrayBuffer(new Blob([a]))})}function na(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b};var C=self.AMP_CONFIG||{},oa=C.thirdPartyFrameHost||"ampproject.net",pa=C.cdnUrl||"https://cdn.ampproject.org",qa=("string"==typeof C.cdnProxyRegex?new RegExp(C.cdnProxyRegex):C.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org/,ra=/^https?:\/\/localhost(:\d+)?$/;var sa,ta,ua=["javascript:","data:","vbscript:"];
function D(a,b){sa||(sa=self.document.createElement("a"),ta=self.UrlCache||(self.UrlCache=Object.create(null)));var c=ta[a];if(c)return c;var d=sa;d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=d.origin&&
"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;var f=e,g=f;return b?g:ta[a]=g}function wa(a,b,c){if(!b)return a;var d=a.split("#",2),e=d[0].split("?",2),f=e[0]+(e[1]?c?"?"+b+"&"+e[1]:"?"+e[1]+"&"+b:"?"+b);return f+=d[1]?"#"+d[1]:""}
function xa(a){var b=[],c;for(c in a){var d=a[c];if(null!=d)if(Array.isArray(d))for(var e=0;e<d.length;e++){var f=d[e];b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}else e=d,b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}return b.join("&")}function ya(a){"string"==typeof a&&(a=D(a));return"https:"==a.protocol||"localhost"==a.hostname||aa(a.hostname,".localhost")}function E(a){"string"==typeof a&&(a=D(a));return qa.test(a.origin)}
function za(a){if(!a)return!0;"string"==typeof a&&(a=D(a));return!ua.includes(a.protocol)};function Aa(a){a=F(a);return Ba(a,"performance")?I(a,"performance"):null}function Ca(a){if(a.nodeType){var b=Da((a.ownerDocument||a).defaultView);if(b)return b}return J(a,"url-replace")}function Ea(a,b){var c=F(a);Da(a);Fa(a,a,function(){return b});I(a,"url-replace")}function Da(a){var b=F(a);return a!=b&&Ba(a,"url-replace")?I(a,"url-replace"):null}function K(a,b){a=F(a);return I(a,b)}function J(a,b){a=L(a);a=Ga(a);return I(a,b)}function Ha(a,b){return Ia(Ga(a),b)}
function Ja(a,b){return Ka(Ga(a),b)}function F(a){return a.__AMP_TOP||a}function L(a){return a.nodeType?K((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Ga(a){a=L(a);return a.isSingleDoc()?a.win:a}function I(a,b){Ba(a,b);var c=M(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
function Fa(a,b,c){var d=M(a),e=d["url-replace"];e||(e=d["url-replace"]={obj:null,promise:null,resolve:null,context:null,ctor:null});e.ctor||e.obj||(e.ctor=c,e.context=b,e.resolve&&I(a,"url-replace"))}function Ia(a,b){var c=Ka(a,b);if(c)return c;var d,e=new Promise(function(a){d=a});M(a)[b]={obj:null,promise:e,resolve:d,context:null,ctor:null};return e}function Ka(a,b){var c=M(a)[b];if(c){if(c.promise)return c.promise;I(a,b);return c.promise=Promise.resolve(c.obj)}return null}
function M(a){var b=a.services;b||(b=a.services={});return b}function La(a){a=M(a);var b={},c;for(c in a)if(b.id=c,Object.prototype.hasOwnProperty.call(a,b.id)){var d=a[b.id];d.obj?Ma(b.id,d.obj):d.promise&&d.promise.then(function(a){return function(b){return Ma(a.id,b)}}(b));b={id:b.id}}}function Ma(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(c){z().error("SERVICE","failed to dispose service",a,c)}}function Ba(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};function Na(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};var N=null;Promise.resolve();function O(a,b){var c=Oa(a);return!!c[b]}
function Oa(a){if(N)return N;N=Object.create(null);if(a.AMP_CONFIG)for(var b in a.AMP_CONFIG){var c=a.AMP_CONFIG[b];"number"===typeof c&&0<=c&&1>=c&&(N[b]=Math.random()<c)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var d=a.AMP_CONFIG["allow-doc-opt-in"];if(b=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')){var e=b.getAttribute("content").split(",");for(b=0;b<e.length;b++)-1!=d.indexOf(e[b])&&(N[e[b]]=!0)}}Object.assign(N,
Pa(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){b=a.AMP_CONFIG["allow-url-opt-in"];var f=a.location.originalHash||a.location.hash;a=u(f);for(var g=0;g<b.length;g++){var k=a["e-"+b[g]];"1"==k&&(N[b[g]]=!0);"0"==k&&(N[b[g]]=!1)}}return N}
function Pa(a){a:{var b;b:{try{b=a.document.cookie;break b}catch(g){}b=void 0}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==decodeURIComponent(c.substring(0,d).trim())){a=decodeURIComponent(c.substring(d+1).trim());break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a}
function Qa(a,b){a.experimentBranches=a.experimentBranches||{};for(var c in b)if(b.hasOwnProperty(c)&&!a.experimentBranches.hasOwnProperty(c))if(!b[c].isTrafficEligible||!b[c].isTrafficEligible(a))a.experimentBranches[c]=null;else if(!a.experimentBranches[c]&&O(a,c)){var d=b[c].branches,e=d;a.experimentBranches[c]=e[Math.floor(Math.random()*e.length)]||null}};var Ra={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Sa=/(&|<|>|"|'|`)/g;function P(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a}function Ta(a,b){for(var c,d=a;d&&d!==c;d=d.parentElement)if(b(d))return d;return null}function Ua(a){var b="A";if(a.closest)return a.closest(b);b=b.toUpperCase();return Ta(a,function(a){return a.tagName==b})}var Q;function Va(a){return a?a.replace(Sa,Wa):a}function Wa(a){return Ra[a]};function Xa(a){return a.ampExtendedElements?!!a.ampExtendedElements["amp-analytics"]:!1}function Ya(a){return Za(a,"amp-analytics-instrumentation",void 0).then(function(a){return y().assert(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","amp-analytics-instrumentation","amp-analytics","amp-analytics","amp-analytics")})}
function Za(a,b,c){var d=L(a),e=Ja(a,b);return e?e:Promise.resolve().then(function(){return!c&&Xa(d.win)?Ha(a,b):d.whenBodyAvailable().then(function(){return c?Ja(a,b):Xa(d.win)?Ha(a,b):null})})};function R(a){return J(a,"documentInfo").get()}function S(a){return K(a,"extensions")}function T(a){return J(a,"resources")}function U(a){return J(a,"viewer")};function $a(a){var b="AMP_ECID_GOOGLE",c="_ga",d=Za(a,"cid").then(function(a){if(a)return a.get({scope:b,createCookieIfNotPresent:!0,cookieName:c},Promise.resolve(void 0)).catch(function(a){z().error("AD-CID",a)})});return K(a.win,"timer").timeoutPromise(1E3,d,"cid timeout").catch(function(a){z().warn("AD-CID",a)})};var ab={"-":"+",_:"/",".":"="};function bb(a){var b=atob(a.replace(/[-_.]/g,function(a){return ab[a]}));return na(b)};function cb(a){for(var b=a.length,c=5381,d=0;d<b;d++)c=33*c^a.charCodeAt(d);return String(c>>>0)};function db(a){for(var b=[],c=0;a&&1==a.nodeType&&25>c;){var d="";a.id&&(d="/"+a.id);var e=a.nodeName.toLowerCase();b.push(""+e+d+eb(a));c++;a=a.parentElement}return b.join()}function eb(a){for(var b=a.nodeName,c=0,d=0,e=a.previousElementSibling;e&&25>d&&100>c;)e.nodeName==b&&d++,c++,e=e.previousElementSibling;return 25>d&&100>c?"."+d:""};var fb={"AMP-CAROUSEL":"ac","AMP-FX-FLYING-CARPET":"fc","AMP-LIGHTBOX":"lb","AMP-STICKY-AD":"sa"};function gb(a){var b=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle);return b&&(E(a.location)||!1||!1)}function hb(a){var b=a.element.getAttribute("type"),c=a.win;return("doubleclick"==b||"adsense"==b)&&O(c,"a4aProfilingRate")}
function ib(a,b){var c=a.element,d=a.win;d.ampAdGoogleIfiCounter=d.ampAdGoogleIfiCounter||1;for(var e=a.getPageLayoutBox(),f=d,g=0;f!=f.parent&&100>g;)f=f.parent,g++;for(var k=g,l={},f=c.parentElement,m=0;f&&20>m;f=f.parentElement,m++)g=f.tagName.toUpperCase(),fb[g]&&(l[fb[g]]=!0);var p=l[fb["AMP-FX-FLYING-CARPET"]]||l[fb["AMP-STICKY-AD"]]?"1":"0",r=c.getAttribute("data-experiment-id");b&&(r=jb(b,r));var w=Object.keys(l);return{ifi:d.ampAdGoogleIfiCounter++,adf:cb(db(c)),nhd:k,eid:r,adx:e.left,ady:e.top,
oid:"2",pfx:p,rc:a.fromResumeCallback?1:null,act:w.length?w.join():null}}function kb(a,b){var c=lb;return T(a.document).getMeasuredResources(a,function(a){return"AMP-AD"==a.element.tagName&&a.element.getAttribute("type")==b}).then(function(a){var b={};a.forEach(function(a){var d=c(a.element);(b[d]||(b[d]=[])).push(a.element.getImpl())});return b})}
function mb(a,b,c,d){d=void 0===d?"html":d;var e=U(b).getReferrerUrl();return $a(b).then(function(b){return e.then(function(e){var f=R(a.document);a.gaGlobal=a.gaGlobal||{cid:b,hid:f.pageViewId};var g=a.screen,m=J(a.document,"viewport"),p=m.getRect(),r=m.getSize(),w=nb(a,b),A=p.width,t=p.height,G=g?g.availWidth:null,H=g?g.availHeight:null,ba=g?g.colorDepth:null,Bc=g?g.width:null,g=g?g.height:null,Cc=-(new Date).getTimezoneOffset(),va;try{va=a.history.length}catch(xd){va=0}return{is_amp:"3",amp_v:"123456789",
d_imp:"1",c:w,dt:c,output:d,biw:A,bih:t,u_aw:G,u_ah:H,u_cd:ba,u_w:Bc,u_h:g,u_tz:Cc,u_his:va,isw:a!=a.top?r.width:null,ish:a!=a.top?r.height:null,art:a.AMP_CONFIG&&a.AMP_CONFIG.canary?"2":null,url:f.canonicalUrl,top:a!=a.top?ob(a):null,loc:a.location.href==f.canonicalUrl?null:a.location.href,ref:e}})})}function pb(a,b,c){var d=ib(a,["108809080"]);return mb(a.win,a.getAmpDoc(),b).then(function(a){Object.assign(c,d,a);return qb(c,b)})}
function qb(a,b){var c={name:"trunc",value:"1"},d=[],c=c&&null!=c.value&&""!==c.value?encodeURIComponent(c.name)+"="+encodeURIComponent(String(c.value)):null,e=4037;c&&(e-=c.length+1);for(var f=Object.keys(a),g=0;g<f.length;g++){var k=f[g],l=a[k];if(null!=l&&""!==l){var k=encodeURIComponent(k)+"=",l=encodeURIComponent(String(l)),m=k.length+l.length+1;if(m>e){(a=l.substr(0,e-k.length-1).replace(/%\w?$/,""))&&d.push(k+a);c&&d.push(c);break}d.push(k+l);e-=m}}d=(d.length?"https://securepubads.g.doubleclick.net/gampad/ads?"+
d.join("&"):"https://securepubads.g.doubleclick.net/gampad/ads")+"&dtd=";b=Date.now()-b;return d+(1E6<=b?"M":0<=b?b:"-M")}function rb(a,b){var c=null,d=null;try{if(b.has("X-AmpAdSignature")&&(c=bb(b.get("X-AmpAdSignature"))),b.has("X-CreativeSize")){var e=b.get("X-CreativeSize");/[0-9]+x[0-9]+/.test(e);var f=e.split("x").map(function(a){return Number(a)}),d={width:f[0],height:f[1]}}}finally{return Promise.resolve({creative:a,signature:c,size:d})}}
function ob(a){var b=a.location.ancestorOrigins;if(b){var c=a.location.origin,d=b[b.length-1];if(c==d)return a.top.location.href;var e=sb(a);return e==a||c==b[b.length-2]?e.document.referrer:d}try{return a.top.location.href}catch(f){}a=sb(a);try{return a.document.referrer}catch(f){}return null}function sb(a){for(var b=0;a.parent!=a.parent.parent&&100>b;)a=a.parent,b++;return a}
function nb(a,b){if(!a.ampAdPageCorrelator){var c;c=b;var d=R(a.document).pageViewId,d=Number(d||0);c=c?d+c.replace(/\D/g,"")%1E6*1E6:Math.floor(4503599627370496*Math.random());a.ampAdPageCorrelator=c}return a.ampAdPageCorrelator}
function tb(a){if(!a.has("X-AmpAnalytics"))return null;try{var b=JSON.parse(a.get("X-AmpAnalytics"));Array.isArray(b.url);var c=b.url;if(!c.length)return null;for(var d={transport:{beacon:!1,xhrpost:!1},triggers:{continuousVisible:{on:"visible",visibilitySpec:{selector:"amp-ad",selectionMethod:"closest",visiblePercentageMin:50,continuousTimeMin:1E3}},continuousVisibleIniLoad:{on:"ini-load",selector:"amp-ad",selectionMethod:"closest"},continuousVisibleRenderStart:{on:"render-start",selector:"amp-ad",
selectionMethod:"closest"}}},e=B(void 0),f=1;f<=c.length;f++)e["visibility"+f]=""+c[f-1];d.requests=e;d.triggers.continuousVisible.request=Object.keys(e);return d}catch(g){z().error("AMP-A4A","Invalid analytics",g,a.get("X-AmpAnalytics"))}return null}function jb(a,b){var c=a.filter(function(a){return Number(a)}).join(",");b=b||"";return b+(b&&c?",":"")+c};function ub(a,b,c,d,e,f,g){if(!gb(a))return!1;var k=vb(a,b,c,d.control,d.experiment,f.control,f.experiment,g?g.control:null,g?g.experiment:null),l={};l[c]={isTrafficEligible:function(){return!0},branches:[e.control,e.experiment]};Qa(a,l);if(O(a,c)){var m=a.experimentBranches[c];if(m){wb(m,b);var p=Aa(a);p&&p.addEnabledExperiment(c+"-"+m)}k?wb("2088461",b):wb("2088462",b);var r=m==e.experiment||m==d.experiment||m==f.experiment||"117152632"==m;return r==!xb(a,b)}return xb(a,b)}
function vb(a,b,c,d,e,f,g,k,l){var m="117152632",p=U(b).getParam("exp")||u(a.location.search).exp;if(!p)return!1;var r=(b=/(^|,)(a4a:[^,]*)/.exec(p))&&b[2];if(!r)return!1;b=r.split(":",2)[1];var w={"-1":m,0:null,1:d,2:e,3:f,4:g,5:k,6:l};if(w.hasOwnProperty(b)){b=w[b];a.experimentBranches=a.experimentBranches||{};var A=!!b,t=O(a,c),A=!(void 0!==A?!A:t);A!=t&&(Oa(a)[c]=A);a.experimentBranches[c]=b;return!0}z().warn("A4A-CONFIG","Unknown a4a URL parameter: ",r," expected one of -1 (manual), 0 (not in experiment), 1 (control branch), or 2 (a4a experiment branch)");
return!1}function yb(a){return a?a.split(","):[]}function zb(a,b){return yb(a.getAttribute("data-experiment-id")).some(function(a){return a===b})}function Ab(a){return zb(a,"117152632")}function xb(a,b){switch(b.getAttribute("type")){case "adsense":return O(a,"a4aFastFetchAdSenseLaunched");case "doubleclick":return O(a,"a4aFastFetchDoubleclickLaunched");default:return!1}}function Bb(a){return a.every(function(a){return!isNaN(parseInt(a,10))})}
function wb(a,b){var c=b.getAttribute("data-experiment-id");c&&Bb(yb(c))?b.setAttribute("data-experiment-id",jb([a],c)):b.setAttribute("data-experiment-id",a)};var Cb={control:"117152652",experiment:"117152653"},Db={control:"117152654",experiment:"117152655"},Eb={control:"2092617",experiment:"2092618"},Fb={control:"117152670",experiment:"117152671"},Gb={control:"2092615",experiment:"2092616"};var Hb={control:"117152662",experiment:"117152663"},Ib={control:"117152664",experiment:"117152665"},Jb={control:"2092619",experiment:"2092620"},Kb={control:"117152680",experiment:"117152681"},Lb={control:"2092613",experiment:"2092614"},Mb={control:"21060540",experiment:"21060541"};B({adsense:function(a,b){var c,d;O(a,"a4aFastFetchAdSenseLaunched")?(c=Eb,d=Gb):(c=Cb,d=Fb);return!!b.getAttribute("data-ad-client")&&ub(a,b,"expAdsenseA4A",c,d,Db)},doubleclick:function(a,b){if(b.hasAttribute("useSameDomainRenderingUntilDeprecated"))return!1;var c=b.hasAttribute("data-use-beta-a4a-implementation"),d,e;O(a,"a4aFastFetchDoubleclickLaunched")?(d=Jb,e=Lb):(d=Hb,e=Kb);var f=ub(a,b,"expDoubleclickA4A",d,e,Ib,Mb)||c&&(E(a.location)||!1||!1);f&&c&&!Ab(b)&&b.setAttribute("data-experiment-id",
"2077831");return f},triplelift:function(a,b){var c;return!!b.getAttribute("data-use-a4a")&&!!(c=b.getAttribute("src"))&&0==c.indexOf("https://ib.3lift.com/")},cloudflare:function(){return!0},gmossp:function(a,b){a=b.getAttribute("src");return!!b.getAttribute("data-use-a4a")&&!!a&&q(a,"https://sp.gmossp-sp.jp")}});
var Nb={google:"https://cdn.ampproject.org/amp-ad-verifying-keyset.json","google-dev":"https://cdn.ampproject.org/amp-ad-verifying-keyset-dev.json",cloudflare:"https://amp.cloudflare.com/amp-ad-verifying-keyset.json","cloudflare-dev":"https://amp.cloudflare.com/amp-ad-verifying-keyset-dev.json"};function Ob(a,b){if(!(a.defaultPrevented||0!=a.buttons&&1!=a.buttons||a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)){var c=Pb(a);if(c&&c.eventualUrl&&!1!==a.isTrusted){var d=encodeURIComponent,e;e=c.a.href;var f=encodeURIComponent("amp")+"="+encodeURIComponent("1");e=wa(e,f,!0);var g="click="+d(e);e=c.eventualUrl;e=-1==c.eventualUrl.indexOf("#")?e+("#"+g):e+("&"+g);d=c.a.ownerDocument.defaultView;(f=d.location.ancestorOrigins)&&"http://localhost:8000"==f[f.length-1]&&(e=e.replace(D(c.eventualUrl).host+
"/c/","http://localhost:8000/max/"));a.preventDefault();if(b)b(e);else{a=e;e=(c.a.target||"_top").toLowerCase();if(d.location.ancestorOrigins)if(f=d.location.ancestorOrigins,2>f.length||-1==f[f.length-1].indexOf(".google."))f=null;else{var k=f[f.length-2],l;(l=E(k))||(l=k,"string"==typeof l&&(l=D(l)),l=ra.test(l.origin));if(l){l=d;for(var m=0;m<f.length-1;m++)l=l.parent;f={win:l,origin:k}}else f=null}else f=null;if(f)f.win.postMessage("a2a;"+JSON.stringify(B({url:a})),f.origin);else{var p;try{p=d.open(a,
e,void 0)}catch(r){z().error("DOM","Failed to open url on target: ",e,r)}p||"_top"==e||d.open(a,"_top")}}}}}function Pb(a){if(a=Ta(a.target,function(a){return"A"==a.tagName&&a.href}))return{eventualUrl:Qb(a),a:a}}function Qb(a){var b=a.getAttribute("data-url-param-name")||"adurl",c=u(a.search)[b];if(c&&E(c)&&q(D(c).pathname,"/c/"))return c};function Rb(){this.g=null}h=Rb.prototype;h.add=function(a){var b=this;this.g||(this.g=[]);this.g.push(a);return function(){b.remove(a)}};h.remove=function(a){this.g&&(a=this.g.indexOf(a),-1<a&&this.g.splice(a,1))};h.removeAll=function(){this.g&&(this.g.length=0)};h.fire=function(a){if(this.g)for(var b=this.g,c=0;c<b.length;c++)(0,b[c])(a)};h.getHandlerCount=function(){return this.g?this.g.length:0};var Sb,Tb="Webkit webkit Moz moz ms O o".split(" ");function V(a,b,c){var d;var e=a.style;if(!q(b,"--")){Sb||(Sb=B());var f=Sb[b];if(!f){f=b;if(void 0===e[b]){var g=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var k=0;k<Tb.length;k++){var l=Tb[k]+g;if(void 0!==e[l]){g=l;break b}}g=""}void 0!==e[g]&&(f=g)}Sb[b]=f}b=f}b&&(a.style[b]=d?c+d:c)}function W(a,b){for(var c in b)V(a,c,b[c])}function Ub(a,b){var c={};b.forEach(function(a){c[a]=null});W(a,c)};function Vb(a,b,c){function d(a){try{return g(a)}catch(m){throw self.reportError(m),m;}}var e=void 0,f=a,g=c,k=e||!1;f.addEventListener(b,d,k);return function(){f&&f.removeEventListener(b,d,k);d=f=g=null}};function Wb(a,b,c){var d=c,e=Vb(a,b,function(a){try{d(a)}finally{d=null,e()}});return e}function Xb(a){var b,c;if(a.complete||"complete"==a.readyState||a.document&&"complete"==a.document.readyState)return Promise.resolve(a);var d=new Promise(function(d,f){var e=a.tagName;b="AUDIO"===e||"VIDEO"===e?Wb(a,"loadstart",d):Wb(a,"load",d);e&&(c=Wb(a,"error",f))});return d.then(function(){c&&c();return a},function(){b&&b();var c=a;c&&c.src&&(c=c.src);throw y().createError("Failed to load:",c);})};self.AMPErrors=self.AMPErrors||[];function Yb(a){return a?"string"==typeof a?q(a,"CANCELLED"):"string"==typeof a.message?q(a.message,"CANCELLED"):!1:!1};function Zb(a){a=parseFloat(a);return"number"===typeof a&&isFinite(a)?a:void 0};var $b={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0};function ac(a){var b;b=void 0===b?1:b;return new Promise(function(c,d){function e(a){l.length<=g&&l.push(a);l.length>g&&d(l)}function f(a){k.length<b&&k.push(a);k.length==b&&c(k)}b=Math.max(b,0);var g=a.length-b;0>g&&d(Error("not enough promises to resolve"));0==a.length&&c([]);for(var k=[],l=[],m=0;m<a.length;m++)Promise.resolve(a[m]).then(f,e)})};function bc(a,b,c){var d=cc(a,b,c);return""===d?Xb(a).then(function(){return cc(a,b,c)}):Promise.resolve(d)}function cc(a,b,c){var d=a.performance&&a.performance.timing;if(d&&0!=d.navigationStart&&(a=void 0===c?d[b]:d[c]-d[b],"number"===typeof a&&isFinite(a)))return 0>a?"":a}function dc(a,b){var c=a.performance&&a.performance.navigation;if(c&&void 0!==c[b])return c[b]}function ec(){this.H=void 0;this.j=Object.create(null);this.P=!1}h=ec.prototype;h.initialize=function(){};
h.get=function(a){this.P||(this.initialize(),this.P=!0);return this.j[a]};h.set=function(a,b){a.indexOf("RETURN");this.j[a]=this.j[a]||{sync:void 0,async:void 0};this.j[a].sync=b;this.H=void 0;return this};h.setAsync=function(a,b){a.indexOf("RETURN");this.j[a]=this.j[a]||{sync:void 0,async:void 0};this.j[a].async=b;this.H=void 0;return this};h.setBoth=function(a,b,c){return this.set(a,b).setAsync(a,c)};
h.getExpr=function(a){var b=this;this.P||(this.initialize(),this.P=!0);var c=a?Object.keys(a):null;if(c&&0<c.length){var d=Object.keys(this.j);c.forEach(function(a){void 0===b.j[a]&&d.push(a)});return fc(d)}this.H||(this.H=fc(Object.keys(this.j)));return this.H};function fc(a){a.sort(function(a,b){return b.length-a.length});var b=a.join("|");return new RegExp("\\$?("+b+")(?:\\(([0-9a-zA-Z-_.,]+)\\))?","g")};var gc="RANDOM COUNTER CANONICAL_URL CANONICAL_HOST CANONICAL_HOSTNAME CANONICAL_PATH DOCUMENT_REFERRER TITLE AMPDOC_URL AMPDOC_HOST AMPDOC_HOSTNAME SOURCE_URL SOURCE_HOST SOURCE_HOSTNAME SOURCE_PATH PAGE_VIEW_ID CLIENT_ID VARIANT VARIANTS SHARE_TRACKING_INCOMING SHARE_TRACKING_OUTGOING TIMESTAMP TIMEZONE SCROLL_TOP SCROLL_LEFT SCROLL_HEIGHT SCROLL_WIDTH VIEWPORT_HEIGHT VIEWPORT_WIDTH SCREEN_WIDTH SCREEN_HEIGHT AVAILABLE_SCREEN_HEIGHT AVAILABLE_SCREEN_WIDTH SCREEN_COLOR_DEPTH DOCUMENT_CHARSET BROWSER_LANGUAGE VIEWER TOTAL_ENGAGED_TIME AMP_VERSION".split(" ");
function hc(a,b){ec.call(this);this.ja=Ca(a).getVariableSource();this.J=b}n(hc,ec);
hc.prototype.initialize=function(){var a=this;this.set("AD_NAV_TIMING",function(b,c){y().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return cc(a.J,b,c)}).setAsync("AD_NAV_TIMING",function(b,c){y().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return bc(a.J,b,c)});this.set("AD_NAV_TYPE",function(){return dc(a.J,"type")});this.set("AD_NAV_REDIRECT_COUNT",function(){return dc(a.J,"redirectCount")});for(var b=0;b<gc.length;b++){var c=
gc[b],d=this.ja.get(c);this.set(c,d.sync).setAsync(c,d.async)}};function ic(a,b,c){var d,e=Date.now(),f=b.getAttribute("width"),g=b.getAttribute("height");d=d?d:B(void 0);d.width=Zb(f);d.height=Zb(g);var k=a.location.href;"about:srcdoc"==k&&(k=a.parent.location.href);var l=R(b),m=U(b),f=m.getUnconfirmedReferrerUrl(),p=b.getPageLayoutBox(),g=l.sourceUrl,r=l.canonicalUrl,w=l.pageViewId,A={href:k},t=b.tagName,G={localDev:!1,development:v(void 0).development,filter:v(void 0).filter,minified:!0,lite:v(void 0).lite,test:!1,log:v(void 0).log,version:v(void 0).version,
rtvVersion:v(void 0).rtvVersion},H=a;d._context=B({ampcontextVersion:"123456789",ampcontextFilepath:pa+"/123456789/ampcontext-v0.js",sourceUrl:g,referrer:f,canonicalUrl:r,pageViewId:w,location:A,startTime:e,tagName:t,mode:G,canary:!(!H.AMP_CONFIG||!H.AMP_CONFIG.canary),hidden:!m.isVisible(),initialLayoutRect:p?{left:p.left,top:p.top,width:p.width,height:p.height}:null,initialIntersection:b.getIntersectionChangeEntry(),domFingerprint:cb(db(b)),experimentToggles:Oa(a),
sentinel:c});var ba=b.getAttribute("src");ba&&(d.src=ba);return d};function jc(a){this.L=K(a,"crypto")}jc.prototype.isAvailable=function(){return this.L.isPkcsAvailable()};jc.prototype.importPublicKey=function(a,b){var c=this;return this.L.importPkcsKey(b).then(function(d){if("string"!=typeof b.n||"string"!=typeof b.e)throw Error("missing fields in JSON Web Key");var e=bb(b.n),f=bb(b.e),g=kc(e),k=kc(f),l=new Uint8Array(g.length+k.length);l.set(g);l.set(k,g.length);return c.L.sha1(l).then(function(b){return{serviceName:a,cryptoKey:d,hash:new Uint8Array(b,0,4)}})})};
jc.prototype.verifySignature=function(a,b,c){if(!(5<b.length&&0==b[0]&&lc(b,c.hash)))return Promise.resolve(!1);var d=new Uint8Array(a.length+1);d.set(a);d[a.length]=0;return this.L.verifyPkcs(c.cryptoKey,b.subarray(5),d)};function kc(a){var b=new Uint8Array(4+a.length);b[0]=a.length>>24&255;b[1]=a.length>>16&255;b[2]=a.length>>8&255;b[3]=a.length&255;b.set(a,4);return b}function lc(a,b){if(!a||!b)return!1;for(var c=0;4>c;c++)if(a[c+1]!==b[c])return!1;return!0};function mc(a,b){void 0===a["3pla"]&&(a["3pla"]=0);a["3pla"]++;K(a,"timer").timeoutPromise(1E3,b).catch(function(){}).then(function(){a["3pla"]--})};function nc(a,b){b.document.documentElement.addEventListener("click",oc.bind(null,a),!0)}function oc(a,b){var c=Ua(b.target);if(c&&c.href){var d=c.getAttribute("data-a4a-orig-href")||c.getAttribute("href");if(d){var e={CLICK_X:function(){return b.pageX},CLICK_Y:function(){return b.pageY}},f=Ca(a).expandSync(d,e,void 0,{CLICK_X:!0,CLICK_Y:!0});f!=d&&(c.getAttribute("data-a4a-orig-href")||c.setAttribute("data-a4a-orig-href",d),c.setAttribute("href",f))}}};function pc(){this.w=B();this.h=null}h=pc.prototype;h.get=function(a){return this.w[a]||null};h.whenSignal=function(a){var b=this.h&&this.h[a];if(!b){var c=this.w[a];if(null!=c)b={promise:"number"==typeof c?Promise.resolve(c):Promise.reject(c)};else var d,e,b={promise:new Promise(function(a,b){d=a;e=b}),resolve:d,reject:e};this.h||(this.h=B());this.h[a]=b}return b.promise};
h.signal=function(a,b){if(null==this.w[a]){var c=b||Date.now();this.w[a]=c;(a=this.h&&this.h[a])&&a.resolve&&(a.resolve(c),a.resolve=void 0,a.reject=void 0)}};h.rejectSignal=function(a,b){null==this.w[a]&&(this.w[a]=b,(a=this.h&&this.h[a])&&a.reject&&(a.reject(b),a.resolve=void 0,a.reject=void 0))};h.reset=function(a){this.w[a]&&delete this.w[a];var b=this.h&&this.h[a];b&&!b.resolve&&delete this.h[a]};function qc(a,b){return{left:0,top:0,width:a,height:b,bottom:0+b,right:0+a}};var rc=["AMP-AD","AMP-ANALYTICS","AMP-PIXEL"],sc;function tc(a,b){uc(a,b)}
function vc(a,b,c,d){var e=F(a.ownerDocument.defaultView),f=S(e);V(a,"visibility","hidden");a.setAttribute("referrerpolicy","unsafe-url");c.extensionIds&&c.extensionIds.forEach(function(a){return f.loadExtension(a)});var g=wc(c);a.onload=function(){a.readyState="complete"};var k;void 0===sc&&(sc="srcdoc"in HTMLIFrameElement.prototype);if(sc)a.srcdoc=g,k=Xb(a),b.appendChild(a);else{a.src="about:blank";b.appendChild(a);var l=a.contentWindow.document;l.open();l.write(g);k=Xb(a.contentWindow);l.close()}var m;
m=xc(a)?Promise.resolve():new Promise(function(b){var c=e.setInterval(function(){xc(a)&&(b(),e.clearInterval(c))},5);k.catch(function(a){ka(a)}).then(function(){b();e.clearInterval(c)})});return m.then(function(){var b=new yc(a,c,k);a.__AMP_EMBED__=b;f.installExtensionsInChildWindow(a.contentWindow,c.extensionIds||[],d);zc(b);return b})}function xc(a){a=a.contentWindow&&a.contentWindow.document;return!!(a&&"loading"!=a.readyState&&"uninitialized"!=a.readyState&&a.body&&a.body.firstChild)}
function wc(a){var b=a.html,c=b.toUpperCase(),d=c.indexOf("<HEAD");-1!=d&&(d=c.indexOf(">",d+1)+1);-1==d&&(d=c.indexOf("<BODY"));-1==d&&(d=c.indexOf("<HTML"),-1!=d&&(d=c.indexOf(">",d+1)+1));var e=[];0<d&&e.push(b.substring(0,d));e.push('<base href="'+Va(a.url)+'">');a.fonts&&a.fonts.forEach(function(a){e.push('<link href="'+Va(a)+'" rel="stylesheet" type="text/css">')});0<d?e.push(b.substring(d)):e.push(b);return e.join("")}
function yc(a,b,c){this.iframe=a;this.win=a.contentWindow;this.spec=b;this.host=b.host||null;this.ka=Date.now();this.T=!1;this.ga=new Rb;this.I=this.host?this.host.signals():new pc;this.ma=Promise.all([c,this.whenReady()])}h=yc.prototype;h.destroy=function(){T(this.iframe).removeForChildWindow(this.win);La(this.win)};h.getStartTime=function(){return this.ka};h.getUrl=function(){return this.spec.url};h.signals=function(){return this.I};h.whenReady=function(){return this.I.whenSignal("render-start")};
h.whenWindowLoaded=function(){return this.ma};h.whenIniLoaded=function(){return this.I.whenSignal("ini-load")};function zc(a){a.host?a.host.renderStarted():a.I.signal("render-start");V(a.iframe,"visibility","");a.win.document&&a.win.document.body&&W(a.win.document.body,{opacity:1,visibility:"visible",animation:"none"});var b;b=a.host?a.host.getLayoutBox():qc(a.win.innerWidth,a.win.innerHeight);Promise.all([a.whenReady(),Ac(a.iframe,a.win,b)]).then(function(){a.I.signal("ini-load")})}h.isVisible=function(){return this.T};
h.onVisibilityChanged=function(a){return this.ga.add(a)};function uc(a,b){a.T!=b&&(a.T=b,a.ga.fire(a.T))}h.getBodyElement=function(){return(this.iframe.contentDocument||this.iframe.contentWindow.document).body};h.getVsync=function(){return K(this.win,"vsync")};h.getResources=function(){return T(this.iframe)};
function Dc(a,b,c){return b.mutate&&!b.measure?a.getResources().mutateElement(a.iframe,function(){b.mutate(c)}):new Promise(function(d){a.getVsync().measure(function(){b.measure(c);if(!b.mutate)return d();Dc(a,{mutate:b.mutate},c).then(d)})})}
h.enterFullOverlayMode=function(){var a=this,b=this.getBodyElement(),c=this.getFixedContainer();return Dc(this,{measure:function(b){var c=a.iframe.getBoundingClientRect(),d=a.win.innerWidth,g=a.win.innerHeight;b.fixedContainerStyle={position:"absolute",top:c.top+"px",right:d-c.right+"px",left:c.left+"px",bottom:g-c.bottom+"px",width:c.width+"px",height:c.height+"px"}},mutate:function(d){V(b,"background","transparent");W(a.iframe,{position:"fixed",left:0,right:0,top:0,bottom:0,width:"100vw",height:"100vh"});
W(c,d.fixedContainerStyle)}},{})};h.leaveFullOverlayMode=function(){var a=this,b=this.getBodyElement(),c=this.getFixedContainer();return Dc(this,{mutate:function(){Ub(b,["background"]);Ub(a.iframe,"position left right top bottom width height".split(" "));Ub(c,"position top right left bottom width height".split(" "))}})};
h.getFixedContainer=function(){var a;a=this.getBodyElement();if(null==Q)try{a.ownerDocument.querySelector(":scope"),Q=!0}catch(c){Q=!1}if(Q)a=a.querySelector(":scope > amp-ad-banner");else{a.classList.add("i-amphtml-scoped");var b=a.querySelector(".i-amphtml-scoped > amp-ad-banner");a.classList.remove("i-amphtml-scoped");a=b}return a};
function Ac(a,b,c){return T(a).getResourcesInRect(b,c).then(function(a){var b=[];a.forEach(function(a){rc.includes(a.element.tagName)||b.push(a.loadedOnce())});return Promise.all(b)})};function Ec(a){var b="nameframe",c=b||"frame";return"https://d-"+Fc(a)+("."+oa+"/123456789/")+(c+".html")}function Fc(a){var b;if(a.crypto&&a.crypto.getRandomValues){var c=new Uint32Array(2);a.crypto.getRandomValues(c);b=String(c[0])+c[1]}else b=String(a.Math.random()).substr(2)+"0";return b}function Gc(){for(var a=window,b=0,c=a;c&&c!=c.parent;c=c.parent)b++;return String(b)+"-"+Fc(a)};function Hc(a,b){this.ampdoc=a;this.Z=b}h=Hc.prototype;h.expandSync=function(a,b,c,d){return this.expandUrlSync(a,b,c,d)};h.expandAsync=function(a,b,c){return this.expandUrlAsync(a,b,c)};h.expandStringSync=function(a,b,c,d){return X(this,a,b,c,!0,d)};h.expandStringAsync=function(a,b){return X(this,a,b)};h.expandUrlSync=function(a,b,c,d){return Ic(a,X(this,a,b,c,!0,d))};h.expandUrlAsync=function(a,b,c){return X(this,a,b,void 0,void 0,c).then(function(b){return Ic(a,b)})};
h.expandInputValueAsync=function(a){return Jc(this,a,!1)};h.expandInputValueSync=function(a){return Jc(this,a,!0)};function Jc(a,b,c){"INPUT"==b.tagName&&(b.getAttribute("type")||"").toLowerCase();var d=Kc(b);if(!d)return c?b.value:Promise.resolve(b.value);void 0===b["amp-original-value"]&&(b["amp-original-value"]=b.value);a=X(a,b["amp-original-value"]||b.value,void 0,void 0,c,d);return c?b.value=a:a.then(function(a){return b.value=a})}
function Kc(a,b){if(a=a.getAttribute("data-amp-replace")){var c={};a.trim().split(/\s+/).forEach(function(a){!b||b&&b.hasOwnProperty(a)?c[a]=!0:b&&y().warn("URL","Ignoring unsupported replacement",a)});return c}}
h.maybeExpandLink=function(a){var b={CLIENT_ID:!0,QUERY_PARAM:!0},c=a.getAttribute("data-amp-addparams"),d=Kc(a,b);if(d||c){var e=a["amp-original-href"]||a.getAttribute("href"),f=D(e);null==a["amp-original-href"]&&(a["amp-original-href"]=e);if(c)var g=u(c),e=wa(e,xa(g));if(d){a:if(g=R(this.ampdoc),f.origin==D(g.canonicalUrl).origin||f.origin==D(g.sourceUrl).origin)f=!0;else{if((g=this.ampdoc.getRootNode().querySelector("meta[name=amp-link-variable-allowed-origin]"))&&g.hasAttribute("content"))for(var g=
g.getAttribute("content").trim().split(/\s+/),k=0;k<g.length;k++)if(f.origin==D(g[k]).origin){f=!0;break a}f=!1}var l=f;l?e=this.expandSync(e,void 0,void 0,d):y().warn("URL","Ignoring link replacement",e," because the link does not go to the document's source, canonical, or whitelisted origin.")}return a.href=e}};
function X(a,b,c,d,e,f){var g=a.Z.getExpr(c),k,l=b.replace(g,function(b,g,r){var m=[];"string"==typeof r&&(m=r.split(","));if(f&&!f[g])return b;var p;if(c&&g in c)p=c[g];else if(p=a.Z.get(g))if(e){if(p=p.sync,!p)return y().error("UrlReplacements","ignoring async replacement key: ",g),""}else p=p.async||p.sync;var t;try{t="function"==typeof p?p.apply(null,m):p}catch(H){e&&(t=""),ka(H)}if(t&&t.then){if(e)return y().error("UrlReplacements","ignoring promise value for key: ",g),"";var G=t.catch(function(a){ka(a)}).then(function(a){l=
l.replace(b,null==a?"":encodeURIComponent(a));d&&(d[b]=a)});k=k?k.then(function(){return G}):G;return b}d&&(d[b]=t);return null==t?"":encodeURIComponent(t)});k&&(k=k.then(function(){return l}));return e?l:k||Promise.resolve(l)}h.collectVars=function(a,b){var c=Object.create(null);return X(this,a,b,c).then(function(){return c})};
function Ic(a,b){var c=D(b,!0).protocol,d=D(a,!0).protocol;if(c!=d)return y().error("UrlReplacements","Illegal replacement of the protocol: ",a),a;y().assert(za(b),"The replacement url has invalid protocol: %s",b);return b}h.getVariableSource=function(){return this.Z};var ha={CLIENT_CACHE:"client_cache",SAFEFRAME:"safeframe",NAMEFRAME:"nameframe"},Lc={frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no",marginwidth:"0",marginheight:"0"},Mc={adSlotCleared:"-1",urlBuilt:"1",adRequestStart:"2",adRequestEnd:"3",extractCreativeAndSignature:"4",adResponseValidateStart:"5",renderFriendlyStart:"6",renderCrossDomainStart:"7",renderFriendlyEnd:"8",renderCrossDomainEnd:"9",preAdThrottle:"10",renderSafeFrameStart:"11",throttled3p:"12",adResponseValidateEnd:"13",
xDomIframeLoaded:"14",friendlyIframeLoaded:"15",adSlotCollapsed:"16",adSlotUnhidden:"17",layoutAdPromiseDelay:"18",signatureVerifySuccess:"19",networkError:"20",friendlyIframeIniLoad:"21",visHalf:"22",visHalfIniLoad:"23",firstVisible:"24",visLoadAndOneSec:"25",iniLoad:"26",resumeCallback:"27",visIniLoad:"29"};function Nc(a,b,c){return function(d){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];try{return a.apply(b,e)}catch(g){if(c)try{return e.unshift(g),c.apply(b,e)}catch(k){}}}}
function Y(a){var b=this;AMP.BaseElement.call(this,a);this.B=null;this.R=0;this.l=this.uiHandler=this.o=this.m=this.config=null;this.pa=this.getVsync();this.W=!1;this.S=new jc(this.win);this.G=null;this.D={width:this.element.getAttribute("width"),height:this.element.getAttribute("height")};this.A=null;this.F=K(this.win,"platform").isIos()?"safeframe":null;this.N=this.win.performance&&this.win.performance.now?this.win.performance.now.bind(this.win.performance):Date.now;this.b=Nc(this.emitLifecycleEvent,
this,function(a,d){z().error("amp-a4a",b.element.getAttribute("type"),"Error on emitLifecycleEvent",a,d)});this.sentinel=Gc();this.V=!1;this.iframe=null;this.fromResumeCallback=!1;a=(this.element.getAttribute("type")||"notype").toLowerCase();this.aa="adsense"==a&&zb(this.element,"117152655")||"doubleclick"==a&&zb(this.element,"117152665");this.Y="1-0-9"}n(Y,AMP.BaseElement);h=Y.prototype;h.getPriority=function(){return 2};
h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};h.buildCallback=function(){this.uiHandler=new AMP.AmpAdUIHandler(this);if(!this.win.ampA4aValidationKeys){var a=Oc(this);this.win.ampA4aValidationKeys=a}};
h.renderOutsideViewport=function(){if(!this.W&&this.win["3pla"])return this.b("throttled3p"),!1;var a;var b=this.element.getAttribute("data-loading-strategy");null==b?a=null:"prefer-viewability-over-views"==b||""==b?a=1.25:(a="Value of data-loading-strategy should be a float number in range of [0, 3], but got "+b,b=y().assertNumber(parseFloat(b),a),y().assert(0<=b&&3>=b,a),a=b);var c=a;return null!==c?c:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};h.isValidElement=function(){return!0};
h.getPreconnectUrls=function(){return[]};h.getPrefetchUrls=function(){return[]};h.isAmpAdElement=function(){return"AMP-AD"==this.element.tagName||"AMP-EMBED"==this.element.tagName};h.preconnectCallback=function(){var a=this;this.preconnect.preload(Pc(this));this.preconnect.preload(Ec(this.win));var b=this.getPreconnectUrls();b&&b.forEach(function(b){a.preconnect.url(b,!0)})};
h.resumeCallback=function(){if(!this.o){this.b("resumeCallback");this.fromResumeCallback=!0;var a=this.getResource();if(a.hasBeenMeasured()&&!a.isMeasureRequested())this.onLayoutMeasure()}};h.getResource=function(){return this.element.getResources().getResourceForElement(this.element)};h.hasAdPromise=function(){return!!this.B};
function Qc(a){if(!a.S.isAvailable())return!1;var b=a.getIntersectionElementLayoutBox();if(0==b.height||0==b.width)return!1;var b=a.win,c=!1,d=0,e=a.element;do{if($b[e.tagName])d++,c=!1;else{var f=(b.getComputedStyle(e)||B()).position;"fixed"!=f&&"sticky"!=f||(c=!0)}e=e.parentElement}while(e&&"BODY"!=e.tagName);return!c&&1>=d?a.isValidElement()?!0:(y().warn("amp-a4a",a.element.getAttribute("type"),"Amp ad element ignored as invalid",a.element),!1):(y().warn("amp-a4a","<"+a.element.tagName+"> is not allowed to be "+
("placed in elements with position:fixed: "+a.element)),!1)}
h.onLayoutMeasure=function(){var a=this;if(this.l)this.l.onLayoutMeasure();if(!this.B&&Qc(this)){++this.R;var b=this.verifyStillCurrent();this.B=U(this.getAmpDoc()).whenFirstVisible().then(function(){b();if(a.aa&&!a.getResource().renderOutsideViewport())return a.getResource().whenWithinRenderOutsideViewport()}).then(function(){b();a.aa&&z().info("amp-a4a","ad request being built");return a.getAdUrl()}).then(function(c){b();a.m=c;a.b("urlBuilt");return c&&a.sendXhrRequest(c)}).then(function(c){b();
a.b("adRequestEnd");if(!c)return null;if(!c.arrayBuffer||204==c.status)return a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE");var d=c.headers.get("X-AmpAdRender")||a.F;(a.F=d)&&!ga(d)&&z().error("AMP-A4A","cross-origin render mode header "+d);var e=c.headers.get("X-AmpSafeFrameVersion");/^[0-9-]+$/.test(e)&&"1-0-9"!=e&&(a.Y=e,a.preconnect.preload(Pc(a)));return c.arrayBuffer().then(function(b){return 0==b.byteLength?(a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE")):{bytes:b,headers:c.headers}})}).then(function(c){b();
c&&a.b("extractCreativeAndSignature");return c&&a.extractCreativeAndSignature(c.bytes,c.headers)}).then(function(c){b();if(!c)return Promise.resolve();a.D=c.size||a.D;"client_cache"!=a.F&&c.creative&&(a.G=c.creative);if(!c.signature)return Promise.resolve();a.b("adResponseValidateStart");return Rc(a,c.creative,c.signature).then(function(b){if(b)return b;y().error("amp-a4a",a.element.getAttribute("type"),"Unable to validate AMP creative against key providers");a.win.ampA4aValidationKeys=Oc(a);return Rc(a,
c.creative,c.signature)})}).then(function(c){b();a.W=!!c;return c&&la(c)}).then(function(c){b();var d;if(!c||!(d=Sc(a,c)))return null;a.updatePriority(0);var e=S(a.win);d.customElementExtensions.forEach(function(a){return e.loadExtension(a)});return d}).catch(function(b){if("NO-CONTENT-RESPONSE"==b)return{minifiedCreative:"",customElementExtensions:[],customStylesheets:[]};Tc(a,b);return null})}};
function Rc(a,b,c){var d=a.win.ampA4aValidationKeys,e=!1;return ac(d.map(function(d){return d.then(function(d){return e?Promise.reject("noop"):ac(d.keys.map(function(d){return d.then(function(d){if(e)return Promise.reject("noop");if(!d)return Promise.reject("Promise resolved to null key.");var f=a.N();return a.S.verifySignature(new Uint8Array(b),c,d).then(function(g){if(g)return e=!0,a.b("signatureVerifySuccess",{"met.delta.AD_SLOT_ID":Math.round(a.N()-f),"signingServiceName.AD_SLOT_ID":d.serviceName}),
b;d&&5<c.length&&0==c[0]&&lc(c,d.hash)&&y().error("amp-a4a",a.element.getAttribute("type"),"Key failed to validate creative's signature",d.serviceName,d.cryptoKey);return Promise.reject(d.serviceName+" key failed to verify")},function(b){z().error("amp-a4a",a.element.getAttribute("type"),d.serviceName,b,a.element)})})})).then(function(a){return a[0]},function(){return Promise.reject("All keys for "+d.serviceName+" failed to verify")})})})).then(function(b){a.b("adResponseValidateEnd");return b[0]},
function(){a.b("adResponseValidateEnd");return Promise.reject("No validation service could verify this key")})}function Tc(a,b,c){if(Yb(b))throw b;b=b&&b.message?ia(b):Error("unknown error "+b);c&&(b.ignoreStack=c);var d=a.element.getAttribute("type")||"notype";0!=b.message.indexOf("amp-a4a: "+d+":")&&(b.message="amp-a4a: "+d+": "+b.message);Uc(b,a.m);v().development||v().log?y().error("amp-a4a",b):(y().warn("amp-a4a",b),.01>Math.random()&&z().expectedError("amp-a4a",b))}
h.layoutCallback=function(){var a=this;if(!this.B)return Qc(this)&&z().error("amp-a4a","Null promise in layoutCallback"),Promise.resolve();this.b("preAdThrottle");var b=this.N(),c=this.verifyStillCurrent();return this.B.then(function(d){c();var e=a.N()-b;a.b("layoutAdPromiseDelay",{layoutAdPromiseDelay:Math.round(e),isAmpCreative:!!d});return a.V?Promise.resolve():a.iframe?(a.b("iframeAlreadyExists"),Promise.resolve()):d?Vc(a,d).catch(function(b){c();y().error("amp-a4a",a.element.getAttribute("type"),
"Error injecting creative in friendly frame",b);Tc(a,b);return Wc(a)}):Wc(a)}).catch(function(b){Tc(a,b);throw Error("CANCELLED");})};h.attemptChangeSize=function(a,b){this.A=this.A||this.getLayoutBox();return AMP.BaseElement.prototype.attemptChangeSize.call(this,a,b).catch(function(){})};
h.unlayoutCallback=function(){var a=this;if(this.o)return!1;this.R++;this.b("adSlotCleared");this.uiHandler.applyUnlayoutUI();this.A&&AMP.BaseElement.prototype.attemptChangeSize.call(this,this.A.height,this.A.width).then(function(){a.A=null}).catch(function(a){z().warn("amp-a4a","unable to revert to original size",a)});this.V=!1;this.o&&(this.o.destroy(),this.o=null);this.iframe&&this.iframe.parentElement&&(this.iframe.parentElement.removeChild(this.iframe),this.iframe=null);this.G=this.m=this.B=
null;this.fromResumeCallback=this.W=!1;this.F=K(this.win,"platform").isIos()?"safeframe":null;this.l&&(this.l.freeXOriginIframe(),this.l=null);return!0};h.viewportCallback=function(a){this.o&&uc(this.o,a);this.l&&this.l.viewportCallback(a)};h.createPlaceholderCallback=function(){return this.uiHandler.createPlaceholder()};h.getAdUrl=function(){throw Error("getAdUrl not implemented!");};h.resetAdUrl=function(){this.m=null};
h.verifyStillCurrent=function(){var a=this,b=this.R;return function(){if(b!=a.R)throw Error("CANCELLED");}};h.extractCreativeAndSignature=function(){throw Error("extractCreativeAndSignature not implemented!");};h.forceCollapse=function(){this.A=this.A||this.getLayoutBox();this.uiHandler.applyNoContentUI();this.V=!0};h.onCreativeRender=function(a){a&&this.b("renderFriendlyEnd")};
h.onCrossDomainIframeCreated=function(a){z().info("amp-a4a",this.element.getAttribute("type"),"onCrossDomainIframeCreated "+a)};h.sendXhrRequest=function(a){var b=this;this.b("adRequestStart");var c={mode:"cors",method:"GET",credentials:"include"};return K(this.win,"xhr").fetch(a,c).catch(function(){b.b("networkError");return null})};h.getSigningServiceNames=function(){return["google"]};
function Oc(a){return a.S.isAvailable()?a.getSigningServiceNames().map(function(b){aa(b,"-dev");var c=Nb[b],d=b;if(c)return U(a.getAmpDoc()).whenFirstVisible().then(function(){return K(a.win,"xhr").fetchJson(c,{mode:"cors",method:"GET",ampCors:!1,credentials:"omit"}).then(function(a){return a.json()}).then(function(b){var c={serviceName:d};fa(b)&&Array.isArray(b.keys)&&b.keys.every(fa)?c.keys=b.keys:(y().error("amp-a4a",a.element.getAttribute("type"),"Invalid response from signing server "+d,a.element),
c.keys=[]);return c})}).then(function(b){return{serviceName:b.serviceName,keys:b.keys.map(function(c){return a.S.importPublicKey(b.serviceName,c).catch(function(c){y().error("amp-a4a",a.element.getAttribute("type"),"error importing keys for: "+b.serviceName,c,a.element);return null})})}}).catch(function(b){y().error("amp-a4a",a.element.getAttribute("type"),b,a.element);return{serviceName:d,keys:[]}});b="Signing service '"+b+"' does not exist.";y().error("amp-a4a",a.element.getAttribute("type"),b,
a.element);return Promise.resolve({serviceName:d,keys:[]})}):[]}
function Wc(a){if("true"==a.element.getAttribute("disable3pfallback"))return y().warn("amp-a4a",a.element.getAttribute("type"),"fallback to 3p disabled"),Promise.resolve(!1);Tc(a,Error("fallback to 3p"),!0);var b=a.F,c=Promise.resolve(!1);if("safeframe"!=b&&"nameframe"!=b||!a.G)if(a.m){var b=a.m,d=a.element,e;e=void 0===e?"source":e;y().assert(null!=b,"%s %s must be available",d,e);y().assert(ya(b)||/^(\/\/)/.test(b),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',d,
e,b);e=a.m;a.b("renderCrossDomainStart");c=Xc(a,{src:K(a.win,"xhr").getCorsUrl(a.win,e),name:JSON.stringify(ic(a.win,a.element,a.sentinel))})}else y().warn("amp-a4a",a.element.getAttribute("type"),"No creative or URL available -- A4A can't render any ad");else c=Yc(a,a.G),a.G=null;mc(a.win,c);return c}
function Vc(a,b){a.b("renderFriendlyStart");a.iframe=P(a.element.ownerDocument,"iframe",{height:a.D.height,width:a.D.width,frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no"});a.applyFillContent(a.iframe);var c=[];b.customStylesheets&&b.customStylesheets.forEach(function(a){(a=a.href)&&c.push(a)});var d=a.verifyStillCurrent();return vc(a.iframe,a.element,{host:a.element,url:a.m,html:b.minifiedCreative,extensionIds:b.customElementExtensions||[],fonts:c},function(b){var c=a.getAmpDoc(),
d=new hc(a.getAmpDoc(),b);Ea(b,new Hc(c,d))}).then(function(b){d();a.o=b;tc(b,a.isInViewport());var c=b.iframe.contentDocument||b.win.document;V(c.body,"visibility","visible");nc(a.getAmpDoc(),b.win);Zc(a,b.win);bc(b.win,"navigationStart","loadEventEnd").then(function(b){d();a.b("friendlyIframeLoaded",{"navStartToLoadEndDelta.AD_SLOT_ID":Math.round(b)})}).catch(function(b){z().error("amp-a4a",a.element.getAttribute("type"),"getTimingDataAsync for renderFriendlyEnd failed: ",b)});Nc(a.onCreativeRender,
a,function(b){z().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(!0);return b.whenIniLoaded()}).then(function(){d();a.b("friendlyIframeIniLoad")})}
function Xc(a,b){var c=Object.assign(b,{height:a.D.height,width:a.D.width});a.sentinel&&(c["data-amp-3p-sentinel"]=a.sentinel);a.iframe=P(a.element.ownerDocument,"iframe",Object.assign(c,Lc));a.l=new AMP.AmpAdXOriginIframeHandler(a);var d=a.l.init(a.iframe,!0);Nc(a.onCreativeRender,a,function(b){z().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(!1);return d}
function Yc(a,b){var c=a.F;a.b("renderSafeFrameStart");var d=a.verifyStillCurrent();return la(b).then(function(b){d();var e,g="";switch(c){case "safeframe":e=Pc(a)+"?n=0";break;case "nameframe":e=Ec(a.win);break;default:return y().error("A4A","A4A received unrecognized cross-domain name attribute iframe rendering mode request: %s.  Unable to render a creative for slot %s.",c,a.element.getAttribute("id")),Promise.reject("Unrecognized rendering mode request")}var k=ic(a.win,a.element,a.sentinel);"nameframe"==
c?(k.creative=b,g=JSON.stringify(k)):"safeframe"==c&&(k=JSON.stringify(k),g=a.Y+";"+b.length+";"+b+(""+k));return Xc(a,{src:e,name:g})})}
function Sc(a,b){var c='<script type="application/json" amp-ad-metadata>',d=b.lastIndexOf('<script type="application/json" amp-ad-metadata>');0>d&&(c="<script type=application/json amp-ad-metadata>",d=b.lastIndexOf("<script type=application/json amp-ad-metadata>"));if(0>d)return z().warn("amp-a4a",a.element.getAttribute("type"),"Could not locate start index for amp meta data in: %s",b),null;var e=b.lastIndexOf("\x3c/script>");if(0>e)return z().warn("amp-a4a",a.element.getAttribute("type"),"Could not locate closing script tag for amp meta data in: %s",
b),null;try{var f=JSON.parse(b.slice(d+c.length,e)),g=f.ampRuntimeUtf16CharOffsets;if(!Array.isArray(g)||2!=g.length||"number"!==typeof g[0]||"number"!==typeof g[1])throw Error("Invalid runtime offsets");var k={};if(f.customElementExtensions){if(k.customElementExtensions=f.customElementExtensions,!Array.isArray(k.customElementExtensions))throw Error("Invalid extensions",k.customElementExtensions);}else k.customElementExtensions=[];if(f.customStylesheets){k.customStylesheets=f.customStylesheets;var l=
"Invalid custom stylesheets";if(!Array.isArray(k.customStylesheets))throw Error(l);k.customStylesheets.forEach(function(a){if(!fa(a)||!a.href||"string"!==typeof a.href||!/^https:\/\//i.test(a.href))throw Error(l);})}k.minifiedCreative=b.slice(0,g[0])+b.slice(g[1],d)+b.slice(e+9);return k}catch(m){return z().warn("amp-a4a",a.element.getAttribute("type"),"Invalid amp metadata: %s",b.slice(d+48,e)),null}}
function Zc(a,b){O(a.win,"alp-for-a4a")&&b.document.documentElement.addEventListener("click",function(b){Ob(b,function(b){U(a.getAmpDoc()).navigateTo(b,"a4a")})})}function Pc(a){return"https://tpc.googlesyndication.com/safeframe/"+(a.Y+"/html/container.html")}h.collapsedCallback=function(){this.b("adSlotCollapsed")};h.emitLifecycleEvent=function(){};function Uc(a,b){if(!(!b||a.args&&a.args.au)){var c=b.indexOf("?");-1!=c&&((a.args||(a.args={})).au=b.substring(c+1,c+251))}};function $c(a){var b=!0;if(b=void 0===b?!1:b){var c=L(a);S(c.win).loadExtension("amp-analytics")}return Ya(a)}function ad(a,b){var c=!0,c=void 0===c?!1:c,d=a.ownerDocument,e=P(d,"amp-analytics",{sandbox:"true",trigger:"immediate"}),f=P(d,"script",{type:"application/json"});f.textContent=JSON.stringify(b);e.appendChild(f);e.CONFIG=b;c?S(a.ownerDocument.defaultView).loadExtension("amp-analytics"):Za(a,"amp-analytics-instrumentation").then(function(){});a.appendChild(e);return e};function bd(){this.M=Object(null)}h=bd.prototype;h.addPingsForVisibility=function(){};h.sendPing=function(){};h.setPingParameter=function(a,b){null!=a&&""!==a&&null!==b&&void 0!==b&&""!==b&&(this.M[a]=String(b))};h.setPingParameters=function(a){for(var b in a)a.hasOwnProperty(b)&&this.setPingParameter(b,a[b])};h.reset=function(){this.M=Object(null)};h.getInitTime=function(){};h.getDeltaTime=function(){};
function Z(a,b,c,d){var e=this;this.M=Object(null);this.J=a;this.na=b;this.ba=c;this.da=d;this.ha=nb(a);this.oa=this.ba+"."+this.da;var f=cc(a,"navigationStart")||Date.now();this.O="number"==typeof f?f:Number(f);this.getDeltaTime=a.performance&&a.performance.now.bind(a.performance)||function(){return Date.now()-e.O};this.ca="https://csi.gstatic.com/csi";this.la=Ca(b);this.$=U(b)}n(Z,bd);Z.prototype.setPingAddress=function(a){this.ca=a};
Z.prototype.sendPing=function(a){var b=Mc[a]||9999,c=Math.round(this.getDeltaTime()),d=xa(this.M);""!=d&&(d=this.la.expandStringSync(d,{AD_SLOT_NAMESPACE:this.ba,AD_SLOT_ID:this.da,AD_SLOT_TIME_TO_EVENT:c,AD_SLOT_EVENT_NAME:a,AD_SLOT_EVENT_ID:b,AD_PAGE_CORRELATOR:this.ha,AD_PAGE_VISIBLE:this.$.isVisible()?1:0,AD_PAGE_FIRST_VISIBLE_TIME:Math.round(this.$.getFirstVisibleTime()-this.O),AD_PAGE_LAST_VISIBLE_TIME:Math.round(this.$.getLastVisibleTime()-this.O)}));if(a=d?this.ca+"?"+d:"")(new Image).src=
a,z().info("PING",a)};Z.prototype.getInitTime=function(){return this.O};
Z.prototype.addPingsForVisibility=function(a){var b=this;$c(a).then(function(c){var d=a.signals(),e=Promise.race([d.whenSignal("ini-load"),d.whenSignal("load-end")]),f=c.getAnalyticsRoot(a).getVisibilityManager();f.listenElement(a,{visiblePercentageMin:50},null,null,function(){b.sendPing("visHalf")});f.listenElement(a,{visiblePercentageMin:50},e,null,function(){b.sendPing("visHalfIniLoad")});f.listenElement(a,{visiblePercentageMin:1},null,null,function(){b.sendPing("firstVisible")});e.then(function(){b.sendPing("iniLoad")});
f.listenElement(a,{waitFor:"ini-load"},e,null,function(){b.sendPing("visIniLoad")});f.listenElement(a,{visiblePercentageMin:1,waitFor:"ini-load",totalTimeMin:1E3},e,null,function(){b.sendPing("visLoadAndOneSec")})})};var cd={a4aProfilingRate:{isTrafficEligible:function(){return!0},branches:["unused","unused"]}};
function dd(a){var b=yb(a.element.getAttribute("data-experiment-id")),c={},d=(c[Cb.experiment]=1,c[Fb.experiment]=1,c[Eb.experiment]=1,c[Gb.experiment]=1,c[Hb.experiment]=1,c[Kb.experiment]=1,c[Jb.experiment]=1,c[Lb.experiment]=1,c),c={},e=(c[Cb.control]=1,c[Fb.control]=1,c[Eb.control]=1,c[Gb.control]=1,c[Hb.control]=1,c[Kb.control]=1,c[Jb.control]=1,c[Lb.control]=1,c);return b.some(function(a){return a in d})||Ab(a.element)}
function ed(a,b){var c="X-AmpAdRender",d="rm.AD_SLOT_ID",e="qqid.AD_SLOT_ID",f=Object(null);f[e]=a.get("X-QQID");f[d]=a.get(c);b.setPingParameters(f)};function fd(a,b,c){function d(a,b){for(var d=/([^\n]*)(\n)?/g,f;(f=d.exec(a))&&(e+=f[1],f[2]&&(c(e,b&&d.lastIndex===a.length),e=""),d.lastIndex!==a.length););}var e="";if(b.body&&a.TextDecoder){var f=new TextDecoder("utf-8"),g=b.body.getReader();g.read().then(function l(a){a.value&&d(f.decode(a.value,{stream:!0}),a.done);a.done||g.read().then(l)})}else b.text().then(function(a){return d(a,!0)})}function gd(a){var b;return function(c,d){b?(a(hd(c),Na(b)||{},d),b=null):b=c}}
function hd(a){return a.replace(/\\(n|r|\\)/g,function(a,c){return"n"==c?"\n":"r"==c?"\r":"\\"})};function id(a,b,c,d){var e,f=e||[],g=a.split(",");g.forEach(function(a){var e=a.split("x");if(2!=e.length)y().error("AMP-AD","Invalid multi-size data format '"+a+"'.");else{var g=Number(e[0]),e=Number(e[1]);if(jd(g,e,function(a){return isNaN(a)},function(a){return isNaN(a)},function(a){var b=a.badDim,c=a.badVal;return"Invalid "+b+" of "+c+" given for secondary size."})&&jd(g,e,function(a){return a>b},function(a){return a>c},function(a){var b=a.badDim;return"Secondary "+b+" "+a.badVal+" "+("can't be larger than the primary "+
b+".")})){if(d){var k=2/3,r=k*b,w=k*c;if(!jd(g,e,function(a){return a<r},function(a){return a<w},function(a){var b=a.badDim;return"Secondary "+b+" "+a.badVal+" is "+("smaller than 2/3rds of the primary "+b+".")}))return}f.push([g,e])}}});return f}function jd(a,b,c,d,e){var f=null;c(a)&&d(b)?f={badDim:"width and height",badVal:a+"x"+b}:c(a)?f={badDim:"width",badVal:a}:d(b)&&(f={badDim:"height",badVal:b});return f?(y().error("AMP-AD",e(f)),!1):!0};var kd={gdfp_req:"1",sfv:"1-0-9",u_sd:window.devicePixelRatio},ld=null,od=[function(a){var b={},c=0,d=[];a.forEach(function(a){var e=a.element.getAttribute("data-slot"),g=(e||"").split("/"),k=[];for(a=0;a<g.length;a++)if(""!=g[a]){var l=b[g[a]];void 0==l&&(b[g[a]]=l=c++);k.push(l)}d.push(k.join("/"))});return{iu_parts:Object.keys(b).join(),enc_prev_ius:d.join()}},function(a){return md(a,function(a){return a.f&&a.f.cookieOptOut?{co:"1"}:null})},function(a){return{adks:a.map(function(a){return a.U}).join()}},
function(a){return{prev_iu_szs:a.map(function(a){return a.i.width+"x"+a.i.height}).join()}},function(a){return md(a,function(a){return a.f&&a.f.tagForChildDirectedTreatment?{tfcd:a.f.tagForChildDirectedTreatment}:null})},function(a){return md(a,function(a){return Ab(a.element)?{adtest:"on"}:null})},function(a){var b=[];a.forEach(function(a){a.f&&b.push(nd(a.f.targeting||null,a.f.categoryExclusions||null))});return b.length?{prev_scp:b.join("|")}:null},function(a){var b={};a.forEach(function(a){var c=
a.element.getAttribute("data-experiment-id");c&&c.split(",").forEach(function(a){return b[a]=1})});return Object.keys(b).length?{eid:Object.keys(b).join()}:null}];function pd(a){Y.call(this,a);this.u=this.u||this.initLifecycleReporter();this.C=null;this.ia=S(this.win);this.f=this.K=this.i=this.X=null;this.U=0;this.fa=!1;var b=qd();this.sraResponseResolver=b.resolver;this.sraResponseRejector=b.rejector;this.ea=b.promise}n(pd,Y);h=pd.prototype;
h.isValidElement=function(){return gb(this.win)&&this.isAmpAdElement()&&!document.querySelector("meta[name=amp-3p-iframe-src]")};function qd(){var a=null,b=null,c=new Promise(function(c,e){a=c;b=e});return{resolver:a,rejector:b,promise:c}}
function rd(a){var b=a.i.width+"x"+a.i.height,c=a.f&&a.f.tagForChildDirectedTreatment,d=a.element.getAttribute("data-multi-size");if(d)var e=a.element.getAttribute("data-multi-size-validation")||"true",d=id(d,Number(a.element.getAttribute("width")),Number(a.element.getAttribute("height")),"true"==e),b=b+("|"+d.map(function(a){return a.join("x")}).join("|"));return Object.assign({iu:a.element.getAttribute("data-slot"),co:a.f&&a.f.cookieOptOut?"1":null,adk:a.U,sz:b,tfcd:void 0==c?null:c,adtest:Ab(a.element)?
"on":null,scp:nd(a.f&&a.f.targeting||null,a.f&&a.f.categoryExclusions||null)},ib(a))}
h.populateAdUrlState=function(){var a=Number(this.element.getAttribute("width")),b=Number(this.element.getAttribute("height")),c=O(this.win,"dc-use-attr-for-format")?!isNaN(a)&&0<a&&!isNaN(b)&&0<b:a&&b;this.i=c?{width:a,height:b}:this.getIntersectionElementLayoutBox();this.f=Na(this.element.getAttribute("json"))||{};var a=this.i.width+"x"+this.i.height,d=this.element,b=db(d),e=d.getAttribute("data-slot")||"",d=d.getAttribute("data-multi-size")||"";this.U=cb(e+":"+a+":"+d+":"+b)};
h.getAdUrl=function(){var a=this;if(this.iframe)return z().warn("amp-ad-network-doubleclick-impl","Frame already exists, sra: "+this.fa),"";this.populateAdUrlState();var b=Date.now();return sd(this.win,this.getAmpDoc(),b).then(function(c){return pb(a,b,Object.assign(rd(a),c))})};
h.extractCreativeAndSignature=function(a,b){var c=this;ed(b,this.u);this.C=tb(b);this.X=b.get("X-QQID");this.C&&this.ia.loadExtension("amp-analytics");var d=rb(a,b);return d.then(function(a){a.size?c.i=a.size:a.size=c.i;td(c,a.size.width,a.size.height);return Promise.resolve(a)})};h.emitLifecycleEvent=function(a,b){b&&this.u.setPingParameters(b);this.u.sendPing(a)};
h.unlayoutCallback=function(){Y.prototype.unlayoutCallback.call(this);this.element.setAttribute("data-amp-slot-index",this.win.ampAdSlotIdCounter++);this.u=this.initLifecycleReporter();if(this.K){var a=this.K;a.parentElement&&a.parentElement.removeChild(a);this.K=null}ld=this.f=this.C=null;a=qd();this.sraResponseResolver=a.resolver;this.sraResponseRejector=a.rejector;this.ea=a.promise;this.X=null};
h.initLifecycleReporter=function(){var a=this.element.getAttribute("data-amp-slot-index");Qa(this.win,cd);a=hb(this)&&dd(this)?new Z(this.win,this.element,"a4a",Number(a)):new bd;a.setPingParameters({s:"AD_SLOT_NAMESPACE",dt:"NAV_TIMING(navigationStart)",v:"2",c:"AD_PAGE_CORRELATOR",rls:"AMP_VERSION",v_h:"VIEWPORT_HEIGHT",s_t:"SCROLL_TOP",slotId:"AD_SLOT_ID",stageName:"AD_SLOT_EVENT_NAME",stageIdx:"AD_SLOT_EVENT_ID","met.AD_SLOT_NAMESPACE.AD_SLOT_ID":"AD_SLOT_EVENT_NAME.AD_SLOT_TIME_TO_EVENT","e.AD_SLOT_ID":this.element.getAttribute("data-experiment-id"),
"adt.AD_SLOT_ID":this.element.getAttribute("type"),"met.AD_SLOT_NAMESPACE":"firstVisibleTime.AD_PAGE_FIRST_VISIBLE_TIME,lastVisibleTime.AD_PAGE_LAST_VISIBLE_TIME"});return a};
h.onCreativeRender=function(a){Y.prototype.onCreativeRender.call(this,a);if(this.C){if(hb(this)){var b=this.element,c=this.C,d=this.X,e=this.u.getDeltaTime(),f=this.u.getInitTime(),g=nb(this.win),k=Number(b.getAttribute("data-amp-slot-index")),l=encodeURIComponent(b.getAttribute("data-experiment-id")),b=b.getAttribute("type"),d="https://csi.gstatic.com/csi?s=a4a"+("&c="+g+"&slotId="+k+"&qqid."+k+"="+d)+("&dt="+f)+("null"!=l?"&e."+k+"="+l:"")+("&rls=123456789&adt."+k+"="+b),e=Math.round(e);
a=a?"Friendly":"CrossDomain";c.requests.iniLoadCsi=d+("&met.a4a."+k+"=iniLoadCsi"+a+"."+e);c.requests.renderStartCsi=d+("&met.a4a."+k+"=renderStartCsi"+a+"."+e);c.triggers.continuousVisibleIniLoad.request="iniLoadCsi";c.triggers.continuousVisibleRenderStart.request="renderStartCsi";c.requests.visibilityCsi=d+("&met.a4a."+k+"=visibilityCsi."+e);c.triggers.continuousVisible.request.push("visibilityCsi")}this.K=ad(this.element,this.C)}this.u.addPingsForVisibility(this.element);W(this.iframe,{width:this.i.width+
"px",height:this.i.height+"px"})};function td(a,b,c){var d=a.element.getAttribute("width"),e=a.element.getAttribute("height");(b!=d||c!=e)&&b<=d&&c<=e&&a.attemptChangeSize(c,b).catch(function(){})}h.sendXhrRequest=function(a){var b=this;if(!this.fa)return Y.prototype.sendXhrRequest.call(this,a);this.initiateSraRequests();return this.ea.then(function(c){return c||Y.prototype.sendXhrRequest.call(b,a)})};h.groupSlotsForSra=function(){return kb(this.win,this.element.getAttribute("type"))};
h.initiateSraRequests=function(){var a=this;if(!ld){var b=this.verifyStillCurrent();ld=this.groupSlotsForSra().then(function(c){b();Object.keys(c).forEach(function(d){var e=c[d];Promise.all(e).then(function(c){b();var e=c.filter(function(a){var b=a.hasAdPromise();b||z().info("amp-ad-network-doubleclick-impl","Ignoring instance without ad promise as likely invalid",a.element);return b});if(e.length)if(1==e.length)z().info("amp-ad-network-doubleclick-impl","single block in network "+d),e[0].sraResponseResolver(null);
else{var f=e.map(function(a){return a.sraResponseResolver}),l=gd(function(a,c,d){b();c["X-AmpAdRender"]="safeframe";f.shift()({headers:{get:function(a){return c[a]},has:function(a){return!!c[a]}},arrayBuffer:function(){return ma(a)}});d&&f.length&&z().warn("amp-ad-network-doubleclick-impl","Premature end of SRA response",f.length,m)}),m;return ud(a.win,a.getAmpDoc(),e).then(function(c){b();m=c;return K(a.win,"xhr").fetch(m,{mode:"cors",method:"GET",credentials:"include"})}).then(function(c){b();return fd(a.win,
c,l)}).catch(function(a){Uc(a,m);var b=Yb(a);b||y().error("amp-ad-network-doubleclick-impl","SRA request failure",a);e.forEach(function(c){c.resetAdUrl();b||c.attemptCollapse();c.sraResponseRejector(a)})})}})})})}};h.getPreconnectUrls=function(){return["https://partner.googleadservices.com","https://tpc.googlesyndication.com"]};AMP.registerElement("amp-ad-network-doubleclick-impl",pd);function lb(a){return(a=/^(?:\/)?(\d+)/.exec(a.getAttribute("data-slot")))?a[1]:""}
function ud(a,b,c){var d=Date.now();return sd(a,b,d,!0).then(function(a){var b=vd(c);return qb(Object.assign(b,a),d)})}function vd(a){var b={};od.forEach(function(c){return Object.assign(b,c(a))});return b}function sd(a,b,c,d){return mb(a,b,c,"ldjh").then(function(a){var b=Object.assign({},kd);b.impl=d?"fifs":"ifr";return Object.assign(b,a)})}function nd(a,b){var c=a?Object.keys(a).map(function(b){return wd(b,a[b])}):[];b&&c.push(wd("excl_cat",b));return c.length?c.join("&"):null}
function wd(a,b){var c=(Array.isArray(b)?b:[b]).map(encodeURIComponent).join();return encodeURIComponent(a)+"="+c}function md(a,b){for(var c=0;c<a.length;c++){var d=b(a[c]);if(d)return d}return null};
})});
//# sourceMappingURL=amp-ad-network-doubleclick-impl-0.1.js.map

