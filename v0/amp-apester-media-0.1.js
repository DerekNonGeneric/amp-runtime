(self.AMP=self.AMP||[]).push({n:"amp-apester-media",v:"123456789",f:(function(AMP){var f;function h(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var l=self.log;function m(a,b){a=a.__AMP_TOP||a;var c=a.services;c||(c=a.services={});b=c[b];b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));return b.obj};function n(a){a=parseFloat(a);return"number"===typeof a&&isFinite(a)?a:void 0};function p(a){AMP.BaseElement.apply(this,arguments)}h(p,AMP.BaseElement);f=p.prototype;f.preconnectCallback=function(a){this.preconnect.url(this.f,a);this.preconnect.url(this.i,a)};f.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};f.viewportCallback=function(a){a&&!this.j&&this.a&&(this.j=!0,this.a.contentWindow.postMessage("interaction seen","*"));this.getPlaceholder()&&!this.h&&this.togglePlaceholder(a)};
f.buildCallback=function(){var a=this.element.getAttribute("width"),b=this.element.getAttribute("height");this.m=n(a);this.b=n(b);this.i="https://renderer.qmerce.com";this.f="https://display.apester.com";this.o="https://images.apester.com/images%2Floader.gif";this.c=!1;if(l.user)a=l.user;else throw Error("failed to call initLogConstructor");this.l=a.assert(this.element.getAttribute("data-apester-media-id")||(this.c=this.element.getAttribute("data-apester-channel-token")),"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",
this.element);this.g=this.a=null;this.h=this.j=!1};f.firstLayoutCompleted=function(){this.viewportCallback(this.isInViewport())};function q(a){var b=encodeURIComponent(a.l);return""+a.f+(a.c?"/tokens/"+b+"/interactions/random":"/interactions/"+b+"/display")}function r(a){var b=q(a);return m(a.win,"xhr").fetchJson(b,{requireAmpResponseSourceOrigin:!1}).then(function(a){return a.json()})}
function t(a,b){var c=a.element.ownerDocument.createElement("iframe");c.setAttribute("frameborder","0");c.setAttribute("allowtransparency","true");c.setAttribute("scrolling","no");c.src=b;c.height=a.b;c.width=a.m;c.classList.add("amp-apester-iframe");a.applyFillContent(c);return c}
function u(a){var b=a.element.ownerDocument.createElement("div"),c=a.element.ownerDocument.createElement("div"),d=a.element.ownerDocument.createElement("div"),e=a.element.ownerDocument.createElement("div");b.classList.add("amp-apester-loader-blobs");c.classList.add("amp-apester-loader-blob");d.classList.add("amp-apester-loader-blob");e.classList.add("amp-apester-loader-logo");b.appendChild(c);b.appendChild(d);b.appendChild(e);return b}
function v(a){var b=a.element.ownerDocument.createElement("svg"),c=a.element.ownerDocument.createElement("defs"),d=a.element.ownerDocument.createElement("filter"),e=a.element.ownerDocument.createElement("feGaussianBlur"),g=a.element.ownerDocument.createElement("feColorMatrix"),k=a.element.ownerDocument.createElement("feBlend");b.setAttribute("version","1.1");b.setAttribute("xmlns","http://www.w3.org/2000/svg");d.setAttribute("id","amp-apester-goo");e.setAttribute("in","SourceGraphic");e.setAttribute("results",
"blur");e.setAttribute("stdDeviation","10");g.setAttribute("in","blur");g.setAttribute("mode","matrix");g.setAttribute("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7");g.setAttribute("result","amp-apester-goo");k.setAttribute("in2","amp-apester-goo");k.setAttribute("in","SourceGraphic");k.setAttribute("result","mix");b.appendChild(c);c.appendChild(d);d.appendChild(e);d.appendChild(g);d.appendChild(k);return b}
function w(a){var b=a.element.ownerDocument.createElement("div");b.setAttribute("overflow","");b.className="amp-apester-overflow";var c=a.element.ownerDocument.createElement("button");c.textContent="Full Size";b.appendChild(c);return b}
f.layoutCallback=function(){var a=this;this.element.classList.add("amp-apester-container");return r(this).then(function(b){function c(a){a.element.classList.add("i-amphtml-apester-iframe-ready")}var d=b.payload;b=a.i+"/interaction/"+encodeURIComponent(d.interactionId);b=t(a,b);var e=w(a),g={element:b,mutator:c};a.a=b;a.element.appendChild(e);a.element.appendChild(b);return a.g=a.loadPromise(b).then(function(){m(a.win,"vsync").runPromise({mutate:c},g);return d})},function(a){var b;if(l.dev)b=l.dev;
else throw Error("failed to call initLogConstructor");b.error("amp-apester-media","Display",a)}).then(function(b){a.togglePlaceholder(!1);a.h=!0;b=b.data.size.height;b!=a.b&&(a.b=b,a.c?a.attemptChangeHeight(b):a.changeHeight(b))})};f.createPlaceholderCallback=function(){var a=this.element.ownerDocument.createElement("div");a.setAttribute("placeholder","");a.setAttribute("layout","fill");a.className="amp-apester-loader";a.appendChild(u(this));a.appendChild(v(this));return a};f.unlayoutOnPause=function(){return!0};
f.unlayoutCallback=function(){if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.g=this.a=null}return!0};AMP.registerElement("amp-apester-media",p,".amp-apester-iframe{-webkit-transition:opacity 0.4s;transition:opacity 0.4s;opacity:0}.i-amphtml-apester-iframe-ready{opacity:1!important}.amp-apester-loader{height:100%;width:100%;background-color:#fff}.amp-apester-container{max-width:700px;margin:0 auto;display:block;position:relative;width:100%}.amp-apester-overflow{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.amp-apester-overflow button{border:none;background:#fff;cursor:pointer;padding:25px 80px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative}.amp-apester-loader-blobs{-webkit-filter:url(#amp-apester-goo);filter:url(#amp-apester-goo);position:absolute;top:0;left:0;bottom:0;right:0}.amp-apester-loader-blob{position:absolute;margin:auto;top:0;bottom:0;right:0;left:0;width:50px;height:50px;border-radius:50%;background-color:#ee2e3d}.amp-apester-loader-blob:first-child{-webkit-animation:amp-apester-blob-left-anim cubic-bezier(0.770,0.000,0.175,1.000) 2s infinite;animation:amp-apester-blob-left-anim cubic-bezier(0.770,0.000,0.175,1.000) 2s infinite}.amp-apester-loader-blob:nth-child(2){-webkit-animation:amp-apester-blob-right-anim cubic-bezier(0.770,0.000,0.175,1.000) 2s infinite;animation:amp-apester-blob-right-anim cubic-bezier(0.770,0.000,0.175,1.000) 2s infinite}@-webkit-keyframes amp-apester-blob-left-anim{0%{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}33%{-webkit-transform:scale(0.55,0.5) translate(80px);transform:scale(0.55,0.5) translate(80px)}66%{-webkit-transform:scale(0.8) translate(0);transform:scale(0.8) translate(0)}to{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}}@keyframes amp-apester-blob-left-anim{0%{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}33%{-webkit-transform:scale(0.55,0.5) translate(80px);transform:scale(0.55,0.5) translate(80px)}66%{-webkit-transform:scale(0.8) translate(0);transform:scale(0.8) translate(0)}to{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}}@-webkit-keyframes amp-apester-blob-right-anim{0%{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}33%{-webkit-transform:scale(0.55,0.5) translate(-80px);transform:scale(0.55,0.5) translate(-80px)}66%{-webkit-transform:scale(0.8) translate(0);transform:scale(0.8) translate(0)}to{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}}@keyframes amp-apester-blob-right-anim{0%{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}33%{-webkit-transform:scale(0.55,0.5) translate(-80px);transform:scale(0.55,0.5) translate(-80px)}66%{-webkit-transform:scale(0.8) translate(0);transform:scale(0.8) translate(0)}to{-webkit-transform:scale(1.0) translate(0);transform:scale(1.0) translate(0)}}@-webkit-keyframes amp-apester-loader-logo{0%{-webkit-transform:scale(1.0);transform:scale(1.0);opacity:1}20%{-webkit-transform:scale(1.0);transform:scale(1.0);opacity:0}40%{-webkit-transform:scale(0.5);transform:scale(0.5);opacity:0}66%{-webkit-transform:scale(0.8);transform:scale(0.8);opacity:1}to{-webkit-transform:scale(1.0);transform:scale(1.0);opacity:1}}@keyframes amp-apester-loader-logo{0%{-webkit-transform:scale(1.0);transform:scale(1.0);opacity:1}20%{-webkit-transform:scale(1.0);transform:scale(1.0);opacity:0}40%{-webkit-transform:scale(0.5);transform:scale(0.5);opacity:0}66%{-webkit-transform:scale(0.8);transform:scale(0.8);opacity:1}to{-webkit-transform:scale(1.0);transform:scale(1.0);opacity:1}}.amp-apester-loader-logo{background:url(https://app.apester.com/assets/editor/3.4.10/dist/svg/ape-loader.svg) no-repeat center;position:absolute;height:28px;width:28px;left:calc(50% - 14px);top:calc(50% - 14px)}.amp-apester-loader-logo svg{height:100%;width:100%}\n/*# sourceURL=/extensions/amp-apester-media/0.1/amp-apester-media.css*/");
})});
//# sourceMappingURL=amp-apester-media-0.1.js.map

