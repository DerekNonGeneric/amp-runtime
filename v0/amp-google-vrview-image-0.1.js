(self.AMP=self.AMP||[]).push({n:"amp-google-vrview-image",v:"123456789",f:(function(AMP){function f(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};var h=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;Date.now();self.log=self.log||{user:null,dev:null};var k=self.log;function l(){if(k.user)return k.user;throw Error("failed to call initLogConstructor");}function m(){if(k.dev)return k.dev;throw Error("failed to call initLogConstructor");};var n,p;function q(a,b,c){b=encodeURIComponent(b)+"="+encodeURIComponent(c);b&&(a=a.split("#",2),c=a[0].split("?",2),b=c[0]+(c[1]?"?"+c[1]+"&"+b:"?"+b),a=b+=a[1]?"#"+a[1]:"");return a}
function r(a){if("string"==typeof a){n||(n=self.document.createElement("a"),p=self.UrlCache||(self.UrlCache=Object.create(null)));var b=p[a];if(b)a=b;else{b=n;b.href=a;b.protocol||(b.href=b.href);var c={href:b.href,protocol:b.protocol,host:b.host,hostname:b.hostname,port:"0"==b.port?"":b.port,pathname:b.pathname,search:b.search,hash:b.hash,origin:null};"/"!==c.pathname[0]&&(c.pathname="/"+c.pathname);if("http:"==c.protocol&&80==c.port||"https:"==c.protocol&&443==c.port)c.port="",c.host=c.hostname;
c.origin=b.origin&&"null"!=b.origin?b.origin:"data:"!=c.protocol&&c.host?c.protocol+"//"+c.host:c.href;a=p[a]=c}}(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b};var t=null;Promise.resolve();
function u(a){var b;if(!t){t=Object.create(null);if(a.AMP_CONFIG)for(b in a.AMP_CONFIG){var c=a.AMP_CONFIG[b];"number"===typeof c&&0<=c&&1>=c&&(t[b]=Math.random()<c)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(b=a.AMP_CONFIG["allow-doc-opt-in"],c=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(var c=c.getAttribute("content").split(","),d=0;d<c.length;d++)-1!=b.indexOf(c[d])&&(t[c[d]]=!0);Object.assign(t,v(a));
if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){b=a.AMP_CONFIG["allow-url-opt-in"];c=a.location.originalHash||a.location.hash;a=Object.create(null);if(c)for(var e;e=h.exec(c);)d=decodeURIComponent(e[1]).trim(),e=e[2]?decodeURIComponent(e[2]).trim():"",a[d]=e;for(c=0;c<b.length;c++)d=a["e-"+b[c]],"1"==d&&(t[b[c]]=!0),"0"==d&&(t[b[c]]=!1)}}b=t;var g=b;return!!g["amp-google-vrview-image"]}
function v(a){a:{var b;b:{try{b=a.document.cookie;break b}catch(x){}b=void 0}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==decodeURIComponent(c.substring(0,d).trim())){a=decodeURIComponent(c.substring(d+1).trim());break a}}a=null}var e=a,g=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<g.length;b++)0!=g[b].length&&("-"==g[b][0]?a[g[b].substr(1)]=!1:a[g[b]]=!0);return a};function w(a){AMP.BaseElement.apply(this,arguments)}f(w,AMP.BaseElement);w.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};
w.prototype.buildCallback=function(){if(this.a=u(this.win)){var a=this.element.getAttribute("src"),b=this.element,c;c=void 0===c?"source":c;l().assert(null!=a,"%s %s must be available",b,c);l().assert(r(a)||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a);this.c=a;a=q("https://storage.googleapis.com/vrview/index.html","image",this.c);this.element.hasAttribute("stereo")&&(a=q(a,"is_stereo","true"));
var d=this.element.getAttribute("yaw");d&&(a=q(a,"start_yaw",d));this.element.hasAttribute("yaw-only")&&(a=q(a,"is_yaw_only","true"));this.b=a}else m().warn("amp-google-vrview-image","TAG amp-google-vrview-image disabled")};w.prototype.preconnectCallback=function(){this.b&&(this.preconnect.preload(this.b),this.preconnect.preload(this.c))};w.prototype.createPlaceholderCallback=function(){return null};
w.prototype.layoutCallback=function(){this.a=u(this.win);if(!this.a)return m().warn("amp-google-vrview-image","TAG amp-google-vrview-image disabled"),Promise.resolve();var a=this.element.ownerDocument.createElement("iframe");a.onload=function(){a.readyState="complete"};this.applyFillContent(a);a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.setAttribute("src",this.b);this.element.appendChild(a);this.f=a;return this.loadPromise(a)};
AMP.registerElement("amp-google-vrview-image",w);
})});
//# sourceMappingURL=amp-google-vrview-image-0.1.js.map

