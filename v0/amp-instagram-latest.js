(self.AMP=self.AMP||[]).push({n:"amp-instagram",v:"123456789",f:(function(AMP){var f;function m(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var h in b)if(Object.defineProperties){var k=Object.getOwnPropertyDescriptor(b,h);k&&Object.defineProperty(a,h,k)}else a[h]=b[h]}function n(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var q=Object.prototype.toString;Date.now();self.log=self.log||{user:null,dev:null};var r=self.log;function t(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};var u,v="Webkit webkit Moz moz ms O o".split(" ");function x(a,b){for(var c in b){var h=a,k=b[c],e;e=h.style;var g=c;if(n(g,"--"))e=g;else{u||(u=Object.create(null));var l=u[g];if(!l){l=g;if(void 0===e[g]){var d;d=g;d=d.charAt(0).toUpperCase()+d.slice(1);b:{for(var p=0;p<v.length;p++){var w=v[p]+d;if(void 0!==e[w]){d=w;break b}}d=""}void 0!==e[d]&&(l=d)}u[g]=l}e=l}e&&(h.style[e]=k)}};function y(a,b){function c(a){try{return e(a)}catch(d){throw self.reportError(d),d;}}var h=void 0,k=a,e=b,g=h||!1;k.addEventListener("message",c,g);return function(){k&&k.removeEventListener("message",c,g);c=k=e=null}};function z(a,b){return y(a,b)};function A(a){AMP.BaseElement.call(this,a);this.g=this.a=null;this.b="";this.c=null;this.f=""}m(A,AMP.BaseElement);f=A.prototype;f.preconnectCallback=function(a){this.preconnect.url("https://www.instagram.com",a);this.preconnect.url("https://instagram.fsnc1-1.fna.fbcdn.net",a)};f.renderOutsideViewport=function(){return!1};
f.buildCallback=function(){var a;if(r.user)a=r.user;else throw Error("failed to call initLogConstructor");this.b=a.assert(this.element.getAttribute("data-shortcode")||this.element.getAttribute("shortcode"),"The data-shortcode attribute is required for <amp-instagram> %s",this.element);this.f=this.element.hasAttribute("data-captioned")?"captioned/":""};
f.createPlaceholderCallback=function(){var a=this.win.document.createElement("div");a.setAttribute("placeholder","");var b=this.win.document.createElement("amp-img");b.setAttribute("noprerender","");b.setAttribute("src","https://www.instagram.com/p/"+encodeURIComponent(this.b)+"/media/?size=l");b.setAttribute("layout","fill");b.setAttribute("referrerpolicy","origin");this.propagateAttributes(["alt"],b);this.element.hasAttribute("data-default-framing")&&this.element.classList.add("amp-instagram-default-framing");
x(b,{top:"64px",bottom:"0px",left:"0px",right:"0px"});a.appendChild(b);return a};f.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};
f.layoutCallback=function(){var a=this,b=this.element.ownerDocument.createElement("iframe");this.a=b;this.c=z(this.win,this.h.bind(this));b.setAttribute("scrolling","no");b.setAttribute("frameborder","0");b.setAttribute("allowtransparency","true");b.setAttribute("title","Instagram: "+this.element.getAttribute("alt"));b.src="https://www.instagram.com/p/"+encodeURIComponent(this.b)+"/embed/"+this.f+"?cr=1&v=7";this.applyFillContent(b);this.element.appendChild(b);x(b,{opacity:0});return this.g=this.loadPromise(b).then(function(){a.getVsync().mutate(function(){x(b,
{opacity:1})})})};f.h=function(a){var b=this;if("https://www.instagram.com"==a.origin&&a.source==this.a.contentWindow&&a.data&&("[object Object]"===q.call(a.data)||n(a.data,"{"))&&(a="[object Object]"===q.call(a.data)?a.data:t(a.data),void 0!==a&&"MEASURE"==a.type&&a.details)){var c=a.details.height;this.getVsync().measure(function(){b.a&&b.a.offsetHeight!==c&&b.attemptChangeHeight(c-64).catch(function(){})})}};f.unlayoutOnPause=function(){return!0};
f.unlayoutCallback=function(){if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.g=this.a=null}this.c&&this.c();return!0};AMP.registerElement("amp-instagram",A,"amp-instagram.amp-instagram-default-framing{border:1px solid #dbdbdb!important}\n/*# sourceURL=/extensions/amp-instagram/0.1/amp-instagram.css*/");
})});
//# sourceMappingURL=amp-instagram-0.1.js.map

