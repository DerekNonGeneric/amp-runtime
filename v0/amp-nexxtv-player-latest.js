(self.AMP=self.AMP||[]).push({n:"amp-nexxtv-player",v:"123456789",f:(function(AMP){var h;(function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a})(this);function m(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};var p=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function q(a){var b=Object.create(null);if(!a)return b;for(var c;c=p.exec(a);){var d=decodeURIComponent(c[1]).trim(),e=c[2]?decodeURIComponent(c[2]).trim():"";b[d]=e}return b};var r="";
function t(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;if(c.context&&c.context.mode)c=c.context.mode;else{var d=q(c.location.originalHash||c.location.hash),e=q(c.location.search);r||(r=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"01123456789");c={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,minified:!0,lite:void 0!=e.amp_lite,test:!1,log:d.log,version:"123456789",rtvVersion:r}}c=b.AMP_MODE=c}return c}
;var u=Object.prototype.toString;Date.now();self.log=self.log||{user:null,dev:null};var v=self.log;function w(){if(v.user)return v.user;throw Error("failed to call initLogConstructor");};function x(a){var b=Object.create(null);a&&Object.assign(b,a);return b};var y,z;function A(a,b){a=a.__AMP_TOP||a;return B(a,b)}function C(a){var b=D,c=E(a),d=F(c);a=d;var e=G(a),g=e["video-manager"];g||(g=e["video-manager"]={obj:null,promise:null,resolve:null,context:null,ctor:null});g.ctor||g.obj||(g.ctor=b,g.context=c,g.resolve&&B(a,"video-manager"))}function H(a,b){a=E(a);a=F(a);return B(a,b)}function E(a){return a.nodeType?A((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function F(a){a=E(a);return a.isSingleDoc()?a.win:a}
function B(a,b){var c=G(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function G(a){var b=a.services;b||(b=a.services={});return b};function I(a){a.parentElement&&a.parentElement.removeChild(a)};var J,L="Webkit webkit Moz moz ms O o".split(" ");function M(a){var b={position:"fixed",top:"0",width:"0",height:"0",opacity:"0"},c;for(c in b){var d=a,e=b[c],g;g=d.style;var f=c;if(2>f.length?0:0==f.lastIndexOf("--",0))g=f;else{J||(J=x());var k=J[f];if(!k){k=f;if(void 0===g[f]){var l;l=f;l=l.charAt(0).toUpperCase()+l.slice(1);b:{for(var n=0;n<L.length;n++){var K=L[n]+l;if(void 0!==g[K]){l=K;break b}}l=""}void 0!==g[l]&&(k=l)}J[f]=k}g=k}g&&(d.style[g]=e)}};function N(a,b,c){function d(a){try{return f(a)}catch(n){throw self.reportError(n),n;}}var e=void 0,g=a,f=c,k=e||!1;g.addEventListener(b,d,k);return function(){g&&g.removeEventListener(b,d,k);d=g=f=null}};function O(a,b,c){return N(a,b,c)}function P(a,b){var c=b,d=N(a,"load",function(a){try{c(a)}finally{c=null,d()}});return d}function Q(a){var b,c,d=new Promise(function(b){c=P(a,b)});d.then(c,c);b&&b(c);return d};function D(a){this.c=a;this.b=null;this.B=!1}D.prototype.register=function(a){var b=a;b.registerAction("play",b.play.bind(b,!1),3);b.registerAction("pause",b.pause.bind(b),1);b.registerAction("mute",b.mute.bind(b),1);b.registerAction("unmute",b.unmute.bind(b),3);if(a.supportsPlatform()){this.b=this.b||[];var c=new R(this.c,a);S(this,c);this.b.push(c)}};
function S(a,b){if(b.video.element.hasAttribute("autoplay")&&(O(b.video.element,"amp:video:visibility",function(){b.updateVisibility()}),O(b.video.element,"reloaded",function(){b.updateVisibility();b.l=!0;b.f&&b.g&&T(b)}),!a.B)){var c=function(){for(var b=0;b<a.b.length;b++)a.b[b].updateVisibility()},d=H(a.c,"viewport");d.onScroll(c);d.onChanged(c);a.B=!0}}function U(a,b){for(var c=0;c<a.b.length;c++)if(a.b[c].video===b)return a.b[c];return null}
D.prototype.getPlayingState=function(a){return U(this,a).getPlayingState()};D.prototype.userInteractedWithAutoPlay=function(a){return U(this,a).userInteractedWithAutoPlay()};
function R(a,b){var c=this;this.c=a;this.video=b;this.F=null;this.f=this.h=this.l=!1;this.u=A(a.win,"vsync");this.w=V.bind(null,a.win,t(a.win).lite);a=b.element;this.g=a.hasAttribute("autoplay");this.A=this.i=!1;Q(a).then(function(){c.updateVisibility();c.l=!0;c.f&&c.g&&T(c)});O(this.video.element,"pause",this.C.bind(this));O(this.video.element,"play",this.D.bind(this));this.updateVisibility();this.g&&aa(this)}h=R.prototype;h.D=function(){this.h=!0};h.C=function(){this.h=!1};
function aa(a){a.video.isInteractive()&&a.video.hideControls();a.w().then(function(b){!b&&a.video.isInteractive()?a.video.showControls():(a.video.mute(),a.video.isInteractive()&&ba(a))})}
function ba(a){function b(b){a.u.mutate(function(){d.classList.toggle("amp-video-eq-play",b)})}function c(){this.i=!0;this.video.showControls();this.video.unmute();g();f();k();d.remove();e.remove()}a.video.hideControls();var d=ca(a),e=da(a);a.u.mutate(function(){a.video.element.appendChild(d);a.video.element.appendChild(e)});var g=O(e,"click",c.bind(a)),f=O(a.video.element,"pause",b.bind(a,!1)),k=O(a.video.element,"play",b.bind(a,!0))}
function T(a){!a.i&&H(a.c,"viewer").isVisible()&&a.w().then(function(b){b&&(a.f?(a.video.play(!0),a.A=!0):a.video.pause())})}
function ca(a){var b=a.c.win.document,c=b.createElement("i-amphtml-video-eq");c.classList.add("amp-video-eq");for(var d=1;4>=d;d++){var e=b.createElement("div");e.classList.add("amp-video-eq-col");for(var g=1;2>=g;g++){var f=b.createElement("div");f.classList.add("amp-video-eq-"+d+"-"+g);e.appendChild(f)}c.appendChild(e)}var k=A(a.c.win,"platform");k.isIos()&&c.setAttribute("unpausable","");return c}
function da(a){a=a.c.win.document.createElement("i-amphtml-video-mask");a.classList.add("i-amphtml-fill-content");return a}h.updateVisibility=function(){function a(){c.f!=d&&c.l&&c.g&&T(c)}function b(){if(c.video.isInViewport()){var a=c.video.element.getIntersectionChangeEntry(),b=a.intersectionRatio,d="number"===typeof b&&isFinite(b)?100*a.intersectionRatio:0;c.f=75<=d}else c.f=!1}var c=this,d=this.f;this.u.run({measure:b,mutate:a})};
h.getPlayingState=function(){return this.h?this.h&&this.A&&!this.i?"playing_auto":"playing_manual":"paused"};h.userInteractedWithAutoPlay=function(){return this.i};var W=null;
function V(a,b){if(W)return W;if(b)return W=Promise.resolve(!1);var c=a.document.createElement("video");c.setAttribute("muted","");c.setAttribute("playsinline","");c.setAttribute("webkit-playsinline","");c.muted=!0;c.playsinline=!0;c.webkitPlaysinline=!0;c.setAttribute("height","0");c.setAttribute("width","0");M(c);try{var d=c.play();d&&d.catch&&d.catch(function(){})}catch(e){}return W=Promise.resolve(!c.paused)};function X(a){AMP.BaseElement.call(this,a);this.o=this.m=this.s=this.j=this.a=null}m(X,AMP.BaseElement);h=X.prototype;h.preconnectCallback=function(a){this.preconnect.url(Y(this),a)};h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};h.buildCallback=function(){var a=this;this.m=new Promise(function(b){a.o=b});C(this.element);H(this.element,"video-manager").register(this)};
function Y(a){if(a.j)return a.j;var b=w().assert(a.element.getAttribute("data-mediaid"),"The data-mediaid attribute is required for <amp-nexxtv-player> %s",a.element),c=w().assert(a.element.getAttribute("data-client"),"The data-client attribute is required for <amp-nexxtv-player> %s",a.element),d=a.element.getAttribute("data-seek-to")||"0",e=a.element.getAttribute("data-mode")||"static",g=a.element.getAttribute("data-streamtype")||"video",f=a.element.getAttribute("data-origin")||"https://embed.nexx.cloud/";
"video"!==g&&(f+=encodeURIComponent(g)+"/");f+=encodeURIComponent(c)+"/";f+=encodeURIComponent(b);f+="?start="+encodeURIComponent(d);d=f+="&datamode="+encodeURIComponent(e)+"&amp=1";w().assert(/^https?\:/i.test(d),'URL must start with "http://" or "https://". Invalid value: %s',d);y||(y=self.document.createElement("a"),z=self.UrlCache||(self.UrlCache=Object.create(null)));if(e=z[d])d=e;else{e=y;e.href=d;e.protocol||(e.href=e.href);f={href:e.href,protocol:e.protocol,host:e.host,hostname:e.hostname,
port:"0"==e.port?"":e.port,pathname:e.pathname,search:e.search,hash:e.hash,origin:null};"/"!==f.pathname[0]&&(f.pathname="/"+f.pathname);if("http:"==f.protocol&&80==f.port||"https:"==f.protocol&&443==f.port)f.port="",f.host=f.hostname;f.origin=e.origin&&"null"!=e.origin?e.origin:"data:"!=f.protocol&&f.host?f.protocol+"//"+f.host:f.href;d=z[d]=f}a.j=d.href;return a.j}h.viewportCallback=function(a){this.element.dispatchCustomEvent("amp:video:visibility",{visible:a})};
h.layoutCallback=function(){var a=this,b=this.element.ownerDocument.createElement("iframe");this.applyFillContent(b);b.setAttribute("frameborder","0");b.setAttribute("allowfullscreen","true");b.src=Y(this);this.a=b;this.s=O(this.win,"message",function(b){if(b.data&&b.source===a.a.contentWindow){var c;if("[object Object]"===u.call(b.data))c=b.data;else a:{try{c=JSON.parse(b.data);break a}catch(g){}c=void 0}b=c;void 0!==b&&("play"==b.event?a.element.dispatchCustomEvent("play"):"pause"==b.event?a.element.dispatchCustomEvent("pause"):
"mute"==b.event?a.element.dispatchCustomEvent("muted"):"unmute"==b.event&&a.element.dispatchCustomEvent("unmuted"))}});this.element.appendChild(this.a);var c=this.loadPromise(this.a).then(function(){a.element.dispatchCustomEvent("load")});this.o(c);return c};h.pauseCallback=function(){this.a&&this.pause()};h.unlayoutOnPause=function(){return!0};h.unlayoutCallback=function(){var a=this;this.a&&(I(this.a),this.a=null);this.s&&this.s();this.m=new Promise(function(b){a.o=b});return!0};
function Z(a,b){a.m.then(function(){a.a&&a.a.contentWindow&&a.a.contentWindow.postMessage(x({cmd:b}),"*")})}h.play=function(){Z(this,"play")};h.pause=function(){Z(this,"pause")};h.mute=function(){Z(this,"mute")};h.unmute=function(){Z(this,"unmute")};h.supportsPlatform=function(){return!0};h.isInteractive=function(){return!0};h.showControls=function(){};h.hideControls=function(){};AMP.registerElement("amp-nexxtv-player",X);
})});
//# sourceMappingURL=amp-nexxtv-player-0.1.js.map

