{"version":3,"sources":["node_modules/browser-pack/_prelude.js","extensions/amp-mustache/0.1/amp-mustache.js","src/config.js","src/log.js","src/mode-object.js","src/mode.js","src/sanitizer.js","src/srcset.js","src/string.js","src/types.js","src/url-parse-query-string.js","src/url.js","src/utils/object.js","third_party/caja/html-sanitizer.js","third_party/mustache/mustache.js"],"names":[],"mappings":"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","file":"amp-mustache-0.1.max.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parse as mustacheParse, render as mustacheRender,\n    setUnescapedSanitizier} from '../../../third_party/mustache/mustache';\nimport {sanitizeHtml, sanitizeFormattingHtml} from '../../../src/sanitizer';\n\n// Configure inline sanitizer for unescaped values.\nsetUnescapedSanitizier(sanitizeFormattingHtml);\n\n\n/**\n * Implements an AMP template for Mustache.js.\n * See {@link https://github.com/janl/mustache.js/}.\n *\n * @private Visible for testing.\n */\nexport class AmpMustache extends AMP.BaseTemplate {\n\n  /** @override */\n  compileCallback() {\n    /** @private @const {string} */\n    this.template_ = this.element./*OK*/innerHTML;\n    mustacheParse(this.template_);\n  }\n\n  /** @override */\n  render(data) {\n    const html = mustacheRender(this.template_, data);\n    const sanitized = sanitizeHtml(html);\n    const root = this.win.document.createElement('div');\n    root./*OK*/innerHTML = sanitized;\n    return this.unwrap(root);\n  }\n}\n\n\nAMP.registerTemplate('amp-mustache', AmpMustache);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n    new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n    new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n\n/** @const Time when this JS loaded.  */\nconst start = Date.now();\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * Logging class.\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.calcLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  calcLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.level_ != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      messages.unshift(Date.now() - start, '[' + tag + ']');\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.level_ != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.level_ >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.level_ >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.level_ >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.level_ >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   */\n  error(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a value,\n   * the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return T\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const message = error.message;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @private\n */\nfunction createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier\n  // than the binary that does call `initLogConstructor` (amp.js), the extension\n  // will throw an error as that extension will never be able to initialize\n  // the log instances and we also don't want it to call `initLogConstructor`\n  // either (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are\n  // ready for use (stored globally) after the main binary calls\n  // `initLogConstructor`.\n  dev();\n  user();\n}\n\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *\n * @return {!Log}\n */\nexport function user() {\n  if (logs.user) {\n    return logs.user;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.user = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.OFF;\n  }, USER_ERROR_SENTINEL);\n}\n\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped in\n * the PROD binary. However, `devLog().assert` result is preserved in either case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {startsWith} from './string';\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * A #querySelector query to see if we have any scripts with development paths.\n * @type {string}\n */\nconst developmentScriptQuery = 'script[src*=\"/dist/\"],script[src*=\"/base/\"]';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // For 3p integration code\n  if (win.context && win.context.mode) {\n    return win.context.mode;\n  }\n\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when the --fortesting flag is NOT used.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n  const FORCE_LOCALDEV = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const AMP_CONFIG_3P_FRAME_HOST = self.AMP_CONFIG &&\n      self.AMP_CONFIG.thirdPartyFrameHost;\n\n  const isLocalDev = IS_DEV && !!(win.location.hostname == 'localhost' ||\n      (FORCE_LOCALDEV && win.location.hostname == AMP_CONFIG_3P_FRAME_HOST) ||\n      (win.location.ancestorOrigins && win.location.ancestorOrigins[0] &&\n        startsWith(win.location.ancestorOrigins[0], 'http://localhost:'))) &&\n      // Filter out localhost running against a prod script.\n      // Because all allowed scripts are ours, we know that these can only\n      // occur during local dev.\n      (!win.document || !!win.document.querySelector(developmentScriptQuery));\n\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation\n    development: !!(hashQuery['development'] == '1' ||\n        win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: IS_DEV && !!(win.AMP_TEST || win.__karma__),\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {htmlSanitizer} from '../third_party/caja/html-sanitizer';\nimport {\n  getSourceUrl,\n  isProxyOrigin,\n  parseUrl,\n  resolveRelativeUrl,\n  checkCorsUrl,\n} from './url';\nimport {parseSrcset} from './srcset';\nimport {user} from './log';\nimport {urls} from './config';\nimport {map} from './utils/object';\nimport {startsWith} from './string';\n\n\n/** @private @const {string} */\nconst TAG = 'sanitizer';\n\n\n/**\n * @const {!Object<string, boolean>}\n * See https://github.com/ampproject/amphtml/blob/master/spec/amp-html-format.md\n */\nconst BLACKLISTED_TAGS = {\n  'applet': true,\n  'audio': true,\n  'base': true,\n  'embed': true,\n  'form': true,\n  'frame': true,\n  'frameset': true,\n  'iframe': true,\n  'img': true,\n  'link': true,\n  'meta': true,\n  'object': true,\n  'script': true,\n  'style': true,\n  // TODO(dvoytenko, #1156): SVG is blacklisted temporarily. There's no\n  // intention to keep this block for any longer than we have to.\n  'svg': true,\n  'template': true,\n  'video': true,\n};\n\n\n/** @const {!Object<string, boolean>} */\nconst SELF_CLOSING_TAGS = {\n  'br': true,\n  'col': true,\n  'hr': true,\n  'img': true,\n  'input': true,\n  'source': true,\n  'track': true,\n  'wbr': true,\n  'area': true,\n  'base': true,\n  'command': true,\n  'embed': true,\n  'keygen': true,\n  'link': true,\n  'meta': true,\n  'param': true,\n};\n\n\n/** @const {!Array<string>} */\nconst WHITELISTED_FORMAT_TAGS = [\n  'b',\n  'br',\n  'code',\n  'del',\n  'em',\n  'i',\n  'ins',\n  'mark',\n  'q',\n  's',\n  'small',\n  'strong',\n  'sub',\n  'sup',\n  'time',\n  'u',\n];\n\n\n/** @const {!Array<string>} */\nconst WHITELISTED_ATTRS = [\n  'fallback',\n  'href',\n  'on',\n  'placeholder',\n  'option',\n  /* Attributes added for amp-bind */\n  // TODO(kmh287): Add more whitelisted attributes for bind?\n  'text',\n];\n\n\n/** @const {!RegExp} */\nconst WHITELISTED_ATTR_PREFIX_REGEX = /^data-/i;\n\n\n/** @const {!Array<string>} */\nconst WHITELISTED_TARGETS = ['_top', '_blank'];\n\n/** @const {!Array<string>} */\nconst BLACKLISTED_ATTR_VALUES = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ '<script',\n  /*eslint no-script-url: 0*/ '</script',\n];\n\n/** @const {!Object<string, !Object<string, !RegExp>>} */\nconst BLACKLISTED_TAG_SPECIFIC_ATTR_VALUES = {\n  'input': {\n    'type': /(?:image|file|password|button)/i,\n  },\n};\n\n\n/** @const {!Array<string>} */\nconst BLACKLISTED_FIELDS_ATTR = [\n  'form',\n  'formaction',\n  'formmethod',\n  'formtarget',\n  'formnovalidate',\n  'formenctype',\n];\n\n\n/** @const {!Object<string, !Array<string>>} */\nconst BLACKLISTED_TAG_SPECIFIC_ATTRS = {\n  'input': BLACKLISTED_FIELDS_ATTR,\n  'textarea': BLACKLISTED_FIELDS_ATTR,\n  'select': BLACKLISTED_FIELDS_ATTR,\n};\n\n\n/**\n * Sanitizes the provided HTML.\n *\n * This function expects the HTML to be already pre-sanitized and thus it does\n * not validate all of the AMP rules - only the most dangerous security-related\n * cases, such as <SCRIPT>, <STYLE>, <IFRAME>.\n *\n * @param {string} html\n * @return {string}\n */\nexport function sanitizeHtml(html) {\n  const tagPolicy = htmlSanitizer.makeTagPolicy();\n  const output = [];\n  let ignore = 0;\n\n  function emit(content) {\n    if (ignore == 0) {\n      output.push(content);\n    }\n  }\n\n  const parser = htmlSanitizer.makeSaxParser({\n    'startTag': function(tagName, attribs) {\n      if (ignore > 0) {\n        if (!SELF_CLOSING_TAGS[tagName]) {\n          ignore++;\n        }\n        return;\n      }\n      const bindAttribsIndices = map();\n      // Special handling for attributes for amp-bind which are formatted as\n      // [attr]. The brackets are restored at the end of this function.\n      for (let i = 0; i < attribs.length; i += 2) {\n        const attr = attribs[i];\n        if (attr && attr[0] == '[' && attr[attr.length - 1] == ']') {\n          bindAttribsIndices[i] = true;\n          attribs[i] = attr.slice(1, -1);\n        }\n      }\n      if (BLACKLISTED_TAGS[tagName]) {\n        ignore++;\n      } else if (!startsWith(tagName, 'amp-')) {\n        // Ask Caja to validate the element as well.\n        // Use the resulting properties.\n        const savedAttribs = attribs.slice(0);\n        const scrubbed = tagPolicy(tagName, attribs);\n        if (!scrubbed) {\n          ignore++;\n        } else {\n          attribs = scrubbed.attribs;\n          // Restore some of the attributes that AMP is directly responsible\n          // for, such as \"on\"\n          for (let i = 0; i < attribs.length; i += 2) {\n            const attrib = attribs[i];\n            if (WHITELISTED_ATTRS.includes(attrib)) {\n              attribs[i + 1] = savedAttribs[i + 1];\n            } else if (attrib.search(WHITELISTED_ATTR_PREFIX_REGEX) == 0) {\n              attribs[i + 1] = savedAttribs[i + 1];\n            }\n          }\n        }\n        // `<A>` has special target rules:\n        // - Default target is \"_top\";\n        // - Allowed targets are \"_blank\", \"_top\";\n        // - All other targets are rewritted to \"_top\".\n        if (tagName == 'a') {\n          let index = -1;\n          let hasHref = false;\n          for (let i = 0; i < savedAttribs.length; i += 2) {\n            if (savedAttribs[i] == 'target') {\n              index = i + 1;\n            } else if (savedAttribs[i] == 'href') {\n              // Only allow valid `href` values.\n              hasHref = attribs[i + 1] != null;\n            }\n          }\n          let origTarget = index != -1 ? savedAttribs[index] : null;\n          if (origTarget != null) {\n            origTarget = origTarget.toLowerCase();\n            if (WHITELISTED_TARGETS.indexOf(origTarget) != -1) {\n              attribs[index] = origTarget;\n            } else {\n              attribs[index] = '_top';\n            }\n          } else if (hasHref) {\n            attribs.push('target');\n            attribs.push('_top');\n          }\n        }\n      }\n      if (ignore > 0) {\n        if (SELF_CLOSING_TAGS[tagName]) {\n          ignore--;\n        }\n        return;\n      }\n      emit('<');\n      emit(tagName);\n      for (let i = 0; i < attribs.length; i += 2) {\n        const attrName = attribs[i];\n        const attrValue = attribs[i + 1];\n        if (!isValidAttr(tagName, attrName, attrValue)) {\n          continue;\n        }\n        emit(' ');\n        if (bindAttribsIndices[i]) {\n          emit('[' + attrName + ']');\n        } else {\n          emit(attrName);\n        }\n        emit('=\"');\n        if (attrValue) {\n          emit(htmlSanitizer.escapeAttrib(rewriteAttributeValue(\n              tagName, attrName, attrValue)));\n        }\n        emit('\"');\n      }\n      emit('>');\n    },\n    'endTag': function(tagName) {\n      if (ignore > 0) {\n        ignore--;\n        return;\n      }\n      emit('</');\n      emit(tagName);\n      emit('>');\n    },\n    'pcdata': emit,\n    'rcdata': emit,\n    'cdata': emit,\n  });\n  parser(html);\n  return output.join('');\n}\n\n\n/**\n * Sanitizes the provided formatting HTML. Only the most basic inline tags are\n * allowed, such as <b>, <i>, etc.\n *\n * @param {string} html\n * @return {string}\n */\nexport function sanitizeFormattingHtml(html) {\n  return htmlSanitizer.sanitizeWithPolicy(html,\n      function(tagName, unusedAttrs) {\n        if (!WHITELISTED_FORMAT_TAGS.includes(tagName)) {\n          return null;\n        }\n        return {\n          tagName,\n          attribs: [],\n        };\n      }\n  );\n}\n\n\n/**\n * Whether the attribute/value are valid.\n * @param {string} tagName\n * @param {string} attrName\n * @param {string} attrValue\n * @return {boolean}\n */\nexport function isValidAttr(tagName, attrName, attrValue) {\n\n  // \"on*\" attributes are not allowed.\n  if (startsWith(attrName, 'on') && attrName != 'on') {\n    return false;\n  }\n\n  // Inline styles are not allowed.\n  if (attrName == 'style') {\n    return false;\n  }\n\n  // See validator-main.protoascii\n  // https://github.com/ampproject/amphtml/blob/master/validator/validator-main.protoascii\n  if (attrName == 'class' &&\n      attrValue &&\n      /(^|\\W)i-amphtml-/i.test(attrValue)) {\n    return false;\n  }\n\n  // No attributes with \"javascript\" or other blacklisted substrings in them.\n  if (attrValue) {\n    const attrValueNorm = attrValue.toLowerCase().replace(/[\\s,\\u0000]+/g, '');\n    for (let i = 0; i < BLACKLISTED_ATTR_VALUES.length; i++) {\n      if (attrValueNorm.indexOf(BLACKLISTED_ATTR_VALUES[i]) != -1) {\n        return false;\n      }\n    }\n  }\n\n  // Remove blacklisted attributes from specific tags e.g. input[formaction].\n  const attrNameBlacklist = BLACKLISTED_TAG_SPECIFIC_ATTRS[tagName];\n  if (attrNameBlacklist && attrNameBlacklist.indexOf(attrName) != -1) {\n    return false;\n  }\n\n  // Remove blacklisted values for specific attributes for specific tags\n  // e.g. input[type=image].\n  const attrBlacklist = BLACKLISTED_TAG_SPECIFIC_ATTR_VALUES[tagName];\n  if (attrBlacklist) {\n    const blacklistedValuesRegex = attrBlacklist[attrName];\n    if (blacklistedValuesRegex &&\n        attrValue.search(blacklistedValuesRegex) != -1) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * If (tagName, attrName) is a CDN-rewritable URL attribute, returns the\n * rewritten URL value. Otherwise, returns the unchanged `attrValue`.\n * @see resolveUrlAttr for rewriting rules.\n * @param {string} tagName\n * @param {string} attrName\n * @param {string} attrValue\n * @return {string}\n */\nexport function rewriteAttributeValue(tagName, attrName, attrValue) {\n  if (attrName == 'src' || attrName == 'href' || attrName == 'srcset') {\n    return resolveUrlAttr(tagName, attrName, attrValue, self.location);\n  }\n  return attrValue;\n}\n\n/**\n * Rewrites the URL attribute values. URLs are rewritten as following:\n * - If URL is absolute, it is not rewritten\n * - If URL is relative, it's rewritten as absolute against the source origin\n * - If resulting URL is a `http:` URL and it's for image, the URL is rewritten\n *   again to be served with AMP Cache (cdn.ampproject.org).\n *\n * @param {string} tagName\n * @param {string} attrName\n * @param {string} attrValue\n * @param {!Location} windowLocation\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveUrlAttr(tagName, attrName, attrValue, windowLocation) {\n  checkCorsUrl(attrValue);\n  const isProxyHost = isProxyOrigin(windowLocation);\n  const baseUrl = parseUrl(getSourceUrl(windowLocation));\n\n  if (attrName == 'href' && !startsWith(attrValue, '#')) {\n    return resolveRelativeUrl(attrValue, baseUrl);\n  }\n\n  if (attrName == 'src') {\n    if (tagName == 'amp-img') {\n      return resolveImageUrlAttr(attrValue, baseUrl, isProxyHost);\n    }\n    return resolveRelativeUrl(attrValue, baseUrl);\n  }\n\n  if (attrName == 'srcset') {\n    let srcset;\n    try {\n      srcset = parseSrcset(attrValue);\n    } catch (e) {\n      // Do not fail the whole template just because one srcset is broken.\n      // An AMP element will pick it up and report properly.\n      user().error(TAG, 'Failed to parse srcset: ', e);\n      return attrValue;\n    }\n    const sources = srcset.getSources();\n    for (let i = 0; i < sources.length; i++) {\n      sources[i].url = resolveImageUrlAttr(\n          sources[i].url, baseUrl, isProxyHost);\n    }\n    return srcset.stringify();\n  }\n\n  return attrValue;\n}\n\n/**\n * Non-HTTPs image URLs are rewritten via proxy.\n * @param {string} attrValue\n * @param {!Location} baseUrl\n * @param {boolean} isProxyHost\n * @return {string}\n */\nfunction resolveImageUrlAttr(attrValue, baseUrl, isProxyHost) {\n  const src = parseUrl(resolveRelativeUrl(attrValue, baseUrl));\n\n  // URLs such as `data:` or proxy URLs are returned as is. Unsafe protocols\n  // do not arrive here - already stripped by the sanitizer.\n  if (src.protocol == 'data:' || isProxyOrigin(src) || !isProxyHost) {\n    return src.href;\n  }\n\n  // Rewrite as a proxy URL.\n  return `${urls.cdn}/i/` +\n      (src.protocol == 'https:' ? 's/' : '') +\n      encodeURIComponent(src.host) +\n      src.pathname + (src.search || '') + (src.hash || '');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev, user} from './log';\n\n\n/**\n * A single source within a srcset. Only one: width or DPR can be specified at\n * a time.\n * @typedef {{\n *   url: string,\n *   width: (number|undefined),\n *   dpr: (number|undefined)\n * }}\n */\nlet SrcsetSourceDef;\n\n\n/**\n * Extracts `srcset` and fallbacks to `src` if not available.\n * @param {!Element} element\n * @return {!Srcset}\n */\nexport function srcsetFromElement(element) {\n  const srcsetAttr = element.getAttribute('srcset');\n  if (srcsetAttr) {\n    return parseSrcset(srcsetAttr);\n  }\n  // We can't push `src` via `parseSrcset` because URLs in `src` are not always\n  // RFC compliant and can't be easily parsed as an `srcset`. For instance,\n  // they sometimes contain space characters.\n  const srcAttr = user().assert(element.getAttribute('src'),\n      'Either non-empty \"srcset\" or \"src\" attribute must be specified: %s',\n      element);\n  return new Srcset([{url: srcAttr, width: undefined, dpr: 1}]);\n}\n\n\n/**\n * Parses the text representation of srcset into Srcset object.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#Attributes.\n * See http://www.w3.org/html/wg/drafts/html/master/semantics.html#attr-img-srcset.\n * @param {string} s\n * @param {!Element=} opt_element\n * @return {!Srcset}\n */\nexport function parseSrcset(s, opt_element) {\n  // General grammar: (URL [NUM[w|x]],)*\n  // Example 1: \"image1.png 100w, image2.png 50w\"\n  // Example 2: \"image1.png 2x, image2.png\"\n  // Example 3: \"image1,100w.png 100w, image2.png 50w\"\n  const sSources = s.match(\n      /\\s*(?:[\\S]*)(?:\\s+(?:-?(?:\\d+(?:\\.(?:\\d+)?)?|\\.\\d+)[a-zA-Z]))?(?:\\s*,)?/g\n  );\n  user().assert(sSources.length > 0,\n      'srcset has to have at least one source: %s',\n      opt_element);\n  const sources = [];\n  for (let i = 0; i < sSources.length; i++) {\n    let sSource = sSources[i].trim();\n    if (sSource.substr(-1) == ',') {\n      sSource = sSource.substr(0, sSource.length - 1).trim();\n    }\n    const parts = sSource.split(/\\s+/, 2);\n    if (parts.length == 0 ||\n          parts.length == 1 && !parts[0] ||\n          parts.length == 2 && !parts[0] && !parts[1]) {\n      continue;\n    }\n    const url = parts[0];\n    if (parts.length == 1 || parts.length == 2 && !parts[1]) {\n      // If no \"w\" or \"x\" specified, we assume it's \"1x\".\n      sources.push({url, width: undefined, dpr: 1});\n    } else {\n      const spec = parts[1].toLowerCase();\n      const lastChar = spec.substring(spec.length - 1);\n      if (lastChar == 'w') {\n        sources.push({url, width: parseFloat(spec), dpr: undefined});\n      } else if (lastChar == 'x') {\n        sources.push({url, width: undefined, dpr: parseFloat(spec)});\n      }\n    }\n  }\n  return new Srcset(sources);\n}\n\n\n/**\n * A srcset object contains one or more sources.\n *\n * There are two types of sources: width-based and DPR-based. Only one type\n * of sources allowed to be specified within a single srcset. Depending on a\n * usecase, the components are free to choose any source that best corresponds\n * to the required rendering quality and network and CPU conditions. See\n * \"select\" method for details on how this selection is performed.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#Attributes\n */\nexport class Srcset {\n\n  /**\n   * @param {!Array<!SrcsetSourceDef>} sources\n   */\n  constructor(sources) {\n    user().assert(sources.length > 0, 'Srcset must have at least one source');\n    /** @private @const {!Array<!SrcsetSourceDef>} */\n    this.sources_ = sources;\n\n    // Only one type of source specified can be used - width or DPR.\n    let hasWidth = false;\n    let hasDpr = false;\n    for (let i = 0; i < this.sources_.length; i++) {\n      const source = this.sources_[i];\n      user().assert(\n          (source.width || source.dpr) && (!source.width || !source.dpr),\n          'Either dpr or width must be specified');\n      hasWidth = hasWidth || !!source.width;\n      hasDpr = hasDpr || !!source.dpr;\n    }\n    user().assert(!hasWidth || !hasDpr,\n        'Srcset cannot have both width and dpr sources');\n\n    // Source and assert duplicates.\n    if (hasWidth) {\n      this.sources_.sort(sortByWidth);\n    } else {\n      this.sources_.sort(sortByDpr);\n    }\n\n    /** @private @const {boolean} */\n    this.widthBased_ = hasWidth;\n\n    /** @private @const {boolean} */\n    this.dprBased_ = hasDpr;\n  }\n\n  /**\n   * Performs selection for specified width and DPR. Here, width is the width\n   * in screen pixels and DPR is the device-pixel-ratio or pixel density of\n   * the device. Depending on the circumstances, such as low network conditions,\n   * it's possible to manipulate the result of this method by passing a lower\n   * DPR value.\n   *\n   * The source selection depends on whether this is width-based or DPR-based\n   * srcset.\n   *\n   * In a width-based source, the source's width is the physical width of a\n   * resource (e.g. an image). Depending on the provided DPR, this width is\n   * converted to the screen pixels as following:\n   *   pixelWidth = sourceWidth / DPR\n   *\n   * Then, the source closest to the requested \"width\" is selected using\n   * the \"pixelWidth\". The slight preference is given to the bigger sources to\n   * ensure the most optimal quality.\n   *\n   * In a DPR-based source, the source's DPR is used to return the source that\n   * is closest to the requested DPR.\n   *\n   * Based on\n   * http://www.w3.org/html/wg/drafts/html/master/semantics.html#attr-img-srcset.\n   * @param {number} width\n   * @param {number} dpr\n   * @return {!SrcsetSourceDef}\n   */\n  select(width, dpr) {\n    dev().assert(width, 'width=%s', width);\n    dev().assert(dpr, 'dpr=%s', dpr);\n    let index = -1;\n    if (this.widthBased_) {\n      index = this.selectByWidth_(width, dpr);\n    } else if (this.dprBased_) {\n      index = this.selectByDpr_(width, dpr);\n    }\n    if (index != -1) {\n      return this.sources_[index];\n    }\n    return this.getLast();\n  }\n\n  /**\n   * @param {number} width\n   * @param {number} dpr\n   * @return {number}\n   * @private\n   */\n  selectByWidth_(width, dpr) {\n    const length = this.sources_.length;\n    let prevWidth = -Infinity;\n    for (let i = length - 1; i >= 0; i--) {\n      const source = this.sources_[i];\n      const sourceWidth = source.width / dpr;\n      // First candidate width that's equal or higher than the requested width\n      // will stop the search.\n      if (sourceWidth >= width) {\n        // The right value is now between `i` and `i + 1` - select the one\n        // that is closer with a slight preference toward higher numbers.\n        const delta = sourceWidth - width;\n        const prevDelta = (width - prevWidth) * 1.1;\n        // If smaller size is closer, enfore minimum ratio between\n        // requested width and prevWidth to ensure image isn't too distorted.\n        if (prevDelta < delta && width / prevWidth <= 1.2) {\n          return i + 1;\n        }\n        return i;\n      }\n      prevWidth = sourceWidth;\n    }\n    // Use the first (maximum) value.\n    return 0;\n  }\n\n  /**\n   * @param {number} _width\n   * @param {number} dpr\n   * @return {number}\n   * @private\n   */\n  selectByDpr_(_width, dpr) {\n    let minIndex = -1;\n    let minScore = 1000000;\n    for (let i = 0; i < this.sources_.length; i++) {\n      const source = this.sources_[i];\n      // Default DPR = 1.\n      const sourceDpr = source.dpr || 1;\n      const score = Math.abs(sourceDpr - dpr);\n      if (score < minScore) {\n        minScore = score;\n        minIndex = i;\n      }\n    }\n    return minIndex;\n  }\n\n  /**\n   * Returns the last source in the srcset, which is the default source.\n   * @return {!SrcsetSourceDef}\n   */\n  getLast() {\n    return this.sources_[this.sources_.length - 1];\n  }\n\n  /**\n   * Returns all sources in the srcset.\n   * @return {!Array<!SrcsetSourceDef>}\n   */\n  getSources() {\n    return this.sources_;\n  }\n\n  /**\n   * Reconstructs the string expression for this srcset.\n   * @return {string}\n   */\n  stringify() {\n    const res = [];\n    for (let i = 0; i < this.sources_.length; i++) {\n      const source = this.sources_[i];\n      if (source.width) {\n        res.push(`${source.url} ${source.width}w`);\n      } else if (source.dpr) {\n        res.push(`${source.url} ${source.dpr}x`);\n      } else {\n        res.push(`${source.url}`);\n      }\n    }\n    return res.join(', ');\n  }\n}\n\nfunction sortByWidth(s1, s2) {\n  user().assert(s1.width != s2.width, 'Duplicate width: %s', s1.width);\n  return s2.width - s1.width;\n}\n\nfunction sortByDpr(s1, s2) {\n  user().assert(s1.dpr != s2.dpr, 'Duplicate dpr: %s', s1.dpr);\n  return s2.dpr - s1.dpr;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes removed and character after to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {!function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Determines if value is of FormData type.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFormData(value) {\n  return toString(value) === '[object FormData]';\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = decodeURIComponent(match[1]).trim();\n    const value = match[2] ? decodeURIComponent(match[2]).trim() : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {startsWith, endsWith} from './string';\nimport {user} from './log';\nimport {getMode} from './mode';\nimport {urls} from './config';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {Object<string, !Location>}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* paramters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrl(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = Object.create(null));\n  }\n\n  const fromCache = cache[url];\n  if (fromCache) {\n    return fromCache;\n  }\n\n  const info = parseUrlWithA(a, url);\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_nocache) {\n    return frozen;\n  }\n  return cache[url] = frozen;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url) {\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null,  // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n  return info;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n      mainAndQuery[1]\n          ? (opt_addToFront\n              ? `?${paramString}&${mainAndQuery[1]}`\n              : `?${mainAndQuery[1]}&${paramString}`)\n          : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!Object<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!Object<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n    urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrl(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrl(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the new\n * search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParams(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(/^[?&]/, '');  // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(prefix == 'a' || prefix == 'c' || prefix == 'v',\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n      ? 'https://' + decodeURIComponent(path[3])\n      : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') + removeAmpJsParams(url.search) +\n      (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrl(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrl(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrl(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrl(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url have __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrl(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Returns a `map`, and will always return a at-dict like object.\n * The JsonObject type is just a simple object that is a dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  return /** @type {!JsonObject} */ (map(opt_initial));\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} maxDepth The maximum depth for deep merge, beyond which\n *    Object.assign will be used.\n * @return {!Object}\n * @throws {Error} if `source` contains a circular reference\n */\nfunction deepMerge_(target, source, maxDepth) {\n  // Keep track of seen objects to prevent infinite loops on objects with\n  // recursive references.\n  const seen = [];\n  // Traversal must be breadth-first so any object encountered for the first\n  // time does not have a reference  at a shallower depth. Otherwise, a\n  // circular reference found at depth == maxDepth could cause an unexpected\n  // change at a shallower depth if the same object exists at a shallower depth.\n  const queue = [{target, source, depth: 0}];\n  while (queue.length > 0) {\n    const {target, source, depth} = queue.shift();\n    if (seen.includes(source)) {\n      throw new Error('Source object contains circular references');\n    }\n    seen.push(source);\n    if (target === source) {\n      continue;\n    }\n    if (depth > maxDepth) {\n      Object.assign(target, source);\n      continue;\n    }\n    Object.keys(source).forEach(key => {\n      const newValue = source[key];\n      // Perform a deep merge IFF both a and b have the same property and\n      // the properties on both a and b are non-null plain objects.\n      if (hasOwn(target, key)) {\n        const oldValue = target[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({target: oldValue, source: newValue, depth: depth + 1});\n          return;\n        }\n      }\n      target[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * Deep merge object b into object a. Both a and b should only contain\n * primitives, arrays, and plain objects. For any conflicts, object b wins.\n * Arrays are replaced, not merged. Plain objects are recursively merged.\n * @param {!Object} target\n * @param {!Object} source\n * @param {number=} opt_maxDepth The maximum depth for deep merge,\n *     beyond which Object.assign will be used.\n * @return {!Object}\n * @throws {Error} if `source` contains a circular reference\n */\nexport function deepMerge(target, source, opt_maxDepth) {\n  return deepMerge_(target, source, opt_maxDepth || Number.POSITIVE_INFINITY);\n}\n","/* Generated from CAJA Sanitizer library commit 110311969a9e3d8acfe38526fe9d925485648fc8 */\n\n// Copyright (C) 2010 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * Implements RFC 3986 for parsing/formatting URIs.\n *\n * @author mikesamuel@gmail.com\n * \\@provides URI\n * \\@overrides window\n */\n\nvar URI = (function () {\n\n/**\n * creates a uri from the string form.  The parser is relaxed, so special\n * characters that aren't escaped but don't cause ambiguities will not cause\n * parse failures.\n *\n * @return {URI|null}\n */\nfunction parse(uriStr) {\n  var m = ('' + uriStr).match(URI_RE_);\n  if (!m) { return null; }\n  return new URI(\n      nullIfAbsent(m[1]),\n      nullIfAbsent(m[2]),\n      nullIfAbsent(m[3]),\n      nullIfAbsent(m[4]),\n      nullIfAbsent(m[5]),\n      nullIfAbsent(m[6]),\n      nullIfAbsent(m[7]));\n}\n\n\n/**\n * creates a uri from the given parts.\n *\n * @param scheme {string} an unencoded scheme such as \"http\" or null\n * @param credentials {string} unencoded user credentials or null\n * @param domain {string} an unencoded domain name or null\n * @param port {number} a port number in [1, 32768].\n *    -1 indicates no port, as does null.\n * @param path {string} an unencoded path\n * @param query {Array.<string>|string|null} a list of unencoded cgi\n *   parameters where even values are keys and odds the corresponding values\n *   or an unencoded query.\n * @param fragment {string} an unencoded fragment without the \"#\" or null.\n * @return {URI}\n */\nfunction create(scheme, credentials, domain, port, path, query, fragment) {\n  var uri = new URI(\n      encodeIfExists2(scheme, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),\n      encodeIfExists2(\n          credentials, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),\n      encodeIfExists(domain),\n      port > 0 ? port.toString() : null,\n      encodeIfExists2(path, URI_DISALLOWED_IN_PATH_),\n      null,\n      encodeIfExists(fragment));\n  if (query) {\n    if ('string' === typeof query) {\n      uri.setRawQuery(query.replace(/[^?&=0-9A-Za-z_\\-~.%]/g, encodeOne));\n    } else {\n      uri.setAllParameters(query);\n    }\n  }\n  return uri;\n}\nfunction encodeIfExists(unescapedPart) {\n  if ('string' == typeof unescapedPart) {\n    return encodeURIComponent(unescapedPart);\n  }\n  return null;\n};\n/**\n * if unescapedPart is non null, then escapes any characters in it that aren't\n * valid characters in a url and also escapes any special characters that\n * appear in extra.\n *\n * @param unescapedPart {string}\n * @param extra {RegExp} a character set of characters in [\\01-\\177].\n * @return {string|null} null iff unescapedPart == null.\n */\nfunction encodeIfExists2(unescapedPart, extra) {\n  if ('string' == typeof unescapedPart) {\n    return encodeURI(unescapedPart).replace(extra, encodeOne);\n  }\n  return null;\n};\n/** converts a character in [\\01-\\177] to its url encoded equivalent. */\nfunction encodeOne(ch) {\n  var n = ch.charCodeAt(0);\n  return '%' + '0123456789ABCDEF'.charAt((n >> 4) & 0xf) +\n      '0123456789ABCDEF'.charAt(n & 0xf);\n}\n\n/**\n * {@updoc\n *  $ normPath('foo/./bar')\n *  # 'foo/bar'\n *  $ normPath('./foo')\n *  # 'foo'\n *  $ normPath('foo/.')\n *  # 'foo'\n *  $ normPath('foo//bar')\n *  # 'foo/bar'\n * }\n */\nfunction normPath(path) {\n  return path.replace(/(^|\\/)\\.(?:\\/|$)/g, '$1').replace(/\\/{2,}/g, '/');\n}\n\nvar PARENT_DIRECTORY_HANDLER = new RegExp(\n    ''\n    // A path break\n    + '(/|^)'\n    // followed by a non .. path element\n    // (cannot be . because normPath is used prior to this RegExp)\n    + '(?:[^./][^/]*|\\\\.{2,}(?:[^./][^/]*)|\\\\.{3,}[^/]*)'\n    // followed by .. followed by a path break.\n    + '/\\\\.\\\\.(?:/|$)');\n\nvar PARENT_DIRECTORY_HANDLER_RE = new RegExp(PARENT_DIRECTORY_HANDLER);\n\nvar EXTRA_PARENT_PATHS_RE = /^(?:\\.\\.\\/)*(?:\\.\\.$)?/;\n\n/**\n * Normalizes its input path and collapses all . and .. sequences except for\n * .. sequences that would take it above the root of the current parent\n * directory.\n * {@updoc\n *  $ collapse_dots('foo/../bar')\n *  # 'bar'\n *  $ collapse_dots('foo/./bar')\n *  # 'foo/bar'\n *  $ collapse_dots('foo/../bar/./../../baz')\n *  # 'baz'\n *  $ collapse_dots('../foo')\n *  # '../foo'\n *  $ collapse_dots('../foo').replace(EXTRA_PARENT_PATHS_RE, '')\n *  # 'foo'\n * }\n */\nfunction collapse_dots(path) {\n  if (path === null) { return null; }\n  var p = normPath(path);\n  // Only /../ left to flatten\n  var r = PARENT_DIRECTORY_HANDLER_RE;\n  // We replace with $1 which matches a / before the .. because this\n  // guarantees that:\n  // (1) we have at most 1 / between the adjacent place,\n  // (2) always have a slash if there is a preceding path section, and\n  // (3) we never turn a relative path into an absolute path.\n  for (var q; (q = p.replace(r, '$1')) != p; p = q) {};\n  return p;\n}\n\n/**\n * resolves a relative url string to a base uri.\n * @return {URI}\n */\nfunction resolve(baseUri, relativeUri) {\n  // there are several kinds of relative urls:\n  // 1. //foo - replaces everything from the domain on.  foo is a domain name\n  // 2. foo - replaces the last part of the path, the whole query and fragment\n  // 3. /foo - replaces the the path, the query and fragment\n  // 4. ?foo - replace the query and fragment\n  // 5. #foo - replace the fragment only\n\n  var absoluteUri = baseUri.clone();\n  // we satisfy these conditions by looking for the first part of relativeUri\n  // that is not blank and applying defaults to the rest\n\n  var overridden = relativeUri.hasScheme();\n\n  if (overridden) {\n    absoluteUri.setRawScheme(relativeUri.getRawScheme());\n  } else {\n    overridden = relativeUri.hasCredentials();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawCredentials(relativeUri.getRawCredentials());\n  } else {\n    overridden = relativeUri.hasDomain();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawDomain(relativeUri.getRawDomain());\n  } else {\n    overridden = relativeUri.hasPort();\n  }\n\n  var rawPath = relativeUri.getRawPath();\n  var simplifiedPath = collapse_dots(rawPath);\n  if (overridden) {\n    absoluteUri.setPort(relativeUri.getPort());\n    simplifiedPath = simplifiedPath\n        && simplifiedPath.replace(EXTRA_PARENT_PATHS_RE, '');\n  } else {\n    overridden = !!rawPath;\n    if (overridden) {\n      // resolve path properly\n      if (simplifiedPath.charCodeAt(0) !== 0x2f /* / */) {  // path is relative\n        var absRawPath = collapse_dots(absoluteUri.getRawPath() || '')\n            .replace(EXTRA_PARENT_PATHS_RE, '');\n        var slash = absRawPath.lastIndexOf('/') + 1;\n        simplifiedPath = collapse_dots(\n            (slash ? absRawPath.substring(0, slash) : '')\n            + collapse_dots(rawPath))\n            .replace(EXTRA_PARENT_PATHS_RE, '');\n      }\n    } else {\n      simplifiedPath = simplifiedPath\n          && simplifiedPath.replace(EXTRA_PARENT_PATHS_RE, '');\n      if (simplifiedPath !== rawPath) {\n        absoluteUri.setRawPath(simplifiedPath);\n      }\n    }\n  }\n\n  if (overridden) {\n    absoluteUri.setRawPath(simplifiedPath);\n  } else {\n    overridden = relativeUri.hasQuery();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawQuery(relativeUri.getRawQuery());\n  } else {\n    overridden = relativeUri.hasFragment();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawFragment(relativeUri.getRawFragment());\n  }\n\n  return absoluteUri;\n}\n\n/**\n * a mutable URI.\n *\n * This class contains setters and getters for the parts of the URI.\n * The <tt>getXYZ</tt>/<tt>setXYZ</tt> methods return the decoded part -- so\n * <code>uri.parse('/foo%20bar').getPath()</code> will return the decoded path,\n * <tt>/foo bar</tt>.\n *\n * <p>The raw versions of fields are available too.\n * <code>uri.parse('/foo%20bar').getRawPath()</code> will return the raw path,\n * <tt>/foo%20bar</tt>.  Use the raw setters with care, since\n * <code>URI::toString</code> is not guaranteed to return a valid url if a\n * raw setter was used.\n *\n * <p>All setters return <tt>this</tt> and so may be chained, a la\n * <code>uri.parse('/foo').setFragment('part').toString()</code>.\n *\n * <p>You should not use this constructor directly -- please prefer the factory\n * functions {@link uri.parse}, {@link uri.create}, {@link uri.resolve}\n * instead.</p>\n *\n * <p>The parameters are all raw (assumed to be properly escaped) parts, and\n * any (but not all) may be null.  Undefined is not allowed.</p>\n *\n * @constructor\n */\nfunction URI(\n    rawScheme,\n    rawCredentials, rawDomain, port,\n    rawPath, rawQuery, rawFragment) {\n  this.scheme_ = rawScheme;\n  this.credentials_ = rawCredentials;\n  this.domain_ = rawDomain;\n  this.port_ = port;\n  this.path_ = rawPath;\n  this.query_ = rawQuery;\n  this.fragment_ = rawFragment;\n  /**\n   * @type {Array|null}\n   */\n  this.paramCache_ = null;\n}\n\n/** returns the string form of the url. */\nURI.prototype.toString = function () {\n  var out = [];\n  if (null !== this.scheme_) { out.push(this.scheme_, ':'); }\n  if (null !== this.domain_) {\n    out.push('//');\n    if (null !== this.credentials_) { out.push(this.credentials_, '@'); }\n    out.push(this.domain_);\n    if (null !== this.port_) { out.push(':', this.port_.toString()); }\n  }\n  if (null !== this.path_) { out.push(this.path_); }\n  if (null !== this.query_) { out.push('?', this.query_); }\n  if (null !== this.fragment_) { out.push('#', this.fragment_); }\n  return out.join('');\n};\n\nURI.prototype.clone = function () {\n  return new URI(this.scheme_, this.credentials_, this.domain_, this.port_,\n                 this.path_, this.query_, this.fragment_);\n};\n\nURI.prototype.getScheme = function () {\n  // HTML5 spec does not require the scheme to be lowercased but\n  // all common browsers except Safari lowercase the scheme.\n  return this.scheme_ && decodeURIComponent(this.scheme_).toLowerCase();\n};\nURI.prototype.getRawScheme = function () {\n  return this.scheme_;\n};\nURI.prototype.setScheme = function (newScheme) {\n  this.scheme_ = encodeIfExists2(\n      newScheme, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);\n  return this;\n};\nURI.prototype.setRawScheme = function (newScheme) {\n  this.scheme_ = newScheme ? newScheme : null;\n  return this;\n};\nURI.prototype.hasScheme = function () {\n  return null !== this.scheme_;\n};\n\n\nURI.prototype.getCredentials = function () {\n  return this.credentials_ && decodeURIComponent(this.credentials_);\n};\nURI.prototype.getRawCredentials = function () {\n  return this.credentials_;\n};\nURI.prototype.setCredentials = function (newCredentials) {\n  this.credentials_ = encodeIfExists2(\n      newCredentials, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);\n\n  return this;\n};\nURI.prototype.setRawCredentials = function (newCredentials) {\n  this.credentials_ = newCredentials ? newCredentials : null;\n  return this;\n};\nURI.prototype.hasCredentials = function () {\n  return null !== this.credentials_;\n};\n\n\nURI.prototype.getDomain = function () {\n  return this.domain_ && decodeURIComponent(this.domain_);\n};\nURI.prototype.getRawDomain = function () {\n  return this.domain_;\n};\nURI.prototype.setDomain = function (newDomain) {\n  return this.setRawDomain(newDomain && encodeURIComponent(newDomain));\n};\nURI.prototype.setRawDomain = function (newDomain) {\n  this.domain_ = newDomain ? newDomain : null;\n  // Maintain the invariant that paths must start with a slash when the URI\n  // is not path-relative.\n  return this.setRawPath(this.path_);\n};\nURI.prototype.hasDomain = function () {\n  return null !== this.domain_;\n};\n\n\nURI.prototype.getPort = function () {\n  return this.port_ && decodeURIComponent(this.port_);\n};\nURI.prototype.setPort = function (newPort) {\n  if (newPort) {\n    newPort = Number(newPort);\n    if (newPort !== (newPort & 0xffff)) {\n      throw new Error('Bad port number ' + newPort);\n    }\n    this.port_ = '' + newPort;\n  } else {\n    this.port_ = null;\n  }\n  return this;\n};\nURI.prototype.hasPort = function () {\n  return null !== this.port_;\n};\n\n\nURI.prototype.getPath = function () {\n  return this.path_ && decodeURIComponent(this.path_);\n};\nURI.prototype.getRawPath = function () {\n  return this.path_;\n};\nURI.prototype.setPath = function (newPath) {\n  return this.setRawPath(encodeIfExists2(newPath, URI_DISALLOWED_IN_PATH_));\n};\nURI.prototype.setRawPath = function (newPath) {\n  if (newPath) {\n    newPath = String(newPath);\n    this.path_ =\n      // Paths must start with '/' unless this is a path-relative URL.\n      (!this.domain_ || /^\\//.test(newPath)) ? newPath : '/' + newPath;\n  } else {\n    this.path_ = null;\n  }\n  return this;\n};\nURI.prototype.hasPath = function () {\n  return null !== this.path_;\n};\n\n\nURI.prototype.getQuery = function () {\n  // From http://www.w3.org/Addressing/URL/4_URI_Recommentations.html\n  // Within the query string, the plus sign is reserved as shorthand notation\n  // for a space.\n  return this.query_ && decodeURIComponent(this.query_).replace(/\\+/g, ' ');\n};\nURI.prototype.getRawQuery = function () {\n  return this.query_;\n};\nURI.prototype.setQuery = function (newQuery) {\n  this.paramCache_ = null;\n  this.query_ = encodeIfExists(newQuery);\n  return this;\n};\nURI.prototype.setRawQuery = function (newQuery) {\n  this.paramCache_ = null;\n  this.query_ = newQuery ? newQuery : null;\n  return this;\n};\nURI.prototype.hasQuery = function () {\n  return null !== this.query_;\n};\n\n/**\n * sets the query given a list of strings of the form\n * [ key0, value0, key1, value1, ... ].\n *\n * <p><code>uri.setAllParameters(['a', 'b', 'c', 'd']).getQuery()</code>\n * will yield <code>'a=b&c=d'</code>.\n */\nURI.prototype.setAllParameters = function (params) {\n  if (typeof params === 'object') {\n    if (!(params instanceof Array)\n        && (params instanceof Object\n            || Object.prototype.toString.call(params) !== '[object Array]')) {\n      var newParams = [];\n      var i = -1;\n      for (var k in params) {\n        var v = params[k];\n        if ('string' === typeof v) {\n          newParams[++i] = k;\n          newParams[++i] = v;\n        }\n      }\n      params = newParams;\n    }\n  }\n  this.paramCache_ = null;\n  var queryBuf = [];\n  var separator = '';\n  for (var j = 0; j < params.length;) {\n    var k = params[j++];\n    var v = params[j++];\n    queryBuf.push(separator, encodeURIComponent(k.toString()));\n    separator = '&';\n    if (v) {\n      queryBuf.push('=', encodeURIComponent(v.toString()));\n    }\n  }\n  this.query_ = queryBuf.join('');\n  return this;\n};\nURI.prototype.checkParameterCache_ = function () {\n  if (!this.paramCache_) {\n    var q = this.query_;\n    if (!q) {\n      this.paramCache_ = [];\n    } else {\n      var cgiParams = q.split(/[&\\?]/);\n      var out = [];\n      var k = -1;\n      for (var i = 0; i < cgiParams.length; ++i) {\n        var m = cgiParams[i].match(/^([^=]*)(?:=(.*))?$/);\n        // From http://www.w3.org/Addressing/URL/4_URI_Recommentations.html\n        // Within the query string, the plus sign is reserved as shorthand\n        // notation for a space.\n        out[++k] = decodeURIComponent(m[1]).replace(/\\+/g, ' ');\n        out[++k] = decodeURIComponent(m[2] || '').replace(/\\+/g, ' ');\n      }\n      this.paramCache_ = out;\n    }\n  }\n};\n/**\n * sets the values of the named cgi parameters.\n *\n * <p>So, <code>uri.parse('foo?a=b&c=d&e=f').setParameterValues('c', ['new'])\n * </code> yields <tt>foo?a=b&c=new&e=f</tt>.</p>\n *\n * @param key {string}\n * @param values {Array.<string>} the new values.  If values is a single string\n *   then it will be treated as the sole value.\n */\nURI.prototype.setParameterValues = function (key, values) {\n  // be nice and avoid subtle bugs where [] operator on string performs charAt\n  // on some browsers and crashes on IE\n  if (typeof values === 'string') {\n    values = [ values ];\n  }\n\n  this.checkParameterCache_();\n  var newValueIndex = 0;\n  var pc = this.paramCache_;\n  var params = [];\n  for (var i = 0, k = 0; i < pc.length; i += 2) {\n    if (key === pc[i]) {\n      if (newValueIndex < values.length) {\n        params.push(key, values[newValueIndex++]);\n      }\n    } else {\n      params.push(pc[i], pc[i + 1]);\n    }\n  }\n  while (newValueIndex < values.length) {\n    params.push(key, values[newValueIndex++]);\n  }\n  this.setAllParameters(params);\n  return this;\n};\nURI.prototype.removeParameter = function (key) {\n  return this.setParameterValues(key, []);\n};\n/**\n * returns the parameters specified in the query part of the uri as a list of\n * keys and values like [ key0, value0, key1, value1, ... ].\n *\n * @return {Array.<string>}\n */\nURI.prototype.getAllParameters = function () {\n  this.checkParameterCache_();\n  return this.paramCache_.slice(0, this.paramCache_.length);\n};\n/**\n * returns the value<b>s</b> for a given cgi parameter as a list of decoded\n * query parameter values.\n * @return {Array.<string>}\n */\nURI.prototype.getParameterValues = function (paramNameUnescaped) {\n  this.checkParameterCache_();\n  var values = [];\n  for (var i = 0; i < this.paramCache_.length; i += 2) {\n    if (paramNameUnescaped === this.paramCache_[i]) {\n      values.push(this.paramCache_[i + 1]);\n    }\n  }\n  return values;\n};\n/**\n * returns a map of cgi parameter names to (non-empty) lists of values.\n * @return {Object.<string,Array.<string>>}\n */\nURI.prototype.getParameterMap = function (paramNameUnescaped) {\n  this.checkParameterCache_();\n  var paramMap = {};\n  for (var i = 0; i < this.paramCache_.length; i += 2) {\n    var key = this.paramCache_[i++],\n      value = this.paramCache_[i++];\n    if (!(key in paramMap)) {\n      paramMap[key] = [value];\n    } else {\n      paramMap[key].push(value);\n    }\n  }\n  return paramMap;\n};\n/**\n * returns the first value for a given cgi parameter or null if the given\n * parameter name does not appear in the query string.\n * If the given parameter name does appear, but has no '<tt>=</tt>' following\n * it, then the empty string will be returned.\n * @return {string|null}\n */\nURI.prototype.getParameterValue = function (paramNameUnescaped) {\n  this.checkParameterCache_();\n  for (var i = 0; i < this.paramCache_.length; i += 2) {\n    if (paramNameUnescaped === this.paramCache_[i]) {\n      return this.paramCache_[i + 1];\n    }\n  }\n  return null;\n};\n\nURI.prototype.getFragment = function () {\n  return this.fragment_ && decodeURIComponent(this.fragment_);\n};\nURI.prototype.getRawFragment = function () {\n  return this.fragment_;\n};\nURI.prototype.setFragment = function (newFragment) {\n  this.fragment_ = newFragment ? encodeURIComponent(newFragment) : null;\n  return this;\n};\nURI.prototype.setRawFragment = function (newFragment) {\n  this.fragment_ = newFragment ? newFragment : null;\n  return this;\n};\nURI.prototype.hasFragment = function () {\n  return null !== this.fragment_;\n};\n\nfunction nullIfAbsent(matchPart) {\n  return ('string' == typeof matchPart) && (matchPart.length > 0)\n         ? matchPart\n         : null;\n}\n\n\n\n\n/**\n * a regular expression for breaking a URI into its component parts.\n *\n * <p>http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234 says\n * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n * disambiguation method used by POSIX regular expressions, it is natural and\n * commonplace to use a regular expression for parsing the potential five\n * components of a URI reference.\n *\n * <p>The following line is the regular expression for breaking-down a\n * well-formed URI reference into its components.\n *\n * <pre>\n * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n *  12            3  4          5       6  7        8 9\n * </pre>\n *\n * <p>The numbers in the second line above are only to assist readability; they\n * indicate the reference points for each subexpression (i.e., each paired\n * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n * For example, matching the above expression to\n * <pre>\n *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n * </pre>\n * results in the following subexpression matches:\n * <pre>\n *    $1 = http:\n *    $2 = http\n *    $3 = //www.ics.uci.edu\n *    $4 = www.ics.uci.edu\n *    $5 = /pub/ietf/uri/\n *    $6 = <undefined>\n *    $7 = <undefined>\n *    $8 = #Related\n *    $9 = Related\n * </pre>\n * where <undefined> indicates that the component is not present, as is the\n * case for the query component in the above example. Therefore, we can\n * determine the value of the five components as\n * <pre>\n *    scheme    = $2\n *    authority = $4\n *    path      = $5\n *    query     = $7\n *    fragment  = $9\n * </pre>\n *\n * <p>msamuel: I have modified the regular expression slightly to expose the\n * credentials, domain, and port separately from the authority.\n * The modified version yields\n * <pre>\n *    $1 = http              scheme\n *    $2 = <undefined>       credentials -\\\n *    $3 = www.ics.uci.edu   domain       | authority\n *    $4 = <undefined>       port        -/\n *    $5 = /pub/ietf/uri/    path\n *    $6 = <undefined>       query without ?\n *    $7 = Related           fragment without #\n * </pre>\n */\nvar URI_RE_ = new RegExp(\n      \"^\" +\n      \"(?:\" +\n        \"([^:/?#]+)\" +         // scheme\n      \":)?\" +\n      \"(?://\" +\n        \"(?:([^/?#]*)@)?\" +    // credentials\n        \"([^/?#:@]*)\" +        // domain\n        \"(?::([0-9]+))?\" +     // port\n      \")?\" +\n      \"([^?#]+)?\" +            // path\n      \"(?:\\\\?([^#]*))?\" +      // query\n      \"(?:#(.*))?\" +           // fragment\n      \"$\"\n      );\n\nvar URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_ = /[#\\/\\?@]/g;\nvar URI_DISALLOWED_IN_PATH_ = /[\\#\\?]/g;\n\nURI.parse = parse;\nURI.create = create;\nURI.resolve = resolve;\nURI.collapse_dots = collapse_dots;  // Visible for testing.\n\n// lightweight string-based api for loadModuleMaker\nURI.utils = {\n  mimeTypeOf: function (uri) {\n    var uriObj = parse(uri);\n    if (/\\.html$/.test(uriObj.getPath())) {\n      return 'text/html';\n    } else {\n      return 'application/javascript';\n    }\n  },\n  resolve: function (base, uri) {\n    if (base) {\n      return resolve(parse(base), parse(uri)).toString();\n    } else {\n      return '' + uri;\n    }\n  }\n};\n\n\nreturn URI;\n})();\n\n// Exports for closure compiler.\nif (typeof window !== 'undefined') {\n}\n;\n// Copyright Google Inc.\n// Licensed under the Apache Licence Version 2.0\n// Autogenerated at Mon Nov 09 11:02:37 PST 2015\n// @overrides window\n// @provides html4\nvar html4 = {};\nhtml4.atype = {\n  'NONE': 0,\n  'URI': 1,\n  'URI_FRAGMENT': 11,\n  'SCRIPT': 2,\n  'STYLE': 3,\n  'HTML': 12,\n  'ID': 4,\n  'IDREF': 5,\n  'IDREFS': 6,\n  'GLOBAL_NAME': 7,\n  'LOCAL_NAME': 8,\n  'CLASSES': 9,\n  'FRAME_TARGET': 10,\n  'MEDIA_QUERY': 13\n};\nhtml4[ 'atype' ] = html4.atype;\nhtml4.ATTRIBS = {\n  '*::class': 9,\n  '*::dir': 0,\n  '*::draggable': 0,\n  '*::hidden': 0,\n  '*::id': 4,\n  '*::inert': 0,\n  '*::itemprop': 0,\n  '*::itemref': 6,\n  '*::itemscope': 0,\n  '*::lang': 0,\n  '*::onblur': 2,\n  '*::onchange': 2,\n  '*::onclick': 2,\n  '*::ondblclick': 2,\n  '*::onerror': 2,\n  '*::onfocus': 2,\n  '*::onkeydown': 2,\n  '*::onkeypress': 2,\n  '*::onkeyup': 2,\n  '*::onload': 2,\n  '*::onmousedown': 2,\n  '*::onmousemove': 2,\n  '*::onmouseout': 2,\n  '*::onmouseover': 2,\n  '*::onmouseup': 2,\n  '*::onreset': 2,\n  '*::onscroll': 2,\n  '*::onselect': 2,\n  '*::onsubmit': 2,\n  '*::ontouchcancel': 2,\n  '*::ontouchend': 2,\n  '*::ontouchenter': 2,\n  '*::ontouchleave': 2,\n  '*::ontouchmove': 2,\n  '*::ontouchstart': 2,\n  '*::onunload': 2,\n  '*::spellcheck': 0,\n  '*::style': 3,\n  '*::tabindex': 0,\n  '*::title': 0,\n  '*::translate': 0,\n  'a::accesskey': 0,\n  'a::coords': 0,\n  'a::href': 1,\n  'a::hreflang': 0,\n  'a::name': 7,\n  'a::onblur': 2,\n  'a::onfocus': 2,\n  'a::shape': 0,\n  'a::target': 10,\n  'a::type': 0,\n  'area::accesskey': 0,\n  'area::alt': 0,\n  'area::coords': 0,\n  'area::href': 1,\n  'area::nohref': 0,\n  'area::onblur': 2,\n  'area::onfocus': 2,\n  'area::shape': 0,\n  'area::target': 10,\n  'audio::controls': 0,\n  'audio::loop': 0,\n  'audio::mediagroup': 5,\n  'audio::muted': 0,\n  'audio::preload': 0,\n  'audio::src': 1,\n  'bdo::dir': 0,\n  'blockquote::cite': 1,\n  'br::clear': 0,\n  'button::accesskey': 0,\n  'button::disabled': 0,\n  'button::name': 8,\n  'button::onblur': 2,\n  'button::onfocus': 2,\n  'button::type': 0,\n  'button::value': 0,\n  'canvas::height': 0,\n  'canvas::width': 0,\n  'caption::align': 0,\n  'col::align': 0,\n  'col::char': 0,\n  'col::charoff': 0,\n  'col::span': 0,\n  'col::valign': 0,\n  'col::width': 0,\n  'colgroup::align': 0,\n  'colgroup::char': 0,\n  'colgroup::charoff': 0,\n  'colgroup::span': 0,\n  'colgroup::valign': 0,\n  'colgroup::width': 0,\n  'command::checked': 0,\n  'command::command': 5,\n  'command::disabled': 0,\n  'command::icon': 1,\n  'command::label': 0,\n  'command::radiogroup': 0,\n  'command::type': 0,\n  'data::value': 0,\n  'del::cite': 1,\n  'del::datetime': 0,\n  'details::open': 0,\n  'dir::compact': 0,\n  'div::align': 0,\n  'dl::compact': 0,\n  'fieldset::disabled': 0,\n  'font::color': 0,\n  'font::face': 0,\n  'font::size': 0,\n  'form::accept': 0,\n  'form::action': 1,\n  'form::autocomplete': 0,\n  'form::enctype': 0,\n  'form::method': 0,\n  'form::name': 7,\n  'form::novalidate': 0,\n  'form::onreset': 2,\n  'form::onsubmit': 2,\n  'form::target': 10,\n  'h1::align': 0,\n  'h2::align': 0,\n  'h3::align': 0,\n  'h4::align': 0,\n  'h5::align': 0,\n  'h6::align': 0,\n  'hr::align': 0,\n  'hr::noshade': 0,\n  'hr::size': 0,\n  'hr::width': 0,\n  'iframe::align': 0,\n  'iframe::frameborder': 0,\n  'iframe::height': 0,\n  'iframe::marginheight': 0,\n  'iframe::marginwidth': 0,\n  'iframe::width': 0,\n  'img::align': 0,\n  'img::alt': 0,\n  'img::border': 0,\n  'img::height': 0,\n  'img::hspace': 0,\n  'img::ismap': 0,\n  'img::name': 7,\n  'img::src': 1,\n  'img::usemap': 11,\n  'img::vspace': 0,\n  'img::width': 0,\n  'input::accept': 0,\n  'input::accesskey': 0,\n  'input::align': 0,\n  'input::alt': 0,\n  'input::autocomplete': 0,\n  'input::checked': 0,\n  'input::disabled': 0,\n  'input::inputmode': 0,\n  'input::ismap': 0,\n  'input::list': 5,\n  'input::max': 0,\n  'input::maxlength': 0,\n  'input::min': 0,\n  'input::multiple': 0,\n  'input::name': 8,\n  'input::onblur': 2,\n  'input::onchange': 2,\n  'input::onfocus': 2,\n  'input::onselect': 2,\n  'input::pattern': 0,\n  'input::placeholder': 0,\n  'input::readonly': 0,\n  'input::required': 0,\n  'input::size': 0,\n  'input::src': 1,\n  'input::step': 0,\n  'input::type': 0,\n  'input::usemap': 11,\n  'input::value': 0,\n  'ins::cite': 1,\n  'ins::datetime': 0,\n  'label::accesskey': 0,\n  'label::for': 5,\n  'label::onblur': 2,\n  'label::onfocus': 2,\n  'legend::accesskey': 0,\n  'legend::align': 0,\n  'li::type': 0,\n  'li::value': 0,\n  'map::name': 7,\n  'menu::compact': 0,\n  'menu::label': 0,\n  'menu::type': 0,\n  'meter::high': 0,\n  'meter::low': 0,\n  'meter::max': 0,\n  'meter::min': 0,\n  'meter::optimum': 0,\n  'meter::value': 0,\n  'ol::compact': 0,\n  'ol::reversed': 0,\n  'ol::start': 0,\n  'ol::type': 0,\n  'optgroup::disabled': 0,\n  'optgroup::label': 0,\n  'option::disabled': 0,\n  'option::label': 0,\n  'option::selected': 0,\n  'option::value': 0,\n  'output::for': 6,\n  'output::name': 8,\n  'p::align': 0,\n  'pre::width': 0,\n  'progress::max': 0,\n  'progress::min': 0,\n  'progress::value': 0,\n  'q::cite': 1,\n  'select::autocomplete': 0,\n  'select::disabled': 0,\n  'select::multiple': 0,\n  'select::name': 8,\n  'select::onblur': 2,\n  'select::onchange': 2,\n  'select::onfocus': 2,\n  'select::required': 0,\n  'select::size': 0,\n  'source::type': 0,\n  'table::align': 0,\n  'table::bgcolor': 0,\n  'table::border': 0,\n  'table::cellpadding': 0,\n  'table::cellspacing': 0,\n  'table::frame': 0,\n  'table::rules': 0,\n  'table::summary': 0,\n  'table::width': 0,\n  'tbody::align': 0,\n  'tbody::char': 0,\n  'tbody::charoff': 0,\n  'tbody::valign': 0,\n  'td::abbr': 0,\n  'td::align': 0,\n  'td::axis': 0,\n  'td::bgcolor': 0,\n  'td::char': 0,\n  'td::charoff': 0,\n  'td::colspan': 0,\n  'td::headers': 6,\n  'td::height': 0,\n  'td::nowrap': 0,\n  'td::rowspan': 0,\n  'td::scope': 0,\n  'td::valign': 0,\n  'td::width': 0,\n  'textarea::accesskey': 0,\n  'textarea::autocomplete': 0,\n  'textarea::cols': 0,\n  'textarea::disabled': 0,\n  'textarea::inputmode': 0,\n  'textarea::name': 8,\n  'textarea::onblur': 2,\n  'textarea::onchange': 2,\n  'textarea::onfocus': 2,\n  'textarea::onselect': 2,\n  'textarea::placeholder': 0,\n  'textarea::readonly': 0,\n  'textarea::required': 0,\n  'textarea::rows': 0,\n  'textarea::wrap': 0,\n  'tfoot::align': 0,\n  'tfoot::char': 0,\n  'tfoot::charoff': 0,\n  'tfoot::valign': 0,\n  'th::abbr': 0,\n  'th::align': 0,\n  'th::axis': 0,\n  'th::bgcolor': 0,\n  'th::char': 0,\n  'th::charoff': 0,\n  'th::colspan': 0,\n  'th::headers': 6,\n  'th::height': 0,\n  'th::nowrap': 0,\n  'th::rowspan': 0,\n  'th::scope': 0,\n  'th::valign': 0,\n  'th::width': 0,\n  'thead::align': 0,\n  'thead::char': 0,\n  'thead::charoff': 0,\n  'thead::valign': 0,\n  'tr::align': 0,\n  'tr::bgcolor': 0,\n  'tr::char': 0,\n  'tr::charoff': 0,\n  'tr::valign': 0,\n  'track::default': 0,\n  'track::kind': 0,\n  'track::label': 0,\n  'track::srclang': 0,\n  'ul::compact': 0,\n  'ul::type': 0,\n  'video::controls': 0,\n  'video::height': 0,\n  'video::loop': 0,\n  'video::mediagroup': 5,\n  'video::muted': 0,\n  'video::poster': 1,\n  'video::preload': 0,\n  'video::src': 1,\n  'video::width': 0\n};\nhtml4[ 'ATTRIBS' ] = html4.ATTRIBS;\nhtml4.eflags = {\n  'OPTIONAL_ENDTAG': 1,\n  'EMPTY': 2,\n  'CDATA': 4,\n  'RCDATA': 8,\n  'UNSAFE': 16,\n  'FOLDABLE': 32,\n  'SCRIPT': 64,\n  'STYLE': 128,\n  'VIRTUALIZED': 256\n};\nhtml4[ 'eflags' ] = html4.eflags;\nhtml4.ELEMENTS = {\n  'a': 0,\n  'abbr': 0,\n  'acronym': 0,\n  'address': 0,\n  'applet': 272,\n  'area': 2,\n  'article': 0,\n  'aside': 0,\n  'audio': 0,\n  'b': 0,\n  'base': 274,\n  'basefont': 274,\n  'bdi': 0,\n  'bdo': 0,\n  'big': 0,\n  'blockquote': 0,\n  'body': 305,\n  'br': 2,\n  'button': 0,\n  'canvas': 0,\n  'caption': 0,\n  'center': 0,\n  'cite': 0,\n  'code': 0,\n  'col': 2,\n  'colgroup': 1,\n  'command': 2,\n  'data': 0,\n  'datalist': 0,\n  'dd': 1,\n  'del': 0,\n  'details': 0,\n  'dfn': 0,\n  'dialog': 272,\n  'dir': 0,\n  'div': 0,\n  'dl': 0,\n  'dt': 1,\n  'em': 0,\n  'fieldset': 0,\n  'figcaption': 0,\n  'figure': 0,\n  'font': 0,\n  'footer': 0,\n  'form': 0,\n  'frame': 274,\n  'frameset': 272,\n  'h1': 0,\n  'h2': 0,\n  'h3': 0,\n  'h4': 0,\n  'h5': 0,\n  'h6': 0,\n  'head': 305,\n  'header': 0,\n  'hgroup': 0,\n  'hr': 2,\n  'html': 305,\n  'i': 0,\n  'iframe': 4,\n  'img': 2,\n  'input': 2,\n  'ins': 0,\n  'isindex': 274,\n  'kbd': 0,\n  'keygen': 274,\n  'label': 0,\n  'legend': 0,\n  'li': 1,\n  'link': 274,\n  'map': 0,\n  'mark': 0,\n  'menu': 0,\n  'meta': 274,\n  'meter': 0,\n  'nav': 0,\n  'nobr': 0,\n  'noembed': 276,\n  'noframes': 276,\n  'noscript': 276,\n  'object': 272,\n  'ol': 0,\n  'optgroup': 0,\n  'option': 1,\n  'output': 0,\n  'p': 1,\n  'param': 274,\n  'pre': 0,\n  'progress': 0,\n  'q': 0,\n  's': 0,\n  'samp': 0,\n  'script': 84,\n  'section': 0,\n  'select': 0,\n  'small': 0,\n  'source': 2,\n  'span': 0,\n  'strike': 0,\n  'strong': 0,\n  'style': 148,\n  'sub': 0,\n  'summary': 0,\n  'sup': 0,\n  'table': 0,\n  'tbody': 1,\n  'td': 1,\n  'textarea': 8,\n  'tfoot': 1,\n  'th': 1,\n  'thead': 1,\n  'time': 0,\n  'title': 280,\n  'tr': 1,\n  'track': 2,\n  'tt': 0,\n  'u': 0,\n  'ul': 0,\n  'var': 0,\n  'video': 0,\n  'wbr': 2\n};\nhtml4[ 'ELEMENTS' ] = html4.ELEMENTS;\nhtml4.ELEMENT_DOM_INTERFACES = {\n  'a': 'HTMLAnchorElement',\n  'abbr': 'HTMLElement',\n  'acronym': 'HTMLElement',\n  'address': 'HTMLElement',\n  'applet': 'HTMLAppletElement',\n  'area': 'HTMLAreaElement',\n  'article': 'HTMLElement',\n  'aside': 'HTMLElement',\n  'audio': 'HTMLAudioElement',\n  'b': 'HTMLElement',\n  'base': 'HTMLBaseElement',\n  'basefont': 'HTMLBaseFontElement',\n  'bdi': 'HTMLElement',\n  'bdo': 'HTMLElement',\n  'big': 'HTMLElement',\n  'blockquote': 'HTMLQuoteElement',\n  'body': 'HTMLBodyElement',\n  'br': 'HTMLBRElement',\n  'button': 'HTMLButtonElement',\n  'canvas': 'HTMLCanvasElement',\n  'caption': 'HTMLTableCaptionElement',\n  'center': 'HTMLElement',\n  'cite': 'HTMLElement',\n  'code': 'HTMLElement',\n  'col': 'HTMLTableColElement',\n  'colgroup': 'HTMLTableColElement',\n  'command': 'HTMLCommandElement',\n  'data': 'HTMLElement',\n  'datalist': 'HTMLDataListElement',\n  'dd': 'HTMLElement',\n  'del': 'HTMLModElement',\n  'details': 'HTMLDetailsElement',\n  'dfn': 'HTMLElement',\n  'dialog': 'HTMLDialogElement',\n  'dir': 'HTMLDirectoryElement',\n  'div': 'HTMLDivElement',\n  'dl': 'HTMLDListElement',\n  'dt': 'HTMLElement',\n  'em': 'HTMLElement',\n  'fieldset': 'HTMLFieldSetElement',\n  'figcaption': 'HTMLElement',\n  'figure': 'HTMLElement',\n  'font': 'HTMLFontElement',\n  'footer': 'HTMLElement',\n  'form': 'HTMLFormElement',\n  'frame': 'HTMLFrameElement',\n  'frameset': 'HTMLFrameSetElement',\n  'h1': 'HTMLHeadingElement',\n  'h2': 'HTMLHeadingElement',\n  'h3': 'HTMLHeadingElement',\n  'h4': 'HTMLHeadingElement',\n  'h5': 'HTMLHeadingElement',\n  'h6': 'HTMLHeadingElement',\n  'head': 'HTMLHeadElement',\n  'header': 'HTMLElement',\n  'hgroup': 'HTMLElement',\n  'hr': 'HTMLHRElement',\n  'html': 'HTMLHtmlElement',\n  'i': 'HTMLElement',\n  'iframe': 'HTMLIFrameElement',\n  'img': 'HTMLImageElement',\n  'input': 'HTMLInputElement',\n  'ins': 'HTMLModElement',\n  'isindex': 'HTMLUnknownElement',\n  'kbd': 'HTMLElement',\n  'keygen': 'HTMLKeygenElement',\n  'label': 'HTMLLabelElement',\n  'legend': 'HTMLLegendElement',\n  'li': 'HTMLLIElement',\n  'link': 'HTMLLinkElement',\n  'map': 'HTMLMapElement',\n  'mark': 'HTMLElement',\n  'menu': 'HTMLMenuElement',\n  'meta': 'HTMLMetaElement',\n  'meter': 'HTMLMeterElement',\n  'nav': 'HTMLElement',\n  'nobr': 'HTMLElement',\n  'noembed': 'HTMLElement',\n  'noframes': 'HTMLElement',\n  'noscript': 'HTMLElement',\n  'object': 'HTMLObjectElement',\n  'ol': 'HTMLOListElement',\n  'optgroup': 'HTMLOptGroupElement',\n  'option': 'HTMLOptionElement',\n  'output': 'HTMLOutputElement',\n  'p': 'HTMLParagraphElement',\n  'param': 'HTMLParamElement',\n  'pre': 'HTMLPreElement',\n  'progress': 'HTMLProgressElement',\n  'q': 'HTMLQuoteElement',\n  's': 'HTMLElement',\n  'samp': 'HTMLElement',\n  'script': 'HTMLScriptElement',\n  'section': 'HTMLElement',\n  'select': 'HTMLSelectElement',\n  'small': 'HTMLElement',\n  'source': 'HTMLSourceElement',\n  'span': 'HTMLSpanElement',\n  'strike': 'HTMLElement',\n  'strong': 'HTMLElement',\n  'style': 'HTMLStyleElement',\n  'sub': 'HTMLElement',\n  'summary': 'HTMLElement',\n  'sup': 'HTMLElement',\n  'table': 'HTMLTableElement',\n  'tbody': 'HTMLTableSectionElement',\n  'td': 'HTMLTableDataCellElement',\n  'textarea': 'HTMLTextAreaElement',\n  'tfoot': 'HTMLTableSectionElement',\n  'th': 'HTMLTableHeaderCellElement',\n  'thead': 'HTMLTableSectionElement',\n  'time': 'HTMLTimeElement',\n  'title': 'HTMLTitleElement',\n  'tr': 'HTMLTableRowElement',\n  'track': 'HTMLTrackElement',\n  'tt': 'HTMLElement',\n  'u': 'HTMLElement',\n  'ul': 'HTMLUListElement',\n  'var': 'HTMLElement',\n  'video': 'HTMLVideoElement',\n  'wbr': 'HTMLElement'\n};\nhtml4[ 'ELEMENT_DOM_INTERFACES' ] = html4.ELEMENT_DOM_INTERFACES;\nhtml4.ueffects = {\n  'NOT_LOADED': 0,\n  'SAME_DOCUMENT': 1,\n  'NEW_DOCUMENT': 2\n};\nhtml4[ 'ueffects' ] = html4.ueffects;\nhtml4.URIEFFECTS = {\n  'a::href': 2,\n  'area::href': 2,\n  'audio::src': 1,\n  'blockquote::cite': 0,\n  'command::icon': 1,\n  'del::cite': 0,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 0,\n  'q::cite': 0,\n  'video::poster': 1,\n  'video::src': 1\n};\nhtml4[ 'URIEFFECTS' ] = html4.URIEFFECTS;\nhtml4.ltypes = {\n  'UNSANDBOXED': 2,\n  'SANDBOXED': 1,\n  'DATA': 0\n};\nhtml4[ 'ltypes' ] = html4.ltypes;\nhtml4.LOADERTYPES = {\n  'a::href': 2,\n  'area::href': 2,\n  'audio::src': 2,\n  'blockquote::cite': 2,\n  'command::icon': 1,\n  'del::cite': 2,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 2,\n  'q::cite': 2,\n  'video::poster': 1,\n  'video::src': 2\n};\nhtml4[ 'LOADERTYPES' ] = html4.LOADERTYPES;\n// export for Closure Compiler\nif (typeof window !== 'undefined') {\n}\n;\n// Copyright (C) 2006 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * An HTML sanitizer that can satisfy a variety of security policies.\n *\n * <p>\n * The HTML sanitizer is built around a SAX parser and HTML element and\n * attributes schemas.\n *\n * If the cssparser is loaded, inline styles are sanitized using the\n * css property and value schemas.  Else they are remove during\n * sanitization.\n *\n * If it exists, uses parseCssDeclarations, sanitizeCssProperty,  cssSchema\n *\n * @author mikesamuel@gmail.com\n * @author jasvir@gmail.com\n * \\@requires html4, URI\n * \\@overrides window\n * \\@provides html, html_sanitize\n */\n\n// The Turkish i seems to be a non-issue, but abort in case it is.\nif ('I'.toLowerCase() !== 'i') { throw 'I/i problem'; }\n\n/**\n * \\@namespace\n */\nvar html = (function(html4) {\n\n  // For closure compiler\n  var parseCssDeclarations, sanitizeCssProperty, cssSchema;\n  if ('undefined' !== typeof window) {\n    parseCssDeclarations = window['parseCssDeclarations'];\n    sanitizeCssProperty = window['sanitizeCssProperty'];\n    cssSchema = window['cssSchema'];\n  }\n\n  // The keys of this object must be 'quoted' or JSCompiler will mangle them!\n  // This is a partial list -- lookupEntity() uses the host browser's parser\n  // (when available) to implement full entity lookup.\n  // Note that entities are in general case-sensitive; the uppercase ones are\n  // explicitly defined by HTML5 (presumably as compatibility).\n  var ENTITIES = {\n    'lt': '<',\n    'LT': '<',\n    'gt': '>',\n    'GT': '>',\n    'amp': '&',\n    'AMP': '&',\n    'quot': '\"',\n    'apos': '\\'',\n    'nbsp': '\\u00A0'\n  };\n\n  // Patterns for types of entity/character reference names.\n  var decimalEscapeRe = /^#(\\d+)$/;\n  var hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;\n  // contains every entity per http://www.w3.org/TR/2011/WD-html5-20110113/named-character-references.html\n  var safeEntityNameRe = /^[A-Za-z][A-za-z0-9]+$/;\n  // Used as a hook to invoke the browser's entity parsing. <textarea> is used\n  // because its content is parsed for entities but not tags.\n  // TODO(kpreid): This retrieval is a kludge and leads to silent loss of\n  // functionality if the document isn't available.\n  var entityLookupElement =\n      ('undefined' !== typeof window && window['document'])\n          ? window['document'].createElement('textarea') : null;\n  /**\n   * Decodes an HTML entity.\n   *\n   * {\\@updoc\n   * $ lookupEntity('lt')\n   * # '<'\n   * $ lookupEntity('GT')\n   * # '>'\n   * $ lookupEntity('amp')\n   * # '&'\n   * $ lookupEntity('nbsp')\n   * # '\\xA0'\n   * $ lookupEntity('apos')\n   * # \"'\"\n   * $ lookupEntity('quot')\n   * # '\"'\n   * $ lookupEntity('#xa')\n   * # '\\n'\n   * $ lookupEntity('#10')\n   * # '\\n'\n   * $ lookupEntity('#x0a')\n   * # '\\n'\n   * $ lookupEntity('#010')\n   * # '\\n'\n   * $ lookupEntity('#x00A')\n   * # '\\n'\n   * $ lookupEntity('Pi')      // Known failure\n   * # '\\u03A0'\n   * $ lookupEntity('pi')      // Known failure\n   * # '\\u03C0'\n   * }\n   *\n   * @param {string} name the content between the '&' and the ';'.\n   * @return {string} a single unicode code-point as a string.\n   */\n  function lookupEntity(name) {\n    // TODO: entity lookup as specified by HTML5 actually depends on the\n    // presence of the \";\".\n    if (ENTITIES.hasOwnProperty(name)) { return ENTITIES[name]; }\n    var m = name.match(decimalEscapeRe);\n    if (m) {\n      return String.fromCharCode(parseInt(m[1], 10));\n    } else if (!!(m = name.match(hexEscapeRe))) {\n      return String.fromCharCode(parseInt(m[1], 16));\n    } else if (entityLookupElement && safeEntityNameRe.test(name)) {\n      entityLookupElement.innerHTML = '&' + name + ';';\n      var text = entityLookupElement.textContent;\n      ENTITIES[name] = text;\n      return text;\n    } else {\n      return '&' + name + ';';\n    }\n  }\n\n  function decodeOneEntity(_, name) {\n    return lookupEntity(name);\n  }\n\n  var nulRe = /\\0/g;\n  function stripNULs(s) {\n    return s.replace(nulRe, '');\n  }\n\n  var ENTITY_RE_1 = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/g;\n  var ENTITY_RE_2 = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/;\n  /**\n   * The plain text of a chunk of HTML CDATA which possibly containing.\n   *\n   * {\\@updoc\n   * $ unescapeEntities('')\n   * # ''\n   * $ unescapeEntities('hello World!')\n   * # 'hello World!'\n   * $ unescapeEntities('1 &lt; 2 &amp;&AMP; 4 &gt; 3&#10;')\n   * # '1 < 2 && 4 > 3\\n'\n   * $ unescapeEntities('&lt;&lt <- unfinished entity&gt;')\n   * # '<&lt <- unfinished entity>'\n   * $ unescapeEntities('/foo?bar=baz&copy=true')  // & often unescaped in URLS\n   * # '/foo?bar=baz&copy=true'\n   * $ unescapeEntities('pi=&pi;&#x3c0;, Pi=&Pi;\\u03A0') // FIXME: known failure\n   * # 'pi=\\u03C0\\u03c0, Pi=\\u03A0\\u03A0'\n   * }\n   *\n   * @param {string} s a chunk of HTML CDATA.  It must not start or end inside\n   *     an HTML entity.\n   */\n  function unescapeEntities(s) {\n    return s.replace(ENTITY_RE_1, decodeOneEntity);\n  }\n\n  var ampRe = /&/g;\n  var looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;\n  var ltRe = /[<]/g;\n  var gtRe = />/g;\n  var quotRe = /\\\"/g;\n\n  /**\n   * Escapes HTML special characters in attribute values.\n   *\n   * {\\@updoc\n   * $ escapeAttrib('')\n   * # ''\n   * $ escapeAttrib('\"<<&==&>>\"')  // Do not just escape the first occurrence.\n   * # '&#34;&lt;&lt;&amp;&#61;&#61;&amp;&gt;&gt;&#34;'\n   * $ escapeAttrib('Hello <World>!')\n   * # 'Hello &lt;World&gt;!'\n   * }\n   */\n  function escapeAttrib(s) {\n    return ('' + s).replace(ampRe, '&amp;').replace(ltRe, '&lt;')\n        .replace(gtRe, '&gt;').replace(quotRe, '&#34;');\n  }\n\n  /**\n   * Escape entities in RCDATA that can be escaped without changing the meaning.\n   * {\\@updoc\n   * $ normalizeRCData('1 < 2 &&amp; 3 > 4 &amp;& 5 &lt; 7&8')\n   * # '1 &lt; 2 &amp;&amp; 3 &gt; 4 &amp;&amp; 5 &lt; 7&amp;8'\n   * }\n   */\n  function normalizeRCData(rcdata) {\n    return rcdata\n        .replace(looseAmpRe, '&amp;$1')\n        .replace(ltRe, '&lt;')\n        .replace(gtRe, '&gt;');\n  }\n\n  // TODO(felix8a): validate sanitizer regexs against the HTML5 grammar at\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html\n\n  // We initially split input so that potentially meaningful characters\n  // like '<' and '>' are separate tokens, using a fast dumb process that\n  // ignores quoting.  Then we walk that token stream, and when we see a\n  // '<' that's the start of a tag, we use ATTR_RE to extract tag\n  // attributes from the next token.  That token will never have a '>'\n  // character.  However, it might have an unbalanced quote character, and\n  // when we see that, we combine additional tokens to balance the quote.\n\n  var ATTR_RE = new RegExp(\n    '^\\\\s*' +\n    '(\\\\[[-.:\\\\w]+\\\\]|[-.:\\\\w]+)'  +    // 1 = Attribute name\n    '(?:' + (\n      '\\\\s*(=)\\\\s*' +           // 2 = Is there a value?\n      '(' + (                   // 3 = Attribute value\n        // TODO(felix8a): maybe use backref to match quotes\n        '(\\\")[^\\\"]*(\\\"|$)' +    // 4, 5 = Double-quoted string\n        '|' +\n        '(\\')[^\\']*(\\'|$)' +    // 6, 7 = Single-quoted string\n        '|' +\n        // Positive lookahead to prevent interpretation of\n        // <foo a= b=c> as <foo a='b=c'>\n        // TODO(felix8a): might be able to drop this case\n        '(?=[a-z][-\\\\w]*\\\\s*=)' +\n        '|' +\n        // Unquoted value that isn't an attribute name\n        // (since we didn't match the positive lookahead above)\n        '[^\\\"\\'\\\\s]*' ) +\n      ')' ) +\n    ')?',\n    'i');\n\n  // false on IE<=8, true on most other browsers\n  var splitWillCapture = ('a,b'.split(/(,)/).length === 3);\n\n  // bitmask for tags with special parsing, like <script> and <textarea>\n  var EFLAGS_TEXT = html4.eflags['CDATA'] | html4.eflags['RCDATA'];\n\n  /**\n   * Given a SAX-like event handler, produce a function that feeds those\n   * events and a parameter to the event handler.\n   *\n   * The event handler has the form:{@code\n   * {\n   *   // Name is an upper-case HTML tag name.  Attribs is an array of\n   *   // alternating upper-case attribute names, and attribute values.  The\n   *   // attribs array is reused by the parser.  Param is the value passed to\n   *   // the saxParser.\n   *   startTag: function (name, attribs, param) { ... },\n   *   endTag:   function (name, param) { ... },\n   *   pcdata:   function (text, param) { ... },\n   *   rcdata:   function (text, param) { ... },\n   *   cdata:    function (text, param) { ... },\n   *   startDoc: function (param) { ... },\n   *   endDoc:   function (param) { ... }\n   * }}\n   *\n   * @param {Object} handler a record containing event handlers.\n   * @return {function(string, Object)} A function that takes a chunk of HTML\n   *     and a parameter.  The parameter is passed on to the handler methods.\n   */\n  function makeSaxParser(handler) {\n    // Accept quoted or unquoted keys (Closure compat)\n    var hcopy = {\n      cdata: handler.cdata || handler['cdata'],\n      comment: handler.comment || handler['comment'],\n      endDoc: handler.endDoc || handler['endDoc'],\n      endTag: handler.endTag || handler['endTag'],\n      pcdata: handler.pcdata || handler['pcdata'],\n      rcdata: handler.rcdata || handler['rcdata'],\n      startDoc: handler.startDoc || handler['startDoc'],\n      startTag: handler.startTag || handler['startTag']\n    };\n    return function(htmlText, param) {\n      return parse(htmlText, hcopy, param);\n    };\n  }\n\n  // Parsing strategy is to split input into parts that might be lexically\n  // meaningful (every \">\" becomes a separate part), and then recombine\n  // parts if we discover they're in a different context.\n\n  // TODO(felix8a): Significant performance regressions from -legacy,\n  // tested on\n  //    Chrome 18.0\n  //    Firefox 11.0\n  //    IE 6, 7, 8, 9\n  //    Opera 11.61\n  //    Safari 5.1.3\n  // Many of these are unusual patterns that are linearly slower and still\n  // pretty fast (eg 1ms to 5ms), so not necessarily worth fixing.\n\n  // TODO(felix8a): \"<script> && && && ... <\\/script>\" is slower on all\n  // browsers.  The hotspot is htmlSplit.\n\n  // TODO(felix8a): \"<p title='>>>>...'><\\/p>\" is slower on all browsers.\n  // This is partly htmlSplit, but the hotspot is parseTagAndAttrs.\n\n  // TODO(felix8a): \"<a><\\/a><a><\\/a>...\" is slower on IE9.\n  // \"<a>1<\\/a><a>1<\\/a>...\" is faster, \"<a><\\/a>2<a><\\/a>2...\" is faster.\n\n  // TODO(felix8a): \"<p<p<p...\" is slower on IE[6-8]\n\n  var continuationMarker = {};\n  function parse(htmlText, handler, param) {\n    var m, p, tagName;\n    var parts = htmlSplit(htmlText);\n    var state = {\n      noMoreGT: false,\n      noMoreEndComments: false\n    };\n    parseCPS(handler, parts, 0, state, param);\n  }\n\n  function continuationMaker(h, parts, initial, state, param) {\n    return function () {\n      parseCPS(h, parts, initial, state, param);\n    };\n  }\n\n  function parseCPS(h, parts, initial, state, param) {\n    try {\n      if (h.startDoc && initial == 0) { h.startDoc(param); }\n      var m, p, tagName;\n      for (var pos = initial, end = parts.length; pos < end;) {\n        var current = parts[pos++];\n        var next = parts[pos];\n        switch (current) {\n        case '&':\n          if (ENTITY_RE_2.test(next)) {\n            if (h.pcdata) {\n              h.pcdata('&' + next, param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n            pos++;\n          } else {\n            if (h.pcdata) { h.pcdata(\"&amp;\", param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<\\/':\n          if ((m = /^([-\\w:]+)[^\\'\\\"]*/.exec(next))) {\n            if (m[0].length === next.length && parts[pos + 1] === '>') {\n              // fast case, no attribute parsing needed\n              pos += 2;\n              tagName = m[1].toLowerCase();\n              if (h.endTag) {\n                h.endTag(tagName, param, continuationMarker,\n                  continuationMaker(h, parts, pos, state, param));\n              }\n            } else {\n              // slow case, need to parse attributes\n              // TODO(felix8a): do we really care about misparsing this?\n              pos = parseEndTag(\n                parts, pos, h, param, continuationMarker, state);\n            }\n          } else {\n            if (h.pcdata) {\n              h.pcdata('&lt;/', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<':\n          if (m = /^([-\\w:]+)\\s*\\/?/.exec(next)) {\n            if (m[0].length === next.length && parts[pos + 1] === '>') {\n              // fast case, no attribute parsing needed\n              pos += 2;\n              tagName = m[1].toLowerCase();\n              if (h.startTag) {\n                h.startTag(tagName, [], param, continuationMarker,\n                  continuationMaker(h, parts, pos, state, param));\n              }\n              // tags like <script> and <textarea> have special parsing\n              var eflags = html4.ELEMENTS[tagName];\n              if (eflags & EFLAGS_TEXT) {\n                var tag = { name: tagName, next: pos, eflags: eflags };\n                pos = parseText(\n                  parts, tag, h, param, continuationMarker, state);\n              }\n            } else {\n              // slow case, need to parse attributes\n              pos = parseStartTag(\n                parts, pos, h, param, continuationMarker, state);\n            }\n          } else {\n            if (h.pcdata) {\n              h.pcdata('&lt;', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<\\!--':\n          // The pathological case is n copies of '<\\!--' without '-->', and\n          // repeated failure to find '-->' is quadratic.  We avoid that by\n          // remembering when search for '-->' fails.\n          if (!state.noMoreEndComments) {\n            // A comment <\\!--x--> is split into three tokens:\n            //   '<\\!--', 'x--', '>'\n            // We want to find the next '>' token that has a preceding '--'.\n            // pos is at the 'x--'.\n            for (p = pos + 1; p < end; p++) {\n              if (parts[p] === '>' && /--$/.test(parts[p - 1])) { break; }\n            }\n            if (p < end) {\n              if (h.comment) {\n                var comment = parts.slice(pos, p).join('');\n                h.comment(\n                  comment.substr(0, comment.length - 2), param,\n                  continuationMarker,\n                  continuationMaker(h, parts, p + 1, state, param));\n              }\n              pos = p + 1;\n            } else {\n              state.noMoreEndComments = true;\n            }\n          }\n          if (state.noMoreEndComments) {\n            if (h.pcdata) {\n              h.pcdata('&lt;!--', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<\\!':\n          if (!/^\\w/.test(next)) {\n            if (h.pcdata) {\n              h.pcdata('&lt;!', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          } else {\n            // similar to noMoreEndComment logic\n            if (!state.noMoreGT) {\n              for (p = pos + 1; p < end; p++) {\n                if (parts[p] === '>') { break; }\n              }\n              if (p < end) {\n                pos = p + 1;\n              } else {\n                state.noMoreGT = true;\n              }\n            }\n            if (state.noMoreGT) {\n              if (h.pcdata) {\n                h.pcdata('&lt;!', param, continuationMarker,\n                  continuationMaker(h, parts, pos, state, param));\n              }\n            }\n          }\n          break;\n        case '<?':\n          // similar to noMoreEndComment logic\n          if (!state.noMoreGT) {\n            for (p = pos + 1; p < end; p++) {\n              if (parts[p] === '>') { break; }\n            }\n            if (p < end) {\n              pos = p + 1;\n            } else {\n              state.noMoreGT = true;\n            }\n          }\n          if (state.noMoreGT) {\n            if (h.pcdata) {\n              h.pcdata('&lt;?', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '>':\n          if (h.pcdata) {\n            h.pcdata(\"&gt;\", param, continuationMarker,\n              continuationMaker(h, parts, pos, state, param));\n          }\n          break;\n        case '':\n          break;\n        default:\n          if (h.pcdata) {\n            h.pcdata(current, param, continuationMarker,\n              continuationMaker(h, parts, pos, state, param));\n          }\n          break;\n        }\n      }\n      if (h.endDoc) { h.endDoc(param); }\n    } catch (e) {\n      if (e !== continuationMarker) { throw e; }\n    }\n  }\n\n  // Split str into parts for the html parser.\n  function htmlSplit(str) {\n    // can't hoist this out of the function because of the re.exec loop.\n    var re = /(<\\/|<\\!--|<[!?]|[&<>])/g;\n    str += '';\n    if (splitWillCapture) {\n      return str.split(re);\n    } else {\n      var parts = [];\n      var lastPos = 0;\n      var m;\n      while ((m = re.exec(str)) !== null) {\n        parts.push(str.substring(lastPos, m.index));\n        parts.push(m[0]);\n        lastPos = m.index + m[0].length;\n      }\n      parts.push(str.substring(lastPos));\n      return parts;\n    }\n  }\n\n  function parseEndTag(parts, pos, h, param, continuationMarker, state) {\n    var tag = parseTagAndAttrs(parts, pos);\n    // drop unclosed tags\n    if (!tag) { return parts.length; }\n    if (h.endTag) {\n      h.endTag(tag.name, param, continuationMarker,\n        continuationMaker(h, parts, pos, state, param));\n    }\n    return tag.next;\n  }\n\n  function parseStartTag(parts, pos, h, param, continuationMarker, state) {\n    var tag = parseTagAndAttrs(parts, pos);\n    // drop unclosed tags\n    if (!tag) { return parts.length; }\n    if (h.startTag) {\n      h.startTag(tag.name, tag.attrs, param, continuationMarker,\n        continuationMaker(h, parts, tag.next, state, param));\n    }\n    // tags like <script> and <textarea> have special parsing\n    if (tag.eflags & EFLAGS_TEXT) {\n      return parseText(parts, tag, h, param, continuationMarker, state);\n    } else {\n      return tag.next;\n    }\n  }\n\n  var endTagRe = {};\n\n  // Tags like <script> and <textarea> are flagged as CDATA or RCDATA,\n  // which means everything is text until we see the correct closing tag.\n  function parseText(parts, tag, h, param, continuationMarker, state) {\n    var end = parts.length;\n    if (!endTagRe.hasOwnProperty(tag.name)) {\n      endTagRe[tag.name] = new RegExp('^' + tag.name + '(?:[\\\\s\\\\/]|$)', 'i');\n    }\n    var re = endTagRe[tag.name];\n    var first = tag.next;\n    var p = tag.next + 1;\n    for (; p < end; p++) {\n      if (parts[p - 1] === '<\\/' && re.test(parts[p])) { break; }\n    }\n    if (p < end) { p -= 1; }\n    var buf = parts.slice(first, p).join('');\n    if (tag.eflags & html4.eflags['CDATA']) {\n      if (h.cdata) {\n        h.cdata(buf, param, continuationMarker,\n          continuationMaker(h, parts, p, state, param));\n      }\n    } else if (tag.eflags & html4.eflags['RCDATA']) {\n      if (h.rcdata) {\n        h.rcdata(normalizeRCData(buf), param, continuationMarker,\n          continuationMaker(h, parts, p, state, param));\n      }\n    } else {\n      throw new Error('bug');\n    }\n    return p;\n  }\n\n  // at this point, parts[pos-1] is either \"<\" or \"<\\/\".\n  function parseTagAndAttrs(parts, pos) {\n    var m = /^([-\\w:]+)/.exec(parts[pos]);\n    var tag = {};\n    tag.name = m[1].toLowerCase();\n    tag.eflags = html4.ELEMENTS[tag.name];\n    var buf = parts[pos].substr(m[0].length);\n    // Find the next '>'.  We optimistically assume this '>' is not in a\n    // quoted context, and further down we fix things up if it turns out to\n    // be quoted.\n    var p = pos + 1;\n    var end = parts.length;\n    for (; p < end; p++) {\n      if (parts[p] === '>') { break; }\n      buf += parts[p];\n    }\n    if (end <= p) { return void 0; }\n    var attrs = [];\n    while (buf !== '') {\n      m = ATTR_RE.exec(buf);\n      if (!m) {\n        // No attribute found: skip garbage\n        buf = buf.replace(/^[\\s\\S][^a-z\\s]*/, '');\n\n      } else if ((m[4] && !m[5]) || (m[6] && !m[7])) {\n        // Unterminated quote: slurp to the next unquoted '>'\n        var quote = m[4] || m[6];\n        var sawQuote = false;\n        var abuf = [buf, parts[p++]];\n        for (; p < end; p++) {\n          if (sawQuote) {\n            if (parts[p] === '>') { break; }\n          } else if (0 <= parts[p].indexOf(quote)) {\n            sawQuote = true;\n          }\n          abuf.push(parts[p]);\n        }\n        // Slurp failed: lose the garbage\n        if (end <= p) { break; }\n        // Otherwise retry attribute parsing\n        buf = abuf.join('');\n        continue;\n\n      } else {\n        // We have an attribute\n        var aName = m[1].toLowerCase();\n        var aValue = m[2] ? decodeValue(m[3]) : '';\n        attrs.push(aName, aValue);\n        buf = buf.substr(m[0].length);\n      }\n    }\n    tag.attrs = attrs;\n    tag.next = p + 1;\n    return tag;\n  }\n\n  function decodeValue(v) {\n    var q = v.charCodeAt(0);\n    if (q === 0x22 || q === 0x27) { // \" or '\n      v = v.substr(1, v.length - 2);\n    }\n    return unescapeEntities(stripNULs(v));\n  }\n\n  /**\n   * Returns a function that strips unsafe tags and attributes from html.\n   * @param {function(string, Array.<string>): ?Array.<string>} tagPolicy\n   *     A function that takes (tagName, attribs[]), where tagName is a key in\n   *     html4.ELEMENTS and attribs is an array of alternating attribute names\n   *     and values.  It should return a record (as follows), or null to delete\n   *     the element.  It's okay for tagPolicy to modify the attribs array,\n   *     but the same array is reused, so it should not be held between calls.\n   *     Record keys:\n   *        attribs: (required) Sanitized attributes array.\n   *        tagName: Replacement tag name.\n   * @return {function(string, Array)} A function that sanitizes a string of\n   *     HTML and appends result strings to the second argument, an array.\n   */\n  function makeHtmlSanitizer(tagPolicy) {\n    var stack;\n    var ignoring;\n    var emit = function (text, out) {\n      if (!ignoring) { out.push(text); }\n    };\n    return makeSaxParser({\n      'startDoc': function(_) {\n        stack = [];\n        ignoring = false;\n      },\n      'startTag': function(tagNameOrig, attribs, out) {\n        if (ignoring) { return; }\n        if (!html4.ELEMENTS.hasOwnProperty(tagNameOrig)) { return; }\n        var eflagsOrig = html4.ELEMENTS[tagNameOrig];\n        if (eflagsOrig & html4.eflags['FOLDABLE']) {\n          return;\n        }\n\n        var decision = tagPolicy(tagNameOrig, attribs);\n        if (!decision) {\n          ignoring = !(eflagsOrig & html4.eflags['EMPTY']);\n          return;\n        } else if (typeof decision !== 'object') {\n          throw new Error('tagPolicy did not return object (old API?)');\n        }\n        if ('attribs' in decision) {\n          attribs = decision['attribs'];\n        } else {\n          throw new Error('tagPolicy gave no attribs');\n        }\n        var eflagsRep;\n        var tagNameRep;\n        if ('tagName' in decision) {\n          tagNameRep = decision['tagName'];\n          eflagsRep = html4.ELEMENTS[tagNameRep];\n        } else {\n          tagNameRep = tagNameOrig;\n          eflagsRep = eflagsOrig;\n        }\n        // TODO(mikesamuel): relying on tagPolicy not to insert unsafe\n        // attribute names.\n\n        // If this is an optional-end-tag element and either this element or its\n        // previous like sibling was rewritten, then insert a close tag to\n        // preserve structure.\n        if (eflagsOrig & html4.eflags['OPTIONAL_ENDTAG']) {\n          var onStack = stack[stack.length - 1];\n          if (onStack && onStack.orig === tagNameOrig &&\n              (onStack.rep !== tagNameRep || tagNameOrig !== tagNameRep)) {\n                out.push('<\\/', onStack.rep, '>');\n          }\n        }\n\n        if (!(eflagsOrig & html4.eflags['EMPTY'])) {\n          stack.push({orig: tagNameOrig, rep: tagNameRep});\n        }\n\n        out.push('<', tagNameRep);\n        for (var i = 0, n = attribs.length; i < n; i += 2) {\n          var attribName = attribs[i],\n              value = attribs[i + 1];\n          if (value !== null && value !== void 0) {\n            out.push(' ', attribName, '=\"', escapeAttrib(value), '\"');\n          }\n        }\n        out.push('>');\n\n        if ((eflagsOrig & html4.eflags['EMPTY'])\n            && !(eflagsRep & html4.eflags['EMPTY'])) {\n          // replacement is non-empty, synthesize end tag\n          out.push('<\\/', tagNameRep, '>');\n        }\n      },\n      'endTag': function(tagName, out) {\n        if (ignoring) {\n          ignoring = false;\n          return;\n        }\n        if (!html4.ELEMENTS.hasOwnProperty(tagName)) { return; }\n        var eflags = html4.ELEMENTS[tagName];\n        if (!(eflags & (html4.eflags['EMPTY'] | html4.eflags['FOLDABLE']))) {\n          var index;\n          if (eflags & html4.eflags['OPTIONAL_ENDTAG']) {\n            for (index = stack.length; --index >= 0;) {\n              var stackElOrigTag = stack[index].orig;\n              if (stackElOrigTag === tagName) { break; }\n              if (!(html4.ELEMENTS[stackElOrigTag] &\n                    html4.eflags['OPTIONAL_ENDTAG'])) {\n                // Don't pop non optional end tags looking for a match.\n                return;\n              }\n            }\n          } else {\n            for (index = stack.length; --index >= 0;) {\n              if (stack[index].orig === tagName) { break; }\n            }\n          }\n          if (index < 0) { return; }  // Not opened.\n          for (var i = stack.length; --i > index;) {\n            var stackElRepTag = stack[i].rep;\n            if (!(html4.ELEMENTS[stackElRepTag] &\n                  html4.eflags['OPTIONAL_ENDTAG'])) {\n              out.push('<\\/', stackElRepTag, '>');\n            }\n          }\n          if (index < stack.length) {\n            tagName = stack[index].rep;\n          }\n          stack.length = index;\n          out.push('<\\/', tagName, '>');\n        }\n      },\n      'pcdata': emit,\n      'rcdata': emit,\n      'cdata': emit,\n      'endDoc': function(out) {\n        for (; stack.length; stack.length--) {\n          out.push('<\\/', stack[stack.length - 1].rep, '>');\n        }\n      }\n    });\n  }\n\n  var ALLOWED_URI_SCHEMES = /^(?:https?|mailto)$/i;\n\n  function safeUri(uri, effect, ltype, hints, naiveUriRewriter) {\n    if (!naiveUriRewriter) { return null; }\n    try {\n      var parsed = URI.parse('' + uri);\n      if (parsed) {\n        if (!parsed.hasScheme() ||\n            ALLOWED_URI_SCHEMES.test(parsed.getScheme())) {\n          var safe = naiveUriRewriter(parsed, effect, ltype, hints);\n          return safe ? safe.toString() : null;\n        }\n      }\n    } catch (e) {\n      return null;\n    }\n    return null;\n  }\n\n  function log(logger, tagName, attribName, oldValue, newValue) {\n    if (!attribName) {\n      logger(tagName + \" removed\", {\n        change: \"removed\",\n        tagName: tagName\n      });\n    }\n    if (oldValue !== newValue) {\n      var changed = \"changed\";\n      if (oldValue && !newValue) {\n        changed = \"removed\";\n      } else if (!oldValue && newValue)  {\n        changed = \"added\";\n      }\n      logger(tagName + \".\" + attribName + \" \" + changed, {\n        change: changed,\n        tagName: tagName,\n        attribName: attribName,\n        oldValue: oldValue,\n        newValue: newValue\n      });\n    }\n  }\n\n  function lookupAttribute(map, tagName, attribName) {\n    var attribKey;\n    attribKey = tagName + '::' + attribName;\n    if (map.hasOwnProperty(attribKey)) {\n      return map[attribKey];\n    }\n    attribKey = '*::' + attribName;\n    if (map.hasOwnProperty(attribKey)) {\n      return map[attribKey];\n    }\n    return void 0;\n  }\n  function getAttributeType(tagName, attribName) {\n    return lookupAttribute(html4.ATTRIBS, tagName, attribName);\n  }\n  function getLoaderType(tagName, attribName) {\n    return lookupAttribute(html4.LOADERTYPES, tagName, attribName);\n  }\n  function getUriEffect(tagName, attribName) {\n    return lookupAttribute(html4.URIEFFECTS, tagName, attribName);\n  }\n\n  /**\n   * Sanitizes attributes on an HTML tag.\n   * @param {string} tagName An HTML tag name in lowercase.\n   * @param {Array.<?string>} attribs An array of alternating names and values.\n   * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n   *     apply to URI attributes; it can return a new string value, or null to\n   *     delete the attribute.  If unspecified, URI attributes are deleted.\n   * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n   *     to attributes containing HTML names, element IDs, and space-separated\n   *     lists of classes; it can return a new string value, or null to delete\n   *     the attribute.  If unspecified, these attributes are kept unchanged.\n   * @return {Array.<?string>} The sanitized attributes as a list of alternating\n   *     names and values, where a null value means to omit the attribute.\n   */\n  function sanitizeAttribs(tagName, attribs,\n    opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    // TODO(felix8a): it's obnoxious that domado duplicates much of this\n    // TODO(felix8a): maybe consistently enforce constraints like target=\n    for (var i = 0; i < attribs.length; i += 2) {\n      var attribName = attribs[i];\n      var value = attribs[i + 1];\n      var oldValue = value;\n      var atype = null, attribKey;\n      if ((attribKey = tagName + '::' + attribName,\n           html4.ATTRIBS.hasOwnProperty(attribKey)) ||\n          (attribKey = '*::' + attribName,\n           html4.ATTRIBS.hasOwnProperty(attribKey))) {\n        atype = html4.ATTRIBS[attribKey];\n      }\n      if (atype !== null) {\n        switch (atype) {\n          case html4.atype['NONE']: break;\n          case html4.atype['SCRIPT']:\n            value = null;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['STYLE']:\n            if ('undefined' === typeof parseCssDeclarations) {\n              value = null;\n              if (opt_logger) {\n                log(opt_logger, tagName, attribName, oldValue, value);\n\t      }\n              break;\n            }\n            var sanitizedDeclarations = [];\n            parseCssDeclarations(\n                value,\n                {\n                  'declaration': function (property, tokens) {\n                    var normProp = property.toLowerCase();\n                    sanitizeCssProperty(\n                        normProp, tokens,\n                        opt_naiveUriRewriter\n                        ? function (url) {\n                            return safeUri(\n                                url, html4.ueffects.SAME_DOCUMENT,\n                                html4.ltypes.SANDBOXED,\n                                {\n                                  \"TYPE\": \"CSS\",\n                                  \"CSS_PROP\": normProp\n                                }, opt_naiveUriRewriter);\n                          }\n                        : null);\n                    if (tokens.length) {\n                      sanitizedDeclarations.push(\n                          normProp + ': ' + tokens.join(' '));\n                    }\n                  }\n                });\n            value = sanitizedDeclarations.length > 0 ?\n              sanitizedDeclarations.join(' ; ') : null;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['ID']:\n          case html4.atype['IDREF']:\n          case html4.atype['IDREFS']:\n          case html4.atype['GLOBAL_NAME']:\n          case html4.atype['LOCAL_NAME']:\n          case html4.atype['CLASSES']:\n            value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['URI']:\n            value = safeUri(value,\n              getUriEffect(tagName, attribName),\n              getLoaderType(tagName, attribName),\n              {\n                \"TYPE\": \"MARKUP\",\n                \"XML_ATTR\": attribName,\n                \"XML_TAG\": tagName\n              }, opt_naiveUriRewriter);\n              if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['URI_FRAGMENT']:\n            if (value && '#' === value.charAt(0)) {\n              value = value.substring(1);  // remove the leading '#'\n              value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n              if (value !== null && value !== void 0) {\n                value = '#' + value;  // restore the leading '#'\n              }\n            } else {\n              value = null;\n            }\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          default:\n            value = null;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n        }\n      } else {\n        value = null;\n        if (opt_logger) {\n          log(opt_logger, tagName, attribName, oldValue, value);\n        }\n      }\n      attribs[i + 1] = value;\n    }\n    return attribs;\n  }\n\n  /**\n   * Creates a tag policy that omits all tags marked UNSAFE in html4-defs.js\n   * and applies the default attribute sanitizer with the supplied policy for\n   * URI attributes and NMTOKEN attributes.\n   * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n   *     apply to URI attributes.  If not given, URI attributes are deleted.\n   * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n   *     to attributes containing HTML names, element IDs, and space-separated\n   *     lists of classes.  If not given, such attributes are left unchanged.\n   * @return {function(string, Array.<?string>)} A tagPolicy suitable for\n   *     passing to html.sanitize.\n   */\n  function makeTagPolicy(\n    opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    return function(tagName, attribs) {\n      if (!(html4.ELEMENTS[tagName] & html4.eflags['UNSAFE'])) {\n        return {\n          'attribs': sanitizeAttribs(tagName, attribs,\n            opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger)\n        };\n      } else {\n        if (opt_logger) {\n          log(opt_logger, tagName, undefined, undefined, undefined);\n        }\n      }\n    };\n  }\n\n  /**\n   * Sanitizes HTML tags and attributes according to a given policy.\n   * @param {string} inputHtml The HTML to sanitize.\n   * @param {function(string, Array.<?string>)} tagPolicy A function that\n   *     decides which tags to accept and sanitizes their attributes (see\n   *     makeHtmlSanitizer above for details).\n   * @return {string} The sanitized HTML.\n   */\n  function sanitizeWithPolicy(inputHtml, tagPolicy) {\n    var outputArray = [];\n    makeHtmlSanitizer(tagPolicy)(inputHtml, outputArray);\n    return outputArray.join('');\n  }\n\n  /**\n   * Strips unsafe tags and attributes from HTML.\n   * @param {string} inputHtml The HTML to sanitize.\n   * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n   *     apply to URI attributes.  If not given, URI attributes are deleted.\n   * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n   *     to attributes containing HTML names, element IDs, and space-separated\n   *     lists of classes.  If not given, such attributes are left unchanged.\n   */\n  function sanitize(inputHtml,\n    opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    var tagPolicy = makeTagPolicy(\n      opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger);\n    return sanitizeWithPolicy(inputHtml, tagPolicy);\n  }\n\n  // Export both quoted and unquoted names for Closure linkage.\n  var html = {};\n  html.escapeAttrib = html['escapeAttrib'] = escapeAttrib;\n  html.makeHtmlSanitizer = html['makeHtmlSanitizer'] = makeHtmlSanitizer;\n  html.makeSaxParser = html['makeSaxParser'] = makeSaxParser;\n  html.makeTagPolicy = html['makeTagPolicy'] = makeTagPolicy;\n  html.normalizeRCData = html['normalizeRCData'] = normalizeRCData;\n  html.sanitize = html['sanitize'] = sanitize;\n  html.sanitizeAttribs = html['sanitizeAttribs'] = sanitizeAttribs;\n  html.sanitizeWithPolicy = html['sanitizeWithPolicy'] = sanitizeWithPolicy;\n  html.unescapeEntities = html['unescapeEntities'] = unescapeEntities;\n  return html;\n})(html4);\n\nvar html_sanitize = html['sanitize'];\n\n// Exports for Closure compiler.  Note this file is also cajoled\n// for domado and run in an environment without 'window'\nif (typeof window !== 'undefined') {\n}\n\nexport var htmlSanitizer = html;\n","/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\n\n/*global define: false Mustache: true*/\n\n(function defineMustache (global, factory) {\n  if (typeof exports === 'object' && exports && typeof exports.nodeName !== 'string') {\n    factory(exports); // CommonJS\n  } else if (typeof define === 'function' && define.amd) {\n    define(['exports'], factory); // AMD\n  } else {\n    global.Mustache = {};\n    factory(Mustache); // script, wsh, asp\n  }\n}(this, function mustacheFactory (mustache) {\n\n  var objectToString = Object.prototype.toString;\n  var isArray = Array.isArray || function isArrayPolyfill (object) {\n    return objectToString.call(object) === '[object Array]';\n  };\n\n  function isFunction (object) {\n    return typeof object === 'function';\n  }\n\n  /**\n   * More correct typeof string handling array\n   * which normally returns typeof 'object'\n   */\n  function typeStr (obj) {\n    return isArray(obj) ? 'array' : typeof obj;\n  }\n\n  function escapeRegExp (string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n  }\n\n  /**\n   * Null safe way of checking whether or not an object,\n   * including its prototype, has a given property\n   */\n  function hasProperty (obj, propName) {\n    return obj != null && typeof obj === 'object' &&\n        Object.prototype.hasOwnProperty.call(obj, propName);\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var regExpTest = RegExp.prototype.test;\n  function testRegExp (re, string) {\n    return regExpTest.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace (string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  };\n\n  function escapeHtml (string) {\n    return String(string).replace(/[&<>\"'`=\\/]/g, function fromEntityMap (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   */\n  function parseTemplate (template, tags) {\n    if (!template)\n      return [];\n\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace () {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags (tagsToCompile) {\n      if (typeof tagsToCompile === 'string')\n        tagsToCompile = tagsToCompile.split(spaceRe, 2);\n\n      if (!isArray(tagsToCompile) || tagsToCompile.length !== 2)\n        throw new Error('Invalid tags: ' + tagsToCompile);\n\n      openingTagRe = new RegExp(escapeRegExp(tagsToCompile[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tagsToCompile[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tagsToCompile[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n          } else {\n            nonSpace = true;\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n')\n            stripSpace();\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      token = [ type, value, start, scanner.pos ];\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      }\n      // ORIGINAL CODE:\n      // else if (type === '=') {\n      //   // Set the tags for the next time around.\n      //   compileTags(value);\n      // }\n      // Fail quitely but do not allow delimiter substitutions. This is\n      // important from the security point of view so that our validators\n      // do not have to parse and interprete all of the mustache's syntax.\n    }\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens (tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens (tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n        case '#':\n        case '^':\n          collector.push(token);\n          sections.push(token);\n          collector = token[4] = [];\n          break;\n        case '/':\n          section = sections.pop();\n          section[5] = token[2];\n          collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n          break;\n        default:\n          collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner (string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function eos () {\n    return this.tail === '';\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function scan (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function scanUntil (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n      case -1:\n        match = this.tail;\n        this.tail = '';\n        break;\n      case 0:\n        match = '';\n        break;\n      default:\n        match = this.tail.substring(0, index);\n        this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context (view, parentContext) {\n    this.view = view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function push (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function lookup (name) {\n    var cache = this.cache;\n\n    var value;\n    if (cache.hasOwnProperty(name)) {\n      value = cache[name];\n    } else {\n      var context = this, names, index, lookupHit = false;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          value = context.view;\n          names = name.split('.');\n          index = 0;\n\n          /**\n           * Using the dot notion path in `name`, we descend through the\n           * nested objects.\n           *\n           * To be certain that the lookup has been successful, we have to\n           * check if the last object in the path actually has the property\n           * we are looking for. We store the result in `lookupHit`.\n           *\n           * This is specially necessary for when the value has been set to\n           * `undefined` and we want to avoid looking up parent contexts.\n           **/\n          while (value != null && index < names.length) {\n            if (!hasProperty(value, names[index])) {\n              value = null;\n              break;\n            }\n            if (index === names.length - 1)\n              lookupHit = true;\n            value = value[names[index++]];\n          }\n        } else {\n          if (!hasProperty(context.view, name)) {\n            value = null;\n          } else {\n            value = context.view[name];\n            lookupHit = true;\n          }\n        }\n\n        if (lookupHit)\n          break;\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer () {\n    this.cache = {};\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function clearCache () {\n    this.cache = {};\n  };\n\n  /**\n   * Parses and caches the given `template` and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function parse (template, tags) {\n    var cache = this.cache;\n    var tokens = cache[template];\n\n    if (tokens == null)\n      tokens = cache[template] = parseTemplate(template, tags);\n\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   */\n  Writer.prototype.render = function render (template, view, partials) {\n    var tokens = this.parse(template);\n    var context = (view instanceof Context) ? view : new Context(view);\n    return this.renderTokens(tokens, context, partials, template);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function renderTokens (tokens, context, partials, originalTemplate) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this.renderSection(token, context, partials, originalTemplate);\n      else if (symbol === '^') value = this.renderInverted(token, context, partials, originalTemplate);\n      else if (symbol === '>') value = this.renderPartial(token, context, partials, originalTemplate);\n      else if (symbol === '&') value = this.unescapedValue(token, context);\n      else if (symbol === 'name') value = this.escapedValue(token, context);\n      else if (symbol === 'text') value = this.rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype.renderSection = function renderSection (token, context, partials, originalTemplate) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender (template) {\n      return self.render(template, context, partials);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string' || typeof value === 'number') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate);\n    }\n    return buffer;\n  };\n\n  Writer.prototype.renderInverted = function renderInverted (token, context, partials, originalTemplate) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate);\n  };\n\n  Writer.prototype.renderPartial = function renderPartial (token, context, partials) {\n    if (!partials) return;\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null)\n      return this.renderTokens(this.parse(value), context, partials, value);\n  };\n\n  Writer.prototype.unescapedValue = function unescapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null) {\n      if (mustache.sanitizeUnescaped) {\n        return mustache.sanitizeUnescaped(value);\n      }\n      return value;\n    }\n  };\n\n  Writer.prototype.escapedValue = function escapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return mustache.escape(value);\n  };\n\n  Writer.prototype.rawValue = function rawValue (token) {\n    return token[1];\n  };\n\n  mustache.name = 'mustache.js';\n  mustache.version = '2.2.0';\n  mustache.tags = [ '{{', '}}' ];\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function clearCache () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function parse (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view` and `partials` using the\n   * default writer.\n   */\n  mustache.render = function render (template, view, partials) {\n    if (typeof template !== 'string') {\n      throw new TypeError('Invalid template! Template should be a \"string\" ' +\n                          'but \"' + typeStr(template) + '\" was given as the first ' +\n                          'argument for mustache#render(template, view, partials)');\n    }\n\n    return defaultWriter.render(template, view, partials);\n  };\n\n  // This is here for backwards compatibility with 0.4.x.,\n  /*eslint-disable */ // eslint wants camel cased function name\n  mustache.to_html = function to_html (template, view, partials, send) {\n    /*eslint-enable*/\n\n    var result = mustache.render(template, view, partials);\n\n    if (isFunction(send)) {\n      send(result);\n    } else {\n      return result;\n    }\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export the sanitizing function for unescaped values.\n  mustache.sanitizeUnescaped = null;\n  mustache.setUnescapedSanitizier = function setUnescapedSanitizier (sanitizeUnescaped) {\n    mustache.sanitizeUnescaped = sanitizeUnescaped;\n  };\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n}));\n"]}