(self.AMP=self.AMP||[]).push({n:"amp-ad-network-cloudflare-impl",v:"123456789",f:(function(AMP){var h;function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function aa(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function q(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function t(a){var b=Object.create(null);if(!a)return b;for(var c;c=ba.exec(a);){var d=decodeURIComponent(c[1]).trim(),e=c[2]?decodeURIComponent(c[2]).trim():"";b[d]=e}return b};var ca="";
function v(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;if(c.context&&c.context.mode)c=c.context.mode;else{var d=t(c.location.originalHash||c.location.hash),e=t(c.location.search);ca||(ca=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"01123456789");c={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,minified:!0,lite:void 0!=e.amp_lite,test:!1,log:d.log,version:"123456789",rtvVersion:ca}}c=b.AMP_MODE=c}return c}
;var da=Object.prototype.toString;function ea(a){return"[object Object]"===da.call(a)}function fa(a){var b=ga,c;for(c in b)if(b[c]===a)return!0;return!1};Date.now();function ha(a){var b=a.message,c=String(Math.random());a.message=c;if(a.message===c)return a.message=b,a;var b=Error(a.message),d;for(d in a)b[d]=a[d];b.stack=a.stack;return b}function ia(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=ha(e):(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function ja(a){var b=ia.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}
self.log=self.log||{user:null,dev:null};var x=self.log;function z(){if(x.user)return x.user;throw Error("failed to call initLogConstructor");}function A(){if(x.dev)return x.dev;throw Error("failed to call initLogConstructor");};function B(a){var b=Object.create(null);a&&Object.assign(b,a);return b};function ka(a){return"undefined"!==typeof TextDecoder?Promise.resolve((new TextDecoder("utf-8")).decode(a)):new Promise(function(b,c){var d=new FileReader;d.onerror=function(){c(d.error)};d.onloadend=function(){b(d.result)};d.readAsText(new Blob([a]))})}function la(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b};var C=self.AMP_CONFIG||{},ma=C.thirdPartyFrameHost||"ampproject.net",na=C.cdnUrl||"https://cdn.ampproject.org",oa=("string"==typeof C.cdnProxyRegex?new RegExp(C.cdnProxyRegex):C.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org/,pa=/^https?:\/\/localhost(:\d+)?$/;var qa,ra,sa=["javascript:","data:","vbscript:"];
function D(a,b){qa||(qa=self.document.createElement("a"),ra=self.UrlCache||(self.UrlCache=Object.create(null)));var c=ra[a];if(c)return c;var d=qa;d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=d.origin&&
"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;var f=e,g=f;return b?g:ra[a]=g}function ta(a,b,c){if(!b)return a;var d=a.split("#",2),e=d[0].split("?",2),f=e[0]+(e[1]?c?"?"+b+"&"+e[1]:"?"+e[1]+"&"+b:"?"+b);return f+=d[1]?"#"+d[1]:""}function ua(a){"string"==typeof a&&(a=D(a));return"https:"==a.protocol||"localhost"==a.hostname||aa(a.hostname,".localhost")}function E(a){"string"==typeof a&&(a=D(a));return oa.test(a.origin)}
function va(a){if(!a)return!0;"string"==typeof a&&(a=D(a));return!sa.includes(a.protocol)};function wa(a){a=F(a);return xa(a,"performance")?K(a,"performance"):null}function ya(a){if(a.nodeType){var b=za((a.ownerDocument||a).defaultView);if(b)return b}return L(a,"url-replace")}function Aa(a,b){var c=F(a);za(a);Ba(a,a,function(){return b});K(a,"url-replace")}function za(a){var b=F(a);return a!=b&&xa(a,"url-replace")?K(a,"url-replace"):null}function M(a,b){a=F(a);return K(a,b)}function L(a,b){a=Ca(a);a=Ca(a);a=a.isSingleDoc()?a.win:a;return K(a,b)}function F(a){return a.__AMP_TOP||a}
function Ca(a){return a.nodeType?M((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function K(a,b){xa(a,b);var c=Da(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Ba(a,b,c){var d=Da(a),e=d["url-replace"];e||(e=d["url-replace"]={obj:null,promise:null,resolve:null,context:null,ctor:null});e.ctor||e.obj||(e.ctor=c,e.context=b,e.resolve&&K(a,"url-replace"))}
function Da(a){var b=a.services;b||(b=a.services={});return b}function Ea(a){a=Da(a);var b={},c;for(c in a)if(b.id=c,Object.prototype.hasOwnProperty.call(a,b.id)){var d=a[b.id];d.obj?Fa(b.id,d.obj):d.promise&&d.promise.then(function(a){return function(b){return Fa(a.id,b)}}(b));b={id:b.id}}}function Fa(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(c){A().error("SERVICE","failed to dispose service",a,c)}}function xa(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};var N=null;Promise.resolve();function O(a,b){var c=Ga(a);return!!c[b]}
function Ga(a){if(N)return N;N=Object.create(null);if(a.AMP_CONFIG)for(var b in a.AMP_CONFIG){var c=a.AMP_CONFIG[b];"number"===typeof c&&0<=c&&1>=c&&(N[b]=Math.random()<c)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var d=a.AMP_CONFIG["allow-doc-opt-in"];if(b=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')){var e=b.getAttribute("content").split(",");for(b=0;b<e.length;b++)-1!=d.indexOf(e[b])&&(N[e[b]]=!0)}}Object.assign(N,
Ha(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){b=a.AMP_CONFIG["allow-url-opt-in"];var f=a.location.originalHash||a.location.hash;a=t(f);for(var g=0;g<b.length;g++){var k=a["e-"+b[g]];"1"==k&&(N[b[g]]=!0);"0"==k&&(N[b[g]]=!1)}}return N}
function Ha(a){a:{var b;b:{try{b=a.document.cookie;break b}catch(g){}b=void 0}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==decodeURIComponent(c.substring(0,d).trim())){a=decodeURIComponent(c.substring(d+1).trim());break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a}
function Ia(a,b){a.experimentBranches=a.experimentBranches||{};for(var c in b)if(b.hasOwnProperty(c)&&!a.experimentBranches.hasOwnProperty(c))if(!b[c].isTrafficEligible||!b[c].isTrafficEligible(a))a.experimentBranches[c]=null;else if(!a.experimentBranches[c]&&O(a,c)){var d=b[c].branches,e=d;a.experimentBranches[c]=e[Math.floor(Math.random()*e.length)]||null}};var Ja={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ka=/(&|<|>|"|'|`)/g;function La(a,b){a=a.createElement("iframe");for(var c in b)a.setAttribute(c,b[c]);return a}function Ma(a,b){for(var c,d=a;d&&d!==c;d=d.parentElement)if(b(d))return d;return null}function Na(a){var b="A";if(a.closest)return a.closest(b);b=b.toUpperCase();return Ma(a,function(a){return a.tagName==b})}var P;function Oa(a){return a?a.replace(Ka,Pa):a}function Pa(a){return Ja[a]};function Q(a){return L(a,"viewer")};var Qa={"-":"+",_:"/",".":"="};function Ra(a){var b=atob(a.replace(/[-_.]/g,function(a){return Qa[a]}));return la(b)};function Sa(a){for(var b=a.nodeName,c=0,d=0,e=a.previousElementSibling;e&&25>d&&100>c;)e.nodeName==b&&d++,c++,e=e.previousElementSibling;return 25>d&&100>c?"."+d:""};function Ua(a){var b=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle);return b&&(E(a.location)||!1||!1)}function Va(a,b){var c=a.filter(function(a){return Number(a)}).join(",");b=b||"";return b+(b&&c?",":"")+c};function Wa(a,b,c,d,e,f,g){if(!Ua(a))return!1;var k=Xa(a,b,c,d.control,d.experiment,f.control,f.experiment,g?g.control:null,g?g.experiment:null),l={};l[c]={isTrafficEligible:function(){return!0},branches:[e.control,e.experiment]};Ia(a,l);if(O(a,c)){var m=a.experimentBranches[c];if(m){Ya(m,b);var n=wa(a);n&&n.addEnabledExperiment(c+"-"+m)}k?Ya("2088461",b):Ya("2088462",b);var r=m==e.experiment||m==d.experiment||m==f.experiment||"117152632"==m;return r==!Za(a,b)}return Za(a,b)}
function Xa(a,b,c,d,e,f,g,k,l){var m="117152632",n=Q(b).getParam("exp")||t(a.location.search).exp;if(!n)return!1;var r=(b=/(^|,)(a4a:[^,]*)/.exec(n))&&b[2];if(!r)return!1;b=r.split(":",2)[1];var G={"-1":m,0:null,1:d,2:e,3:f,4:g,5:k,6:l};if(G.hasOwnProperty(b)){b=G[b];a.experimentBranches=a.experimentBranches||{};var y=!!b,u=O(a,c),y=!(void 0!==y?!y:u);y!=u&&(Ga(a)[c]=y);a.experimentBranches[c]=b;return!0}A().warn("A4A-CONFIG","Unknown a4a URL parameter: ",r," expected one of -1 (manual), 0 (not in experiment), 1 (control branch), or 2 (a4a experiment branch)");
return!1}function $a(a){return a?a.split(","):[]}function ab(a,b){return $a(a.getAttribute("data-experiment-id")).some(function(a){return a===b})}function Za(a,b){switch(b.getAttribute("type")){case "adsense":return O(a,"a4aFastFetchAdSenseLaunched");case "doubleclick":return O(a,"a4aFastFetchDoubleclickLaunched");default:return!1}}function bb(a){return a.every(function(a){return!isNaN(parseInt(a,10))})}
function Ya(a,b){var c=b.getAttribute("data-experiment-id");c&&bb($a(c))?b.setAttribute("data-experiment-id",Va([a],c)):b.setAttribute("data-experiment-id",a)};var cb={control:"117152652",experiment:"117152653"},db={control:"117152654",experiment:"117152655"},eb={control:"2092617",experiment:"2092618"},fb={control:"117152670",experiment:"117152671"},gb={control:"2092615",experiment:"2092616"};var hb={control:"117152662",experiment:"117152663"},ib={control:"117152664",experiment:"117152665"},jb={control:"2092619",experiment:"2092620"},kb={control:"117152680",experiment:"117152681"},lb={control:"2092613",experiment:"2092614"},mb={control:"21060540",experiment:"21060541"};B({adsense:function(a,b){var c,d;O(a,"a4aFastFetchAdSenseLaunched")?(c=eb,d=gb):(c=cb,d=fb);return!!b.getAttribute("data-ad-client")&&Wa(a,b,"expAdsenseA4A",c,d,db)},doubleclick:function(a,b){if(b.hasAttribute("useSameDomainRenderingUntilDeprecated"))return!1;var c=b.hasAttribute("data-use-beta-a4a-implementation"),d,e;O(a,"a4aFastFetchDoubleclickLaunched")?(d=jb,e=lb):(d=hb,e=kb);var f=Wa(a,b,"expDoubleclickA4A",d,e,ib,mb)||c&&(E(a.location)||!1||!1);f&&c&&!ab(b,"117152632")&&b.setAttribute("data-experiment-id",
"2077831");return f},triplelift:function(a,b){var c;return!!b.getAttribute("data-use-a4a")&&!!(c=b.getAttribute("src"))&&0==c.indexOf("https://ib.3lift.com/")},cloudflare:function(){return!0},gmossp:function(a,b){a=b.getAttribute("src");return!!b.getAttribute("data-use-a4a")&&!!a&&q(a,"https://sp.gmossp-sp.jp")}});
var nb={google:"https://cdn.ampproject.org/amp-ad-verifying-keyset.json","google-dev":"https://cdn.ampproject.org/amp-ad-verifying-keyset-dev.json",cloudflare:"https://amp.cloudflare.com/amp-ad-verifying-keyset.json","cloudflare-dev":"https://amp.cloudflare.com/amp-ad-verifying-keyset-dev.json"};function ob(a,b){if(!(a.defaultPrevented||0!=a.buttons&&1!=a.buttons||a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)){var c=pb(a);if(c&&c.eventualUrl&&!1!==a.isTrusted){var d=encodeURIComponent,e;e=c.a.href;var f=encodeURIComponent("amp")+"="+encodeURIComponent("1");e=ta(e,f,!0);var g="click="+d(e);e=c.eventualUrl;e=-1==c.eventualUrl.indexOf("#")?e+("#"+g):e+("&"+g);d=c.a.ownerDocument.defaultView;(f=d.location.ancestorOrigins)&&"http://localhost:8000"==f[f.length-1]&&(e=e.replace(D(c.eventualUrl).host+
"/c/","http://localhost:8000/max/"));a.preventDefault();if(b)b(e);else{a=e;e=(c.a.target||"_top").toLowerCase();if(d.location.ancestorOrigins)if(f=d.location.ancestorOrigins,2>f.length||-1==f[f.length-1].indexOf(".google."))f=null;else{var k=f[f.length-2],l;(l=E(k))||(l=k,"string"==typeof l&&(l=D(l)),l=pa.test(l.origin));if(l){l=d;for(var m=0;m<f.length-1;m++)l=l.parent;f={win:l,origin:k}}else f=null}else f=null;if(f)f.win.postMessage("a2a;"+JSON.stringify(B({url:a})),f.origin);else{var n;try{n=d.open(a,
e,void 0)}catch(r){A().error("DOM","Failed to open url on target: ",e,r)}n||"_top"==e||d.open(a,"_top")}}}}}function pb(a){if(a=Ma(a.target,function(a){return"A"==a.tagName&&a.href}))return{eventualUrl:qb(a),a:a}}function qb(a){var b=a.getAttribute("data-url-param-name")||"adurl",c=t(a.search)[b];if(c&&E(c)&&q(D(c).pathname,"/c/"))return c};function rb(){this.c=null}h=rb.prototype;h.add=function(a){var b=this;this.c||(this.c=[]);this.c.push(a);return function(){b.remove(a)}};h.remove=function(a){this.c&&(a=this.c.indexOf(a),-1<a&&this.c.splice(a,1))};h.removeAll=function(){this.c&&(this.c.length=0)};h.fire=function(a){if(this.c)for(var b=this.c,c=0;c<b.length;c++)(0,b[c])(a)};h.getHandlerCount=function(){return this.c?this.c.length:0};var R,sb="Webkit webkit Moz moz ms O o".split(" ");function S(a,b,c){var d;var e=a.style;if(!q(b,"--")){R||(R=B());var f=R[b];if(!f){f=b;if(void 0===e[b]){var g=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var k=0;k<sb.length;k++){var l=sb[k]+g;if(void 0!==e[l]){g=l;break b}}g=""}void 0!==e[g]&&(f=g)}R[b]=f}b=f}b&&(a.style[b]=d?c+d:c)}function T(a,b){for(var c in b)S(a,c,b[c])}function tb(a,b){var c={};b.forEach(function(a){c[a]=null});T(a,c)};function ub(a,b,c){function d(a){try{return g(a)}catch(m){throw self.reportError(m),m;}}var e=void 0,f=a,g=c,k=e||!1;f.addEventListener(b,d,k);return function(){f&&f.removeEventListener(b,d,k);d=f=g=null}};function vb(a,b,c){var d=c,e=ub(a,b,function(a){try{d(a)}finally{d=null,e()}});return e}function wb(a){var b,c;if(a.complete||"complete"==a.readyState||a.document&&"complete"==a.document.readyState)return Promise.resolve(a);var d=new Promise(function(d,f){var e=a.tagName;b="AUDIO"===e||"VIDEO"===e?vb(a,"loadstart",d):vb(a,"load",d);e&&(c=vb(a,"error",f))});return d.then(function(){c&&c();return a},function(){b&&b();var c=a;c&&c.src&&(c=c.src);throw z().createError("Failed to load:",c);})};self.AMPErrors=self.AMPErrors||[];function xb(a){a=parseFloat(a);return"number"===typeof a&&isFinite(a)?a:void 0};var yb={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0};function zb(a){var b;b=void 0===b?1:b;return new Promise(function(c,d){function e(a){l.length<=g&&l.push(a);l.length>g&&d(l)}function f(a){k.length<b&&k.push(a);k.length==b&&c(k)}b=Math.max(b,0);var g=a.length-b;0>g&&d(Error("not enough promises to resolve"));0==a.length&&c([]);for(var k=[],l=[],m=0;m<a.length;m++)Promise.resolve(a[m]).then(f,e)})};function Ab(a,b,c){var d=Bb(a,b,c);return""===d?wb(a).then(function(){return Bb(a,b,c)}):Promise.resolve(d)}function Bb(a,b,c){var d=a.performance&&a.performance.timing;if(d&&0!=d.navigationStart&&(a=void 0===c?d[b]:d[c]-d[b],"number"===typeof a&&isFinite(a)))return 0>a?"":a}function Cb(a,b){var c=a.performance&&a.performance.navigation;if(c&&void 0!==c[b])return c[b]}function Db(){this.A=void 0;this.g=Object.create(null);this.F=!1}h=Db.prototype;h.initialize=function(){};
h.get=function(a){this.F||(this.initialize(),this.F=!0);return this.g[a]};h.set=function(a,b){a.indexOf("RETURN");this.g[a]=this.g[a]||{sync:void 0,async:void 0};this.g[a].sync=b;this.A=void 0;return this};h.setAsync=function(a,b){a.indexOf("RETURN");this.g[a]=this.g[a]||{sync:void 0,async:void 0};this.g[a].async=b;this.A=void 0;return this};h.setBoth=function(a,b,c){return this.set(a,b).setAsync(a,c)};
h.getExpr=function(a){var b=this;this.F||(this.initialize(),this.F=!0);var c=a?Object.keys(a):null;if(c&&0<c.length){var d=Object.keys(this.g);c.forEach(function(a){void 0===b.g[a]&&d.push(a)});return Eb(d)}this.A||(this.A=Eb(Object.keys(this.g)));return this.A};function Eb(a){a.sort(function(a,b){return b.length-a.length});var b=a.join("|");return new RegExp("\\$?("+b+")(?:\\(([0-9a-zA-Z-_.,]+)\\))?","g")};var Fb="RANDOM COUNTER CANONICAL_URL CANONICAL_HOST CANONICAL_HOSTNAME CANONICAL_PATH DOCUMENT_REFERRER TITLE AMPDOC_URL AMPDOC_HOST AMPDOC_HOSTNAME SOURCE_URL SOURCE_HOST SOURCE_HOSTNAME SOURCE_PATH PAGE_VIEW_ID CLIENT_ID VARIANT VARIANTS SHARE_TRACKING_INCOMING SHARE_TRACKING_OUTGOING TIMESTAMP TIMEZONE SCROLL_TOP SCROLL_LEFT SCROLL_HEIGHT SCROLL_WIDTH VIEWPORT_HEIGHT VIEWPORT_WIDTH SCREEN_WIDTH SCREEN_HEIGHT AVAILABLE_SCREEN_HEIGHT AVAILABLE_SCREEN_WIDTH SCREEN_COLOR_DEPTH DOCUMENT_CHARSET BROWSER_LANGUAGE VIEWER TOTAL_ENGAGED_TIME AMP_VERSION".split(" ");
function Gb(a,b){Db.call(this);this.R=ya(a).getVariableSource();this.J=b}p(Gb,Db);
Gb.prototype.initialize=function(){var a=this;this.set("AD_NAV_TIMING",function(b,c){z().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return Bb(a.J,b,c)}).setAsync("AD_NAV_TIMING",function(b,c){z().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return Ab(a.J,b,c)});this.set("AD_NAV_TYPE",function(){return Cb(a.J,"type")});this.set("AD_NAV_REDIRECT_COUNT",function(){return Cb(a.J,"redirectCount")});for(var b=0;b<Fb.length;b++){var c=
Fb[b],d=this.R.get(c);this.set(c,d.sync).setAsync(c,d.async)}};function Hb(a,b,c){var d,e=Date.now(),f=b.getAttribute("width"),g=b.getAttribute("height");d=d?d:B(void 0);d.width=xb(f);d.height=xb(g);var k=a.location.href;"about:srcdoc"==k&&(k=a.parent.location.href);for(var l=L(b,"documentInfo").get(),m=Q(b),f=m.getUnconfirmedReferrerUrl(),n=b.getPageLayoutBox(),g=l.sourceUrl,r=l.canonicalUrl,G=l.pageViewId,y={href:k},u=b.tagName,U={localDev:!1,development:v(void 0).development,filter:v(void 0).filter,minified:!0,lite:v(void 0).lite,test:!1,log:v(void 0).log,
version:v(void 0).version,rtvVersion:v(void 0).rtvVersion},H=a,H=!(!H.AMP_CONFIG||!H.AMP_CONFIG.canary),ec=!m.isVisible(),fc=n?{left:n.left,top:n.top,width:n.width,height:n.height}:null,gc=b.getIntersectionChangeEntry(),w=b,V=[],I=0;w&&1==w.nodeType&&25>I;){var J="";w.id&&(J="/"+w.id);var hc=w.nodeName.toLowerCase();V.push(""+hc+J+Sa(w));I++;w=w.parentElement}w=V.join();V=w.length;I=5381;for(J=0;J<V;J++)I=33*I^w.charCodeAt(J);d._context=B({ampcontextVersion:"123456789",ampcontextFilepath:na+
"/123456789/ampcontext-v0.js",sourceUrl:g,referrer:f,canonicalUrl:r,pageViewId:G,location:y,startTime:e,tagName:u,mode:U,canary:H,hidden:ec,initialLayoutRect:fc,initialIntersection:gc,domFingerprint:String(I>>>0),experimentToggles:Ga(a),sentinel:c});var Ta=b.getAttribute("src");Ta&&(d.src=Ta);return d};function W(a){this.C=M(a,"crypto")}W.prototype.isAvailable=function(){return this.C.isPkcsAvailable()};W.prototype.importPublicKey=function(a,b){var c=this;return this.C.importPkcsKey(b).then(function(d){if("string"!=typeof b.n||"string"!=typeof b.e)throw Error("missing fields in JSON Web Key");var e=Ra(b.n),f=Ra(b.e),g=Ib(e),k=Ib(f),l=new Uint8Array(g.length+k.length);l.set(g);l.set(k,g.length);return c.C.sha1(l).then(function(b){return{serviceName:a,cryptoKey:d,hash:new Uint8Array(b,0,4)}})})};
W.prototype.verifySignature=function(a,b,c){if(!(5<b.length&&0==b[0]&&Jb(b,c.hash)))return Promise.resolve(!1);var d=new Uint8Array(a.length+1);d.set(a);d[a.length]=0;return this.C.verifyPkcs(c.cryptoKey,b.subarray(5),d)};function Ib(a){var b=new Uint8Array(4+a.length);b[0]=a.length>>24&255;b[1]=a.length>>16&255;b[2]=a.length>>8&255;b[3]=a.length&255;b.set(a,4);return b}function Jb(a,b){if(!a||!b)return!1;for(var c=0;4>c;c++)if(a[c+1]!==b[c])return!1;return!0};function Kb(a,b){void 0===a["3pla"]&&(a["3pla"]=0);a["3pla"]++;M(a,"timer").timeoutPromise(1E3,b).catch(function(){}).then(function(){a["3pla"]--})};function Lb(a,b){b.document.documentElement.addEventListener("click",Mb.bind(null,a),!0)}function Mb(a,b){var c=Na(b.target);if(c&&c.href){var d=c.getAttribute("data-a4a-orig-href")||c.getAttribute("href");if(d){var e={CLICK_X:function(){return b.pageX},CLICK_Y:function(){return b.pageY}},f=ya(a).expandSync(d,e,void 0,{CLICK_X:!0,CLICK_Y:!0});f!=d&&(c.getAttribute("data-a4a-orig-href")||c.setAttribute("data-a4a-orig-href",d),c.setAttribute("href",f))}}};function Nb(){this.l=B();this.f=null}h=Nb.prototype;h.get=function(a){return this.l[a]||null};h.whenSignal=function(a){var b=this.f&&this.f[a];if(!b){var c=this.l[a];if(null!=c)b={promise:"number"==typeof c?Promise.resolve(c):Promise.reject(c)};else var d,e,b={promise:new Promise(function(a,b){d=a;e=b}),resolve:d,reject:e};this.f||(this.f=B());this.f[a]=b}return b.promise};
h.signal=function(a,b){if(null==this.l[a]){var c=b||Date.now();this.l[a]=c;(a=this.f&&this.f[a])&&a.resolve&&(a.resolve(c),a.resolve=void 0,a.reject=void 0)}};h.rejectSignal=function(a,b){null==this.l[a]&&(this.l[a]=b,(a=this.f&&this.f[a])&&a.reject&&(a.reject(b),a.resolve=void 0,a.reject=void 0))};h.reset=function(a){this.l[a]&&delete this.l[a];var b=this.f&&this.f[a];b&&!b.resolve&&delete this.f[a]};function Ob(a,b){return{left:0,top:0,width:a,height:b,bottom:0+b,right:0+a}};var Pb=["AMP-AD","AMP-ANALYTICS","AMP-PIXEL"],Qb;function Rb(a,b){Sb(a,b)}
function Tb(a,b,c,d){var e=F(a.ownerDocument.defaultView),f=M(e,"extensions");S(a,"visibility","hidden");a.setAttribute("referrerpolicy","unsafe-url");c.extensionIds&&c.extensionIds.forEach(function(a){return f.loadExtension(a)});var g=Ub(c);a.onload=function(){a.readyState="complete"};var k;void 0===Qb&&(Qb="srcdoc"in HTMLIFrameElement.prototype);if(Qb)a.srcdoc=g,k=wb(a),b.appendChild(a);else{a.src="about:blank";b.appendChild(a);var l=a.contentWindow.document;l.open();l.write(g);k=wb(a.contentWindow);
l.close()}var m;m=Vb(a)?Promise.resolve():new Promise(function(b){var c=e.setInterval(function(){Vb(a)&&(b(),e.clearInterval(c))},5);k.catch(function(a){ja(a)}).then(function(){b();e.clearInterval(c)})});return m.then(function(){var b=new Wb(a,c,k);a.__AMP_EMBED__=b;f.installExtensionsInChildWindow(a.contentWindow,c.extensionIds||[],d);Xb(b);return b})}
function Vb(a){a=a.contentWindow&&a.contentWindow.document;return!!(a&&"loading"!=a.readyState&&"uninitialized"!=a.readyState&&a.body&&a.body.firstChild)}
function Ub(a){var b=a.html,c=b.toUpperCase(),d=c.indexOf("<HEAD");-1!=d&&(d=c.indexOf(">",d+1)+1);-1==d&&(d=c.indexOf("<BODY"));-1==d&&(d=c.indexOf("<HTML"),-1!=d&&(d=c.indexOf(">",d+1)+1));var e=[];0<d&&e.push(b.substring(0,d));e.push('<base href="'+Oa(a.url)+'">');a.fonts&&a.fonts.forEach(function(a){e.push('<link href="'+Oa(a)+'" rel="stylesheet" type="text/css">')});0<d?e.push(b.substring(d)):e.push(b);return e.join("")}
function Wb(a,b,c){this.iframe=a;this.win=a.contentWindow;this.spec=b;this.host=b.host||null;this.S=Date.now();this.I=!1;this.P=new rb;this.B=this.host?this.host.signals():new Nb;this.T=Promise.all([c,this.whenReady()])}h=Wb.prototype;h.destroy=function(){L(this.iframe,"resources").removeForChildWindow(this.win);Ea(this.win)};h.getStartTime=function(){return this.S};h.getUrl=function(){return this.spec.url};h.signals=function(){return this.B};h.whenReady=function(){return this.B.whenSignal("render-start")};
h.whenWindowLoaded=function(){return this.T};h.whenIniLoaded=function(){return this.B.whenSignal("ini-load")};function Xb(a){a.host?a.host.renderStarted():a.B.signal("render-start");S(a.iframe,"visibility","");a.win.document&&a.win.document.body&&T(a.win.document.body,{opacity:1,visibility:"visible",animation:"none"});var b;b=a.host?a.host.getLayoutBox():Ob(a.win.innerWidth,a.win.innerHeight);Promise.all([a.whenReady(),Yb(a.iframe,a.win,b)]).then(function(){a.B.signal("ini-load")})}h.isVisible=function(){return this.I};
h.onVisibilityChanged=function(a){return this.P.add(a)};function Sb(a,b){a.I!=b&&(a.I=b,a.P.fire(a.I))}h.getBodyElement=function(){return(this.iframe.contentDocument||this.iframe.contentWindow.document).body};h.getVsync=function(){return M(this.win,"vsync")};h.getResources=function(){return L(this.iframe,"resources")};
function Zb(a,b,c){return b.mutate&&!b.measure?a.getResources().mutateElement(a.iframe,function(){b.mutate(c)}):new Promise(function(d){a.getVsync().measure(function(){b.measure(c);if(!b.mutate)return d();Zb(a,{mutate:b.mutate},c).then(d)})})}
h.enterFullOverlayMode=function(){var a=this,b=this.getBodyElement(),c=this.getFixedContainer();return Zb(this,{measure:function(b){var c=a.iframe.getBoundingClientRect(),d=a.win.innerWidth,g=a.win.innerHeight;b.fixedContainerStyle={position:"absolute",top:c.top+"px",right:d-c.right+"px",left:c.left+"px",bottom:g-c.bottom+"px",width:c.width+"px",height:c.height+"px"}},mutate:function(d){S(b,"background","transparent");T(a.iframe,{position:"fixed",left:0,right:0,top:0,bottom:0,width:"100vw",height:"100vh"});
T(c,d.fixedContainerStyle)}},{})};h.leaveFullOverlayMode=function(){var a=this,b=this.getBodyElement(),c=this.getFixedContainer();return Zb(this,{mutate:function(){tb(b,["background"]);tb(a.iframe,"position left right top bottom width height".split(" "));tb(c,"position top right left bottom width height".split(" "))}})};
h.getFixedContainer=function(){var a;a=this.getBodyElement();if(null==P)try{a.ownerDocument.querySelector(":scope"),P=!0}catch(c){P=!1}if(P)a=a.querySelector(":scope > amp-ad-banner");else{a.classList.add("i-amphtml-scoped");var b=a.querySelector(".i-amphtml-scoped > amp-ad-banner");a.classList.remove("i-amphtml-scoped");a=b}return a};
function Yb(a,b,c){return L(a,"resources").getResourcesInRect(b,c).then(function(a){var b=[];a.forEach(function(a){Pb.includes(a.element.tagName)||b.push(a.loadedOnce())});return Promise.all(b)})};function $b(a){var b="nameframe",c=b||"frame";return"https://d-"+ac(a)+("."+ma+"/123456789/")+(c+".html")}function ac(a){var b;if(a.crypto&&a.crypto.getRandomValues){var c=new Uint32Array(2);a.crypto.getRandomValues(c);b=String(c[0])+c[1]}else b=String(a.Math.random()).substr(2)+"0";return b}function bc(){for(var a=window,b=0,c=a;c&&c!=c.parent;c=c.parent)b++;return String(b)+"-"+ac(a)};function cc(a,b){this.ampdoc=a;this.N=b}h=cc.prototype;h.expandSync=function(a,b,c,d){return this.expandUrlSync(a,b,c,d)};h.expandAsync=function(a,b,c){return this.expandUrlAsync(a,b,c)};h.expandStringSync=function(a,b,c,d){return X(this,a,b,c,!0,d)};h.expandStringAsync=function(a,b){return X(this,a,b)};h.expandUrlSync=function(a,b,c,d){return dc(a,X(this,a,b,c,!0,d))};h.expandUrlAsync=function(a,b,c){return X(this,a,b,void 0,void 0,c).then(function(b){return dc(a,b)})};
h.expandInputValueAsync=function(a){return ic(this,a,!1)};h.expandInputValueSync=function(a){return ic(this,a,!0)};function ic(a,b,c){"INPUT"==b.tagName&&(b.getAttribute("type")||"").toLowerCase();var d=jc(b);if(!d)return c?b.value:Promise.resolve(b.value);void 0===b["amp-original-value"]&&(b["amp-original-value"]=b.value);a=X(a,b["amp-original-value"]||b.value,void 0,void 0,c,d);return c?b.value=a:a.then(function(a){return b.value=a})}
function jc(a,b){if(a=a.getAttribute("data-amp-replace")){var c={};a.trim().split(/\s+/).forEach(function(a){!b||b&&b.hasOwnProperty(a)?c[a]=!0:b&&z().warn("URL","Ignoring unsupported replacement",a)});return c}}
h.maybeExpandLink=function(a){var b={CLIENT_ID:!0,QUERY_PARAM:!0},c=a.getAttribute("data-amp-addparams"),d=jc(a,b);if(d||c){var e=a["amp-original-href"]||a.getAttribute("href"),f=D(e);null==a["amp-original-href"]&&(a["amp-original-href"]=e);if(c){var g=t(c),k=e,l=[],m;for(m in g){var n=g[m];if(null!=n)if(Array.isArray(n))for(var r=0;r<n.length;r++){var G=n[r];l.push(encodeURIComponent(m)+"="+encodeURIComponent(G))}else l.push(encodeURIComponent(m)+"="+encodeURIComponent(n))}g=l.join("&");e=ta(k,g)}if(d){a:if(k=
L(this.ampdoc,"documentInfo").get(),f.origin==D(k.canonicalUrl).origin||f.origin==D(k.sourceUrl).origin)f=!0;else{if((k=this.ampdoc.getRootNode().querySelector("meta[name=amp-link-variable-allowed-origin]"))&&k.hasAttribute("content"))for(k=k.getAttribute("content").trim().split(/\s+/),g=0;g<k.length;g++)if(f.origin==D(k[g]).origin){f=!0;break a}f=!1}var y=f;y?e=this.expandSync(e,void 0,void 0,d):z().warn("URL","Ignoring link replacement",e," because the link does not go to the document's source, canonical, or whitelisted origin.")}return a.href=
e}};
function X(a,b,c,d,e,f){var g=a.N.getExpr(c),k,l=b.replace(g,function(b,g,r){var m=[];"string"==typeof r&&(m=r.split(","));if(f&&!f[g])return b;var n;if(c&&g in c)n=c[g];else if(n=a.N.get(g))if(e){if(n=n.sync,!n)return z().error("UrlReplacements","ignoring async replacement key: ",g),""}else n=n.async||n.sync;var u;try{u="function"==typeof n?n.apply(null,m):n}catch(H){e&&(u=""),ja(H)}if(u&&u.then){if(e)return z().error("UrlReplacements","ignoring promise value for key: ",g),"";var U=u.catch(function(a){ja(a)}).then(function(a){l=l.replace(b,
null==a?"":encodeURIComponent(a));d&&(d[b]=a)});k=k?k.then(function(){return U}):U;return b}d&&(d[b]=u);return null==u?"":encodeURIComponent(u)});k&&(k=k.then(function(){return l}));return e?l:k||Promise.resolve(l)}h.collectVars=function(a,b){var c=Object.create(null);return X(this,a,b,c).then(function(){return c})};
function dc(a,b){var c=D(b,!0).protocol,d=D(a,!0).protocol;if(c!=d)return z().error("UrlReplacements","Illegal replacement of the protocol: ",a),a;z().assert(va(b),"The replacement url has invalid protocol: %s",b);return b}h.getVariableSource=function(){return this.N};var ga={CLIENT_CACHE:"client_cache",SAFEFRAME:"safeframe",NAMEFRAME:"nameframe"},kc={frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no",marginwidth:"0",marginheight:"0"};function lc(a,b,c){return function(d){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];try{return a.apply(b,e)}catch(g){if(c)try{return e.unshift(g),c.apply(b,e)}catch(k){}}}}
function Y(a){var b=this;AMP.BaseElement.call(this,a);this.o=null;this.G=0;this.h=this.uiHandler=this.j=this.i=this.config=null;this.U=this.getVsync();this.L=!1;this.H=new W(this.win);this.w=null;this.s={width:this.element.getAttribute("width"),height:this.element.getAttribute("height")};this.m=null;this.u=M(this.win,"platform").isIos()?"safeframe":null;this.D=this.win.performance&&this.win.performance.now?this.win.performance.now.bind(this.win.performance):Date.now;this.b=lc(this.emitLifecycleEvent,
this,function(a,d){A().error("amp-a4a",b.element.getAttribute("type"),"Error on emitLifecycleEvent",a,d)});this.sentinel=bc();this.K=!1;this.iframe=null;this.fromResumeCallback=!1;a=(this.element.getAttribute("type")||"notype").toLowerCase();this.O="adsense"==a&&ab(this.element,"117152655")||"doubleclick"==a&&ab(this.element,"117152665");this.M="1-0-9"}p(Y,AMP.BaseElement);h=Y.prototype;h.getPriority=function(){return 2};
h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};h.buildCallback=function(){this.uiHandler=new AMP.AmpAdUIHandler(this);if(!this.win.ampA4aValidationKeys){var a=mc(this);this.win.ampA4aValidationKeys=a}};
h.renderOutsideViewport=function(){if(!this.L&&this.win["3pla"])return this.b("throttled3p"),!1;var a;var b=this.element.getAttribute("data-loading-strategy");null==b?a=null:"prefer-viewability-over-views"==b||""==b?a=1.25:(a="Value of data-loading-strategy should be a float number in range of [0, 3], but got "+b,b=z().assertNumber(parseFloat(b),a),z().assert(0<=b&&3>=b,a),a=b);var c=a;return null!==c?c:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};h.isValidElement=function(){return!0};
h.getPreconnectUrls=function(){return[]};h.getPrefetchUrls=function(){return[]};h.isAmpAdElement=function(){return"AMP-AD"==this.element.tagName||"AMP-EMBED"==this.element.tagName};h.preconnectCallback=function(){var a=this;this.preconnect.preload(nc(this));this.preconnect.preload($b(this.win));var b=this.getPreconnectUrls();b&&b.forEach(function(b){a.preconnect.url(b,!0)})};
h.resumeCallback=function(){if(!this.j){this.b("resumeCallback");this.fromResumeCallback=!0;var a=this.getResource();if(a.hasBeenMeasured()&&!a.isMeasureRequested())this.onLayoutMeasure()}};h.getResource=function(){return this.element.getResources().getResourceForElement(this.element)};h.hasAdPromise=function(){return!!this.o};
function oc(a){if(!a.H.isAvailable())return!1;var b=a.getIntersectionElementLayoutBox();if(0==b.height||0==b.width)return!1;var b=a.win,c=!1,d=0,e=a.element;do{if(yb[e.tagName])d++,c=!1;else{var f=(b.getComputedStyle(e)||B()).position;"fixed"!=f&&"sticky"!=f||(c=!0)}e=e.parentElement}while(e&&"BODY"!=e.tagName);return!c&&1>=d?a.isValidElement()?!0:(z().warn("amp-a4a",a.element.getAttribute("type"),"Amp ad element ignored as invalid",a.element),!1):(z().warn("amp-a4a","<"+a.element.tagName+"> is not allowed to be "+
("placed in elements with position:fixed: "+a.element)),!1)}
h.onLayoutMeasure=function(){var a=this;if(this.h)this.h.onLayoutMeasure();if(!this.o&&oc(this)){++this.G;var b=this.verifyStillCurrent();this.o=Q(this.getAmpDoc()).whenFirstVisible().then(function(){b();if(a.O&&!a.getResource().renderOutsideViewport())return a.getResource().whenWithinRenderOutsideViewport()}).then(function(){b();a.O&&A().info("amp-a4a","ad request being built");return a.getAdUrl()}).then(function(c){b();a.i=c;a.b("urlBuilt");return c&&a.sendXhrRequest(c)}).then(function(c){b();a.b("adRequestEnd");
if(!c)return null;if(!c.arrayBuffer||204==c.status)return a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE");var d=c.headers.get("X-AmpAdRender")||a.u;(a.u=d)&&!fa(d)&&A().error("AMP-A4A","cross-origin render mode header "+d);var e=c.headers.get("X-AmpSafeFrameVersion");/^[0-9-]+$/.test(e)&&"1-0-9"!=e&&(a.M=e,a.preconnect.preload(nc(a)));return c.arrayBuffer().then(function(b){return 0==b.byteLength?(a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE")):{bytes:b,headers:c.headers}})}).then(function(c){b();
c&&a.b("extractCreativeAndSignature");return c&&a.extractCreativeAndSignature(c.bytes,c.headers)}).then(function(c){b();if(!c)return Promise.resolve();a.s=c.size||a.s;"client_cache"!=a.u&&c.creative&&(a.w=c.creative);if(!c.signature)return Promise.resolve();a.b("adResponseValidateStart");return pc(a,c.creative,c.signature).then(function(b){if(b)return b;z().error("amp-a4a",a.element.getAttribute("type"),"Unable to validate AMP creative against key providers");a.win.ampA4aValidationKeys=mc(a);return pc(a,
c.creative,c.signature)})}).then(function(c){b();a.L=!!c;return c&&ka(c)}).then(function(c){b();var d;if(!c||!(d=qc(a,c)))return null;a.updatePriority(0);var e=M(a.win,"extensions");d.customElementExtensions.forEach(function(a){return e.loadExtension(a)});return d}).catch(function(b){if("NO-CONTENT-RESPONSE"==b)return{minifiedCreative:"",customElementExtensions:[],customStylesheets:[]};Z(a,b);return null})}};
function pc(a,b,c){var d=a.win.ampA4aValidationKeys,e=!1;return zb(d.map(function(d){return d.then(function(d){return e?Promise.reject("noop"):zb(d.keys.map(function(d){return d.then(function(d){if(e)return Promise.reject("noop");if(!d)return Promise.reject("Promise resolved to null key.");var f=a.D();return a.H.verifySignature(new Uint8Array(b),c,d).then(function(g){if(g)return e=!0,a.b("signatureVerifySuccess",{"met.delta.AD_SLOT_ID":Math.round(a.D()-f),"signingServiceName.AD_SLOT_ID":d.serviceName}),
b;d&&5<c.length&&0==c[0]&&Jb(c,d.hash)&&z().error("amp-a4a",a.element.getAttribute("type"),"Key failed to validate creative's signature",d.serviceName,d.cryptoKey);return Promise.reject(d.serviceName+" key failed to verify")},function(b){A().error("amp-a4a",a.element.getAttribute("type"),d.serviceName,b,a.element)})})})).then(function(a){return a[0]},function(){return Promise.reject("All keys for "+d.serviceName+" failed to verify")})})})).then(function(b){a.b("adResponseValidateEnd");return b[0]},
function(){a.b("adResponseValidateEnd");return Promise.reject("No validation service could verify this key")})}
function Z(a,b,c){var d=b;if(d&&("string"==typeof d?q(d,"CANCELLED"):"string"==typeof d.message&&q(d.message,"CANCELLED")))throw b;b=b&&b.message?ha(b):Error("unknown error "+b);c&&(b.ignoreStack=c);d=a.element.getAttribute("type")||"notype";0!=b.message.indexOf("amp-a4a: "+d+":")&&(b.message="amp-a4a: "+d+": "+b.message);d=b;a=a.i;if(!(!a||d.args&&d.args.au)){var e=a.indexOf("?");-1!=e&&((d.args||(d.args={})).au=a.substring(e+1,e+251))}v().development||v().log?z().error("amp-a4a",b):(z().warn("amp-a4a",
b),.01>Math.random()&&A().expectedError("amp-a4a",b))}
h.layoutCallback=function(){var a=this;if(!this.o)return oc(this)&&A().error("amp-a4a","Null promise in layoutCallback"),Promise.resolve();this.b("preAdThrottle");var b=this.D(),c=this.verifyStillCurrent();return this.o.then(function(d){c();var e=a.D()-b;a.b("layoutAdPromiseDelay",{layoutAdPromiseDelay:Math.round(e),isAmpCreative:!!d});return a.K?Promise.resolve():a.iframe?(a.b("iframeAlreadyExists"),Promise.resolve()):d?rc(a,d).catch(function(b){c();z().error("amp-a4a",a.element.getAttribute("type"),
"Error injecting creative in friendly frame",b);Z(a,b);return sc(a)}):sc(a)}).catch(function(b){Z(a,b);throw Error("CANCELLED");})};h.attemptChangeSize=function(a,b){this.m=this.m||this.getLayoutBox();return AMP.BaseElement.prototype.attemptChangeSize.call(this,a,b).catch(function(){})};
h.unlayoutCallback=function(){var a=this;if(this.j)return!1;this.G++;this.b("adSlotCleared");this.uiHandler.applyUnlayoutUI();this.m&&AMP.BaseElement.prototype.attemptChangeSize.call(this,this.m.height,this.m.width).then(function(){a.m=null}).catch(function(a){A().warn("amp-a4a","unable to revert to original size",a)});this.K=!1;this.j&&(this.j.destroy(),this.j=null);this.iframe&&this.iframe.parentElement&&(this.iframe.parentElement.removeChild(this.iframe),this.iframe=null);this.w=this.i=this.o=
null;this.fromResumeCallback=this.L=!1;this.u=M(this.win,"platform").isIos()?"safeframe":null;this.h&&(this.h.freeXOriginIframe(),this.h=null);return!0};h.viewportCallback=function(a){this.j&&Sb(this.j,a);this.h&&this.h.viewportCallback(a)};h.createPlaceholderCallback=function(){return this.uiHandler.createPlaceholder()};h.getAdUrl=function(){throw Error("getAdUrl not implemented!");};h.resetAdUrl=function(){this.i=null};
h.verifyStillCurrent=function(){var a=this,b=this.G;return function(){if(b!=a.G)throw Error("CANCELLED");}};h.extractCreativeAndSignature=function(){throw Error("extractCreativeAndSignature not implemented!");};h.forceCollapse=function(){this.m=this.m||this.getLayoutBox();this.uiHandler.applyNoContentUI();this.K=!0};h.onCreativeRender=function(a){a&&this.b("renderFriendlyEnd")};
h.onCrossDomainIframeCreated=function(a){A().info("amp-a4a",this.element.getAttribute("type"),"onCrossDomainIframeCreated "+a)};h.sendXhrRequest=function(a){var b=this;this.b("adRequestStart");var c={mode:"cors",method:"GET",credentials:"include"};return M(this.win,"xhr").fetch(a,c).catch(function(){b.b("networkError");return null})};h.getSigningServiceNames=function(){return["google"]};
function mc(a){return a.H.isAvailable()?a.getSigningServiceNames().map(function(b){aa(b,"-dev");var c=nb[b],d=b;if(c)return Q(a.getAmpDoc()).whenFirstVisible().then(function(){return M(a.win,"xhr").fetchJson(c,{mode:"cors",method:"GET",ampCors:!1,credentials:"omit"}).then(function(a){return a.json()}).then(function(b){var c={serviceName:d};ea(b)&&Array.isArray(b.keys)&&b.keys.every(ea)?c.keys=b.keys:(z().error("amp-a4a",a.element.getAttribute("type"),"Invalid response from signing server "+d,a.element),
c.keys=[]);return c})}).then(function(b){return{serviceName:b.serviceName,keys:b.keys.map(function(c){return a.H.importPublicKey(b.serviceName,c).catch(function(c){z().error("amp-a4a",a.element.getAttribute("type"),"error importing keys for: "+b.serviceName,c,a.element);return null})})}}).catch(function(b){z().error("amp-a4a",a.element.getAttribute("type"),b,a.element);return{serviceName:d,keys:[]}});b="Signing service '"+b+"' does not exist.";z().error("amp-a4a",a.element.getAttribute("type"),b,
a.element);return Promise.resolve({serviceName:d,keys:[]})}):[]}
function sc(a){if("true"==a.element.getAttribute("disable3pfallback"))return z().warn("amp-a4a",a.element.getAttribute("type"),"fallback to 3p disabled"),Promise.resolve(!1);Z(a,Error("fallback to 3p"),!0);var b=a.u,c=Promise.resolve(!1);if("safeframe"!=b&&"nameframe"!=b||!a.w)if(a.i){var b=a.i,d=a.element,e;e=void 0===e?"source":e;z().assert(null!=b,"%s %s must be available",d,e);z().assert(ua(b)||/^(\/\/)/.test(b),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',d,
e,b);e=a.i;a.b("renderCrossDomainStart");c=tc(a,{src:M(a.win,"xhr").getCorsUrl(a.win,e),name:JSON.stringify(Hb(a.win,a.element,a.sentinel))})}else z().warn("amp-a4a",a.element.getAttribute("type"),"No creative or URL available -- A4A can't render any ad");else c=uc(a,a.w),a.w=null;Kb(a.win,c);return c}
function rc(a,b){a.b("renderFriendlyStart");a.iframe=La(a.element.ownerDocument,{height:a.s.height,width:a.s.width,frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no"});a.applyFillContent(a.iframe);var c=[];b.customStylesheets&&b.customStylesheets.forEach(function(a){(a=a.href)&&c.push(a)});var d=a.verifyStillCurrent();return Tb(a.iframe,a.element,{host:a.element,url:a.i,html:b.minifiedCreative,extensionIds:b.customElementExtensions||[],fonts:c},function(b){var c=a.getAmpDoc(),
d=new Gb(a.getAmpDoc(),b);Aa(b,new cc(c,d))}).then(function(b){d();a.j=b;Rb(b,a.isInViewport());var c=b.iframe.contentDocument||b.win.document;S(c.body,"visibility","visible");Lb(a.getAmpDoc(),b.win);vc(a,b.win);Ab(b.win,"navigationStart","loadEventEnd").then(function(b){d();a.b("friendlyIframeLoaded",{"navStartToLoadEndDelta.AD_SLOT_ID":Math.round(b)})}).catch(function(b){A().error("amp-a4a",a.element.getAttribute("type"),"getTimingDataAsync for renderFriendlyEnd failed: ",b)});lc(a.onCreativeRender,
a,function(b){A().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(!0);return b.whenIniLoaded()}).then(function(){d();a.b("friendlyIframeIniLoad")})}
function tc(a,b){var c=Object.assign(b,{height:a.s.height,width:a.s.width});a.sentinel&&(c["data-amp-3p-sentinel"]=a.sentinel);a.iframe=La(a.element.ownerDocument,Object.assign(c,kc));a.h=new AMP.AmpAdXOriginIframeHandler(a);var d=a.h.init(a.iframe,!0);lc(a.onCreativeRender,a,function(b){A().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(!1);return d}
function uc(a,b){var c=a.u;a.b("renderSafeFrameStart");var d=a.verifyStillCurrent();return ka(b).then(function(b){d();var e,g="";switch(c){case "safeframe":e=nc(a)+"?n=0";break;case "nameframe":e=$b(a.win);break;default:return z().error("A4A","A4A received unrecognized cross-domain name attribute iframe rendering mode request: %s.  Unable to render a creative for slot %s.",c,a.element.getAttribute("id")),Promise.reject("Unrecognized rendering mode request")}var k=Hb(a.win,a.element,a.sentinel);"nameframe"==
c?(k.creative=b,g=JSON.stringify(k)):"safeframe"==c&&(k=JSON.stringify(k),g=a.M+";"+b.length+";"+b+(""+k));return tc(a,{src:e,name:g})})}
function qc(a,b){var c='<script type="application/json" amp-ad-metadata>',d=b.lastIndexOf('<script type="application/json" amp-ad-metadata>');0>d&&(c="<script type=application/json amp-ad-metadata>",d=b.lastIndexOf("<script type=application/json amp-ad-metadata>"));if(0>d)return A().warn("amp-a4a",a.element.getAttribute("type"),"Could not locate start index for amp meta data in: %s",b),null;var e=b.lastIndexOf("\x3c/script>");if(0>e)return A().warn("amp-a4a",a.element.getAttribute("type"),"Could not locate closing script tag for amp meta data in: %s",
b),null;try{var f=JSON.parse(b.slice(d+c.length,e)),g=f.ampRuntimeUtf16CharOffsets;if(!Array.isArray(g)||2!=g.length||"number"!==typeof g[0]||"number"!==typeof g[1])throw Error("Invalid runtime offsets");var k={};if(f.customElementExtensions){if(k.customElementExtensions=f.customElementExtensions,!Array.isArray(k.customElementExtensions))throw Error("Invalid extensions",k.customElementExtensions);}else k.customElementExtensions=[];if(f.customStylesheets){k.customStylesheets=f.customStylesheets;var l=
"Invalid custom stylesheets";if(!Array.isArray(k.customStylesheets))throw Error(l);k.customStylesheets.forEach(function(a){if(!ea(a)||!a.href||"string"!==typeof a.href||!/^https:\/\//i.test(a.href))throw Error(l);})}k.minifiedCreative=b.slice(0,g[0])+b.slice(g[1],d)+b.slice(e+9);return k}catch(m){return A().warn("amp-a4a",a.element.getAttribute("type"),"Invalid amp metadata: %s",b.slice(d+48,e)),null}}
function vc(a,b){O(a.win,"alp-for-a4a")&&b.document.documentElement.addEventListener("click",function(b){ob(b,function(b){Q(a.getAmpDoc()).navigateTo(b,"a4a")})})}function nc(a){return"https://tpc.googlesyndication.com/safeframe/"+(a.M+"/html/container.html")}h.collapsedCallback=function(){this.b("adSlotCollapsed")};h.emitLifecycleEvent=function(){};var wc={cloudflare:{base:"https://firebolt.cloudflaredemo.com"},adzerk:{base:"https://engine.betazerk.com"},celtra:{base:"https://ads-amp.celtra.com"},dianomi:{base:"https://www.dianomi.com",src:"https://www.dianomi.com/smartads.pl?format=a4a"},yieldmo:{base:"https://yieldmo-amp.club",src:"https://yieldmo-amp.club/ads"}};function xc(a){Y.apply(this,arguments)}p(xc,Y);h=xc.prototype;h.isValidElement=function(){var a=this.element;if(!this.isAmpAdElement()||!a.hasAttribute("data-cf-network"))return!1;var b=wc[a.getAttribute("data-cf-network")];if(!b)return!1;a=a.getAttribute("src")||b.src;if(!a||!q(a,b.base))return!1;z().assert(/^https?\:/i.test(a),'URL must start with "http://" or "https://". Invalid value: %s',a);D(a);return!0};h.getSigningServiceNames=function(){return["cloudflare"]};
h.replacements=function(a,b){a=a.replace(/SLOT_WIDTH/g,b.slotWidth);return a=a.replace(/SLOT_HEIGHT/g,b.slotHeight)};
h.getAdUrl=function(){var a=this.getIntersectionElementLayoutBox(),b=this.element,c=wc[b.getAttribute("data-cf-network")],d="false"!==b.getAttribute("data-cf-a4a"),e=c.base,c=b.getAttribute("src")||c.src;d&&"/_a4a/"!=c.substr(e.length,6)&&(c=e+"/_a4a"+c.slice(e.length));for(var a={slotWidth:(a.width||0).toString(),slotHeight:(a.height||0).toString()},c=encodeURI(this.replacements(c,a)),f=0>c.indexOf("?")?"?":"&",d=0;d<b.attributes.length;d++){var g=b.attributes[d];g.specified&&q(g.name,"data-")&&
!q(g.name,"data-cf-")&&(c+=f+encodeURIComponent(g.name.substring(5))+"="+encodeURIComponent(this.replacements(g.value,a)),f="&")}return c};h.extractCreativeAndSignature=function(a,b){var c=null;try{b.has("X-AmpAdSignature")&&(c=Ra(b.get("X-AmpAdSignature")))}finally{return Promise.resolve({creative:a,signature:c})}};AMP.registerElement("amp-ad-network-cloudflare-impl",xc);
})});
//# sourceMappingURL=amp-ad-network-cloudflare-impl-0.1.js.map

