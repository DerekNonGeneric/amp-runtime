(self.AMP=self.AMP||[]).push({n:"amp-selector",v:"123456789",f:(function(AMP){function g(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var l=self.log;function m(){if(l.user)return l.user;throw Error("failed to call initLogConstructor");};function n(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView,b=b.__AMP_TOP||b;a=p(b,"ampdoc").getAmpDoc(a)}return a}function p(a,b){q(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function q(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};function r(a,b){for(var c,d=a;d&&d!==c;d=d.parentElement)if(b(d))return d;return null}function t(a){return a.closest?a.closest("[option]"):r(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"[option]"):!1})};var u={NONE:"none",FOCUS:"focus",SELECT:"select"};function v(a){AMP.BaseElement.call(this,a);this.f=!1;this.c=[];this.a=[];this.i=[];this.g=!1;this.j=null;this.b=0;this.h="none"}g(v,AMP.BaseElement);v.prototype.isLayoutSupported=function(){return!0};
v.prototype.buildCallback=function(){var a;a:{a=this.element;if(a.nodeType){var b=(a.ownerDocument||a).defaultView;if(b=b!=(b.__AMP_TOP||b)&&q(b,"action")?p(b,"action"):null){a=b;break a}}a=n(a);a=n(a);a=a.isSingleDoc()?a.win:a;a=p(a,"action")}this.j=a;this.f=this.element.hasAttribute("multiple");this.g=this.element.hasAttribute("disabled");this.element.setAttribute("role","listbox");this.f&&this.element.setAttribute("aria-multiselectable","true");this.g&&this.element.setAttribute("aria-disabled",
"true");var c=this.element.getAttribute("keyboard-select-mode");c?(c=c.toLowerCase(),m().assertEnumValue(u,c),m().assert(!(this.f&&"select"==c),"[keyboard-select-mode=select] not supported for multiple selection amp-selector")):c="none";this.h=c;w(this);this.g||(this.element.addEventListener("click",this.l.bind(this)),this.element.addEventListener("keydown",this.m.bind(this)))};v.prototype.mutatedAttributesCallback=function(a){var b=a.selected;void 0!==b&&x(this,b)};
function x(a,b){if(null===b)y(a);else{var c=Array.isArray(b)?b:[b];a.f||(c=c.slice(0,1));for(var d=c.reduce(function(a,b){a[b]=!0;return a},Object.create(null)),e=0;e<a.a.length;e++){var f=a.a[e],h=f.getAttribute("option");d[h]?z(a,f):A(a,f)}B(a);C(a)}}function B(a,b){if("none"!=a.h){a.a.forEach(function(a){a.tabIndex=-1});var c=b;c||(c=a.f?a.a[0]:a.c[0]||a.a[0]);c&&(a.b=a.a.indexOf(c),c.tabIndex=0)}}
function w(a){[].slice.call(a.element.querySelectorAll("[option]")).forEach(function(b){b.setAttribute("role","option");b.hasAttribute("disabled")&&b.setAttribute("aria-disabled","true");b.hasAttribute("selected")?z(a,b):A(a,b);b.tabIndex=0;a.a.push(b)});B(a);C(a)}
function C(a){var b=[],c=a.element.getAttribute("name");if(!c||a.g)return b;var d=a.element.getAttribute("form");a.i.forEach(function(b){a.element.removeChild(b)});a.i=[];var e=a.win.document,f=e.createDocumentFragment();a.c.forEach(function(h){if(!h.hasAttribute("disabled")){var k=e.createElement("input");h=h.getAttribute("option");k.setAttribute("type","hidden");k.setAttribute("name",c);k.setAttribute("value",h);d&&k.setAttribute("form",d);a.i.push(k);f.appendChild(k);b.push(h)}});a.element.appendChild(f);
return b}
function D(a,b){b.hasAttribute("disabled")||a.mutateElement(function(){var c;b.hasAttribute("selected")?a.f&&(A(a,b),c=C(a)):(z(a,b),c=C(a));if(c){B(a,b);var d;d=a.win;c={targetOption:b.getAttribute("option"),selectedOptions:c};var e={detail:c};Object.assign(e,void 0);"function"==typeof d.CustomEvent?d=new d.CustomEvent("amp-selector.select",e):(d=d.document.createEvent("CustomEvent"),d.initCustomEvent("amp-selector.select",!!e.bubbles,!!e.cancelable,c));var f=d;a.j.trigger(a.element,"select",f,3)}})}
v.prototype.l=function(a){if(a=a.target)a.hasAttribute("option")||(a=t(a)),a&&D(this,a)};
v.prototype.m=function(a){var b=a.keyCode;switch(b){case 37:case 38:case 39:case 40:if("none"!=this.h)a:{var c="rtl"!=this.win.document.body.getAttribute("dir");switch(a.keyCode){case 37:c=c?-1:1;break;case 38:c=-1;break;case 39:c=c?1:-1;break;case 40:c=1;break;default:break a}a.preventDefault();this.a[this.b].tabIndex=-1;this.b=(this.b+c)%this.a.length;0>this.b&&(this.b+=this.a.length);a=this.a[this.b];a.tabIndex=0;try{a.focus()}catch(d){}a=this.a[this.b];"select"==this.h&&D(this,a)}break;case 13:case 32:c=
a.keyCode,32!=c&&13!=c||!this.a.includes(a.target)||(a.preventDefault(),D(this,a.target))}};function A(a,b){b.removeAttribute("selected");b.setAttribute("aria-selected","false");var c=a.c.indexOf(b);-1!==c&&a.c.splice(c,1)}function y(a){for(;0<a.c.length;){var b=a.c.pop();A(a,b)}}function z(a,b){a.c.includes(b)||(a.f||y(a),b.setAttribute("selected",""),b.setAttribute("aria-selected","true"),a.c.push(b))}AMP.registerElement("amp-selector",v,"amp-selector [option]{cursor:pointer}amp-selector [option][selected]{cursor:auto;outline:1px solid rgba(0,0,0,.7)}amp-selector [disabled][option],amp-selector[disabled] [option],amp-selector[disabled] [selected],amp-selector [selected][disabled]{cursor:auto;outline:none}\n/*# sourceURL=/extensions/amp-selector/0.1/amp-selector.css*/");
})});
//# sourceMappingURL=amp-selector-0.1.js.map

