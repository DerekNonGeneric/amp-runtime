(self.AMP=self.AMP||[]).push({n:"amp-experiment",v:"123456789",f:(function(AMP){function g(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};var k=Object.prototype.toString;Date.now();self.log=self.log||{user:null,dev:null};var l=self.log;function m(){if(l.user)return l.user;throw Error("failed to call initLogConstructor");};function p(a,b){a=a.__AMP_TOP||a;return q(a,b)}function r(a,b){var c,d=a=a.__AMP_TOP||a,e=a,h=b,n=t(d),f=n.variant;f||(f=n.variant={obj:null,promise:null,resolve:null,context:null,ctor:null});f.ctor||f.obj||(f.ctor=h,f.context=e,f.resolve&&q(d,"variant"));c&&q(a,"variant")}function u(a){a=v(a);a=w(a);return q(a,"viewer")}function v(a){return a.nodeType?p((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function w(a){a=v(a);return a.isSingleDoc()?a.win:a}
function q(a,b){var c=t(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function x(a,b){var c=y(a,b);if(c)return c;var d,e=new Promise(function(a){d=a});t(a)[b]={obj:null,promise:e,resolve:d,context:null,ctor:null};return e}function y(a,b){var c=t(a)[b];if(c){if(c.promise)return c.promise;q(a,b);return c.promise=Promise.resolve(c.obj)}return null}function t(a){var b=a.services;b||(b=a.services={});return b};function z(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var h=d.setInterval(function(){b(a)&&(d.clearInterval(h),c())},5)}}function A(a,b){z(a.documentElement,function(){return!!a.body},b)}function B(a){return new Promise(function(b){A(a,b)})};function C(a){var b="amp-user-notification";return D(a,b).then(function(a){return E(a,"userNotificationManager",b)})}function D(a,b){var c=y(a,"userNotificationManager");return c?c:F(a,b)}function G(a,b){return a.ampExtendedElements?!!a.ampExtendedElements[b]:!1}function H(a){return I(a).then(function(a){return E(a,"cid","amp-analytics")})}
function I(a){var b=v(a),c=y(w(a),"cid");return c?c:Promise.resolve().then(function(){return G(b.win,"amp-analytics")?x(w(a),"cid"):b.whenBodyAvailable().then(function(){return G(b.win,"amp-analytics")?x(w(a),"cid"):null})})}function E(a,b,c){return m().assert(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",b,c,c,c)}
function F(a,b){return Promise.resolve().then(function(){return G(a,b)?x(a,"userNotificationManager"):B(a.document).then(function(){return G(a,b)?x(a,"userNotificationManager"):null})})};var J=/^[\w-]+$/;
function K(a,b,c){L(b);M(c);var d=u(a),e=d.getParam("amp-x-"+b);if(e&&c.variants.hasOwnProperty(e))return Promise.resolve(e);var h=!1!==c.sticky,n=c.cidScope||"amp-experiment",f=Promise.resolve(!0);h&&c.consentNotificationId&&(f=C(a.win).then(function(a){return a.getNotification(c.consentNotificationId)}).then(function(a){m().assert(a,"Notification not found: "+c.consentNotificationId);return a.isDismissed()}));return f.then(function(e){if(!e)return null;var d=c.group||b;return N(a,d,h?n:null).then(function(a){for(var b=
0,e=Object.keys(c.variants).sort(),d=0;d<e.length;d++)if(b+=c.variants[e[d]],a<b)return e[d];return null})})}
function M(a){var b=a.variants;m().assert("[object Object]"===k.call(b)&&0<Object.keys(b).length,"Missing experiment variants config.");a.group&&L(a.group);var c=0,d;for(d in b)if(b.hasOwnProperty(d)){L(d);var e=b[d];m().assert("number"===typeof e&&0<e&&100>e,"Invalid percentage %s:%s. Has to be greater than 0 and less than 100",d,e);c+=e}m().assert(100>=c.toFixed(6),"Total percentage is bigger than 100: "+c)}
function N(a,b,c){if(!c)return Promise.resolve(100*a.win.Math.random());var d=H(a).then(function(a){return a.get({scope:c,createCookieIfNotPresent:!0},Promise.resolve())});return Promise.all([d,p(a.win,"crypto")]).then(function(a){return a[1].uniform(b+":"+a[0])}).then(function(a){return 100*a})}function L(a){m().assert(J.test(a),"Invalid name "+a+": %s. Allowed chars are [a-zA-Z0-9-_].")};function O(a){AMP.BaseElement.apply(this,arguments)}g(O,AMP.BaseElement);O.prototype.isLayoutSupported=function(a){return"nodisplay"==a||"container"==a};O.prototype.buildCallback=function(){var a=this,b=P(this),c=Object.create(null),d=Object.keys(b).map(function(d){return K(a.getAmpDoc(),d,b[d]).then(function(a){c[d]=a})}),e=Promise.all(d).then(function(){return c}).then(this.a.bind(this));r(this.win,function(){return e})};
function P(a){a=a.element.children;m().assert(1==a.length&&"SCRIPT"==a[0].tagName&&"APPLICATION/JSON"==a[0].getAttribute("type").toUpperCase(),'<amp-experiment> should contain exactly one <script type="application/json"> child.');return JSON.parse(a[0].textContent)}O.prototype.a=function(a){var b=this.win.document;return B(b).then(function(){for(var c in a)a[c]&&b.body.setAttribute("amp-x-"+c,a[c]);return a})};AMP.registerElement("amp-experiment",O);
})});
//# sourceMappingURL=amp-experiment-0.1.js.map

