{"version":3,"sources":["node_modules/browser-pack/_prelude.js","3p/3p.js","3p/ampcontext-integration.js","3p/ampcontext.js","3p/environment.js","3p/facebook.js","3p/github.js","3p/iframe-messaging-client.js","3p/integration.js","3p/messaging.js","3p/polyfills.js","3p/reddit.js","3p/twitter.js","ads/_ping_.js","ads/a8.js","ads/a9.js","ads/accesstrade.js","ads/adblade.js","ads/adbutler.js","ads/adform.js","ads/adfox.js","ads/adgeneration.js","ads/adhese.js","ads/adition.js","ads/adman.js","ads/admanmedia.js","ads/adreactor.js","ads/adsnative.js","ads/adspeed.js","ads/adspirit.js","ads/adstir.js","ads/adtech.js","ads/adthrive.js","ads/aduptech.js","ads/adverline.js","ads/adverticum.js","ads/advertserve.js","ads/affiliateb.js","ads/amoad.js","ads/appnexus.js","ads/atomx.js","ads/bidtellect.js","ads/brainy.js","ads/bringhub.js","ads/caajainfeed.js","ads/capirs.js","ads/caprofitx.js","ads/chargeads.js","ads/colombia.js","ads/contentad.js","ads/criteo.js","ads/distroscale.js","ads/dotandads.js","ads/eas.js","ads/eplanning.js","ads/ezoic.js","ads/f1e.js","ads/f1h.js","ads/felmat.js","ads/flite.js","ads/fluct.js","ads/fusion.js","ads/genieessp.js","ads/gmossp.js","ads/google/adsense.js","ads/google/correlator.js","ads/google/csa.js","ads/google/doubleclick.js","ads/google/imaVideo.js","ads/google/utils.js","ads/gumgum.js","ads/holder.js","ads/ibillboard.js","ads/imedia.js","ads/imobile.js","ads/improvedigital.js","ads/inmobi.js","ads/ix.js","ads/kargo.js","ads/kiosked.js","ads/kixer.js","ads/ligatus.js","ads/loka.js","ads/mads.js","ads/mantis.js","ads/mediaimpact.js","ads/medianet.js","ads/mediavine.js","ads/meg.js","ads/microad.js","ads/mixpo.js","ads/mywidget.js","ads/nativo.js","ads/navegg.js","ads/nend.js","ads/netletix.js","ads/nokta.js","ads/openadstream.js","ads/openx.js","ads/outbrain.js","ads/plista.js","ads/polymorphicads.js","ads/popin.js","ads/pubmatic.js","ads/pubmine.js","ads/pulsepoint.js","ads/purch.js","ads/relap.js","ads/revcontent.js","ads/rubicon.js","ads/sharethrough.js","ads/sklik.js","ads/slimcutmedia.js","ads/smartadserver.js","ads/smartclip.js","ads/sortable.js","ads/sovrn.js","ads/spotx.js","ads/sunmedia.js","ads/swoop.js","ads/taboola.js","ads/teads.js","ads/triplelift.js","ads/valuecommerce.js","ads/webediads.js","ads/weborama.js","ads/widespace.js","ads/xlift.js","ads/yahoo.js","ads/yahoojp.js","ads/yandex.js","ads/yieldbot.js","ads/yieldmo.js","ads/yieldone.js","ads/zedo.js","ads/zergnet.js","ads/zucks.js","src/3p-frame-messaging.js","src/config.js","src/event-helper-listen.js","src/json.js","src/log.js","src/mode-object.js","src/mode.js","src/observable.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/string.js","src/style.js","src/types.js","src/url-parse-query-string.js","src/url.js","src/utils/object.js","third_party/babel/custom-babel-helpers.js"],"names":[],"mappings":"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","file":"integration.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utility functions for scripts running inside of a third\n * party iframe.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\n\n\nimport {dev, user} from '../src/log';\nimport {isArray} from '../src/types';\nimport {map} from '../src/utils/object';\nimport {rethrowAsync} from '../src/log';\n\n\n/** @typedef {function(!Window, !Object)}  */\nlet ThirdPartyFunctionDef;\n\n\n/**\n * @const {!Object<ThirdPartyFunctionDef>}\n * @visibleForTesting\n */\nexport const registrations = map();\n\n/** @type {number} */\nlet syncScriptLoads = 0;\n\n/**\n * @param {string} id The specific 3p integration.\n * @param {ThirdPartyFunctionDef} draw Function that draws the 3p integration.\n */\nexport function register(id, draw) {\n  dev().assert(!registrations[id], 'Double registration %s', id);\n  registrations[id] = draw;\n}\n\n/**\n * Execute the 3p integration with the given id.\n * @param {string} id\n * @param {!Window} win\n * @param {!Object} data\n */\nexport function run(id, win, data) {\n  const fn = registrations[id];\n  user().assert(fn, 'Unknown 3p: ' + id);\n  fn(win, data);\n}\n\n/**\n * Synchronously load the given script URL. Only use this if you need a sync\n * load. Otherwise use {@link loadScript}.\n * Supports taking a callback that will be called synchronously after the given\n * script was executed.\n * @param {!Window} win\n * @param {string} url\n * @param {function()=} opt_cb\n */\nexport function writeScript(win, url, opt_cb) {\n  /*eslint no-useless-concat: 0*/\n  win.document\n      .write('<' + 'script src=\"' + encodeURI(url) + '\"><' + '/script>');\n  if (opt_cb) {\n    executeAfterWriteScript(win, opt_cb);\n  }\n}\n\n/**\n * Asynchronously load the given script URL.\n * @param {!Window} win\n * @param {string} url\n * @param {function()=} opt_cb\n * @param {function()=} opt_errorCb\n */\nexport function loadScript(win, url, opt_cb, opt_errorCb) {\n  /** @const {!Element} */\n  const s = win.document.createElement('script');\n  s.src = url;\n  if (opt_cb) {\n    s.onload = opt_cb;\n  }\n  if (opt_errorCb) {\n    s.onerror = opt_errorCb;\n  }\n  win.document.body.appendChild(s);\n}\n\n/**\n * Call function in micro task or timeout as a fallback.\n * This is a lightweight helper, because we cannot guarantee that\n * Promises are available inside the 3p frame.\n * @param {!Window} win\n * @param {function()} fn\n */\nexport function nextTick(win, fn) {\n  const P = win.Promise;\n  if (P) {\n    P.resolve().then/*OK*/(fn);\n  } else {\n    win.setTimeout(fn, 0);\n  }\n}\n\n/**\n * Run the function after all currently waiting sync scripts have been\n * executed.\n * @param {!Window} win\n * @param {function()} fn\n */\nfunction executeAfterWriteScript(win, fn) {\n  const index = syncScriptLoads++;\n  win['__runScript' + index] = fn;\n  win.document.write('<' + 'script>__runScript' + index + '()<' + '/script>');\n}\n\n/**\n * Throws if the given src doesn't start with prefix(es).\n * @param {!Array<string>|string} prefix\n * @param {string} src\n */\nexport function validateSrcPrefix(prefix, src) {\n  if (!isArray(prefix)) {\n    prefix = [prefix];\n  }\n  if (src !== undefined) {\n    for (let p = 0; p <= prefix.length; p++) {\n      const protocolIndex = src.indexOf(prefix[p]);\n      if (protocolIndex == 0) {\n        return;\n      }\n    }\n  }\n  throw new Error('Invalid src ' + src);\n}\n\n/**\n * Throws if the given src doesn't contain the string\n * @param {string} string\n * @param {string} src\n */\nexport function validateSrcContains(string, src) {\n  if (src.indexOf(string) === -1) {\n    throw new Error('Invalid src ' + src);\n  }\n}\n\n/**\n * Utility function to perform a potentially asynchronous task\n * exactly once for all frames of a given type and the provide the respective\n * value to all frames.\n * @param {!Window} global Your window\n * @param {string} taskId Must be not conflict with any other global variable\n *     you use. Must be the same for all callers from all frames that want\n *     the same result.\n * @param {function(function(*))} work Function implementing the work that\n *     is to be done. Receives a second function that should be called with\n *     the result when the work is done.\n * @param {function(*)} cb Callback function that is called when the work is\n *     done. The first argument is the result.\n */\nexport function computeInMasterFrame(global, taskId, work, cb) {\n  const master = global.context.master;\n  let tasks = master.__ampMasterTasks;\n  if (!tasks) {\n    tasks = master.__ampMasterTasks = {};\n  }\n  let cbs = tasks[taskId];\n  if (!tasks[taskId]) {\n    cbs = tasks[taskId] = [];\n  }\n  cbs.push(cb);\n  if (!global.context.isMaster) {\n    return;  // Only do work in master.\n  }\n  work(result => {\n    for (let i = 0; i < cbs.length; i++) {\n      cbs[i].call(null, result);\n    }\n    tasks[taskId] = {\n      push(cb) {\n        cb(result);\n      },\n    };\n  });\n}\n\n/**\n * Validates given data. Throws an exception if the data does not\n * contains a mandatory field. If called with the optional param\n * opt_optionalFields, it also validates that the data contains no fields other\n * than mandatory and optional fields.\n *\n * Mandatory fields also accept a string Array as an item. All items in that\n * array are considered as alternatives to each other. So the validation checks\n * that the data contains exactly one of those alternatives.\n *\n * @param {!Object} data\n * @param {!Array<string|!Array<string>>} mandatoryFields\n * @param {Array<string>=} opt_optionalFields\n */\nexport function validateData(data, mandatoryFields, opt_optionalFields) {\n  let allowedFields = opt_optionalFields || [];\n  for (let i = 0; i < mandatoryFields.length; i++) {\n    const field = mandatoryFields[i];\n    if (Array.isArray(field)) {\n      validateExactlyOne(data, field);\n      allowedFields = allowedFields.concat(field);\n    } else {\n      user().assert(data[field],\n          'Missing attribute for %s: %s.', data.type, field);\n      allowedFields.push(field);\n    }\n  }\n  if (opt_optionalFields) {\n    validateAllowedFields(data, allowedFields);\n  }\n}\n\n/**\n * Throws an exception if data does not contains exactly one field\n * mentioned in the alternativeField array.\n * @param {!Object} data\n * @param {!Array<string>} alternativeFields\n */\nfunction validateExactlyOne(data, alternativeFields) {\n  let countFileds = 0;\n\n  for (let i = 0; i < alternativeFields.length; i++) {\n    const field = alternativeFields[i];\n    if (data[field]) {\n      countFileds += 1;\n    }\n  }\n\n  user().assert(countFileds === 1,\n      '%s must contain exactly one of attributes: %s.',\n      data.type,\n      alternativeFields.join(', '));\n}\n\n/**\n * Throws a non-interrupting exception if data contains a field not supported\n * by this embed type.\n * @param {!Object} data\n * @param {!Array<string>} allowedFields\n */\nfunction validateAllowedFields(data, allowedFields) {\n  const defaultAvailableFields = {\n    width: true,\n    height: true,\n    type: true,\n    referrer: true,\n    canonicalUrl: true,\n    pageViewId: true,\n    location: true,\n    mode: true,\n    consentNotificationId: true,\n    ampSlotIndex: true,\n  };\n\n  for (const field in data) {\n    if (!data.hasOwnProperty(field) || field in defaultAvailableFields) {\n      continue;\n    }\n    if (allowedFields.indexOf(field) < 0) {\n      // Throw in a timeout, because we do not want to interrupt execution,\n      // because that would make each removal an instant backward incompatible\n      // change.\n      rethrowAsync(new Error(`Unknown attribute for ${data.type}: ${field}.`));\n    }\n  }\n}\n\n/** @private {!Object<string, boolean>} */\nlet experimentToggles = {};\n\n/**\n * Returns true if an experiment is enabled.\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(experimentId) {\n  return !!experimentToggles[experimentId];\n}\n\n/**\n * Set experiment toggles.\n * @param {!Object<string, boolean>} toggles\n */\nexport function setExperimentToggles(toggles) {\n  experimentToggles = toggles;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {AbstractAmpContext} from './ampcontext';\nimport {computeInMasterFrame} from './3p';\nimport {dev, user} from '../src/log';\nimport {dict} from '../src/utils/object';\n\n\n/**\n * Returns the \"master frame\" for all widgets of a given type.\n * This frame should be used to e.g. fetch scripts that can\n * be reused across frames.\n * once experiment is removed.\n * @param {!Window} win\n * @param {string} type\n * @return {!Window}\n */\nexport function masterSelection(win, type) {\n  // The master has a special name.\n  const masterName = 'frame_' + type + '_master';\n  let master;\n  try {\n    // Try to get the master from the parent. If it does not\n    // exist yet we get a security exception that we catch\n    // and ignore.\n    master = win.parent.frames[masterName];\n  } catch (expected) {\n    /* ignore */\n  }\n  if (!master) {\n    // No master yet, rename ourselves to be master. Yaihh.\n    win.name = masterName;\n    master = win;\n  }\n  return master;\n}\n\n\nexport class IntegrationAmpContext extends AbstractAmpContext {\n\n  /** @override */\n  isAbstractImplementation_() {\n    return false;\n  }\n\n  /**\n   * @return {boolean}\n   * @protected\n   */\n  updateDimensionsEnabled_() {\n    // Only make this available to selected embeds until the generic solution is\n    // available.\n    return (this.embedType_ === 'facebook'\n        || this.embedType_ === 'twitter'\n        || this.embedType_ == 'github');\n  }\n\n  /** @return {!Window} */\n  get master() {\n    return this.master_();\n  }\n\n  /** @return {!Window} */\n  master_() {\n    return masterSelection(this.win_, dev().assertString(this.embedType_));\n  }\n\n  /** @return {boolean} */\n  get isMaster() {\n    return this.isMaster_();\n  }\n\n  /** @return {boolean} */\n  isMaster_() {\n    return this.master == this.win_;\n  }\n\n  /**\n   * @param {number} width\n   * @param {number} height\n   */\n  updateDimensions(width, height) {\n    user().assert(this.updateDimensionsEnabled_(), 'Not available.');\n    this.requestResize(width, height);\n  }\n\n  bootstrapLoaded() {\n    this.client_.sendMessage('bootstrap-loaded');\n  }\n\n  /**\n   * @param {!JsonObject=} opt_data Fields: width, height\n   */\n  renderStart(opt_data) {\n    this.client_.sendMessage('render-start', opt_data);\n  }\n\n  /**\n   * Reports the \"entity\" that was rendered to this frame to the parent for\n   * reporting purposes.\n   * The entityId MUST NOT contain user data or personal identifiable\n   * information. One example for an acceptable data item would be the\n   * creative id of an ad, while the user's location would not be\n   * acceptable.\n   * TODO(alanorozco): Remove duplicate in 3p/integration.js once this\n   * implementation becomes canonical.\n   * @param {string} entityId See comment above for content.\n   */\n  reportRenderedEntityIdentifier(entityId) {\n    this.client_.sendMessage('entity-id', dict({\n      'id': user().assertString(entityId),\n    }));\n  }\n\n  /**\n   * Performs a potentially asynchronous task exactly once for all frames of a\n   * given type and the provide the respective value to all frames.\n   * @param {!Window} global Your window\n   * @param {string} taskId Must be not conflict with any other global variable\n   *     you use. Must be the same for all callers from all frames that want\n   *     the same result.\n   * @param {function(function(*))} work Function implementing the work that\n   *     is to be done. Receives a second function that should be called with\n   *     the result when the work is done.\n   * @param {function(*)} cb Callback function that is called when the work is\n   *     done. The first argument is the result.\n   */\n  computeInMasterFrame(global, taskId, work, cb) {\n    computeInMasterFrame(global, taskId, work, cb);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {dict} from '../src/utils/object';\nimport {dev} from '../src/log';\nimport {IframeMessagingClient} from './iframe-messaging-client';\nimport {MessageType} from '../src/3p-frame-messaging';\nimport {nextTick} from './3p';\nimport {tryParseJson} from '../src/json';\nimport {isObject} from '../src/types';\n\nexport class AbstractAmpContext {\n\n  /**\n   *  @param {!Window} win The window that the instance is built inside.\n   */\n  constructor(win) {\n    dev().assert(!this.isAbstractImplementation_(),\n        'Should not construct AbstractAmpContext instances directly');\n\n    /** @protected {!Window} */\n    this.win_ = win;\n\n    // This value is cached since it could be overwritten by the master frame\n    // check using a value of a different type.\n    /** @private {?string} */\n    this.cachedFrameName_ = this.win_.name || null;\n\n    /** @type {?string} */\n    this.embedType_ = null;\n\n    // ----------------------------------------------------\n    // Please keep public attributes alphabetically sorted.\n    // ----------------------------------------------------\n\n    /** @public {?string|undefined} */\n    this.canary = null;\n\n    /** @type {?string} */\n    this.canonicalUrl = null;\n\n    /** @type {?string} */\n    this.clientId = null;\n\n    /** @type {?string|undefined} */\n    this.container = null;\n\n    /** @type {?Object<String, *>} */\n    this.data = null;\n\n    /** @type {?boolean} */\n    this.hidden = null;\n\n    /** @type {?Object} */\n    this.initialLayoutRect = null;\n\n    /** @type {?Object} */\n    this.initialIntersection = null;\n\n    /** @type {?Location} */\n    this.location = null;\n\n    /** @type {?Object} */\n    this.mode = null;\n\n    /** @type {?string} */\n    this.pageViewId = null;\n\n    /** @type {?string} */\n    this.referrer = null;\n\n    /** @type {?string} */\n    this.sentinel = null;\n\n    /** @type {?string} */\n    this.sourceUrl = null;\n\n    /** @type {?number} */\n    this.startTime = null;\n\n    /** @type {?string} */\n    this.tagName = null;\n\n    this.findAndSetMetadata_();\n\n    /** @protected {!IframeMessagingClient} */\n    this.client_ = new IframeMessagingClient(win);\n    this.client_.setHostWindow(this.getHostWindow_());\n    this.client_.setSentinel(dev().assertString(this.sentinel));\n\n    this.listenForPageVisibility_();\n  }\n\n  /**\n   * @return {boolean}\n   * @protected\n   */\n  isAbstractImplementation_() {\n    return true;\n  }\n\n  /** Registers an general handler for page visibility. */\n  listenForPageVisibility_() {\n    this.client_.makeRequest(\n        MessageType.SEND_EMBED_STATE,\n        MessageType.EMBED_STATE,\n        data => {\n          this.hidden = data.pageHidden;\n          this.dispatchVisibilityChangeEvent_();\n        });\n  }\n\n  /**\n   * TODO(alanorozco): Deprecate native event mechanism.\n   * @private\n   */\n  dispatchVisibilityChangeEvent_() {\n    const event = this.win_.document.createEvent('Event');\n    event.data = {hidden: this.hidden};\n    event.initEvent('amp:visibilitychange', true, true);\n    this.win_.dispatchEvent(event);\n  }\n\n  /**\n   *  Listen to page visibility changes.\n   *  @param {function({hidden: boolean})} callback Function to call every time\n   *    we receive a page visibility message.\n   *  @returns {function()} that when called stops triggering the callback\n   *    every time we receive a page visibility message.\n   */\n  onPageVisibilityChange(callback) {\n    return this.client_.registerCallback(MessageType.EMBED_STATE, data => {\n      callback({hidden: data.pageHidden});\n    });\n  }\n\n  /**\n   *  Send message to runtime to start sending intersection messages.\n   *  @param {function(Array<Object>)} callback Function to call every time we\n   *    receive an intersection message.\n   *  @returns {function()} that when called stops triggering the callback\n   *    every time we receive an intersection message.\n   */\n  observeIntersection(callback) {\n    const unlisten = this.client_.makeRequest(\n        MessageType.SEND_INTERSECTIONS,\n        MessageType.INTERSECTION,\n        intersection => {\n          callback(intersection.changes);\n        });\n\n    // Call the callback with the value that was transmitted when the\n    // iframe was drawn. Called in nextTick, so that callers don't\n    // have to specially handle the sync case.\n    // TODO(lannka, #8562): Deprecate this behavior\n    nextTick(this.win_, () => {\n      callback([this.initialIntersection]);\n    });\n\n    return unlisten;\n  };\n\n  /**\n   *  Send message to runtime requesting to resize ad to height and width.\n   *    This is not guaranteed to succeed. All this does is make the request.\n   *  @param {number} width The new width for the ad we are requesting.\n   *  @param {number} height The new height for the ad we are requesting.\n   */\n  requestResize(width, height) {\n    this.client_.sendMessage(MessageType.EMBED_SIZE, dict({\n      'width': width,\n      'height': height,\n    }));\n  };\n\n  /**\n   *  Allows a creative to set the callback function for when the resize\n   *    request returns a success. The callback should be set before resizeAd\n   *    is ever called.\n   *  @param {function(number, number)} callback Function to call if the resize\n   *    request succeeds.\n   */\n  onResizeSuccess(callback) {\n    this.client_.registerCallback(MessageType.EMBED_SIZE_CHANGED, obj => {\n      callback(obj.requestedHeight, obj.requestedWidth); });\n  };\n\n  /**\n   *  Allows a creative to set the callback function for when the resize\n   *    request is denied. The callback should be set before resizeAd\n   *    is ever called.\n   *  @param {function(number, number)} callback Function to call if the resize\n   *    request is denied.\n   */\n  onResizeDenied(callback) {\n    this.client_.registerCallback(MessageType.EMBED_SIZE_DENIED, obj => {\n      callback(obj.requestedHeight, obj.requestedWidth);\n    });\n  };\n\n  /**\n   *  Takes the current name on the window, and attaches it to\n   *  the name of the iframe.\n   *  @param {HTMLIFrameElement} iframe The iframe we are adding the context to.\n   */\n  addContextToIframe(iframe) {\n    // TODO(alanorozco): consider the AMP_CONTEXT_DATA case\n    iframe.name = dev().assertString(this.cachedFrameName_);\n  }\n\n  /**\n   *  Notifies the parent document of no content available inside embed.\n   */\n  noContentAvailable() {\n    this.client_.sendMessage(MessageType.NO_CONTENT);\n  }\n\n  /**\n   *  Parse the metadata attributes from the name and add them to\n   *  the class instance.\n   *  @param {!Object|string} data\n   *  @private\n   */\n  setupMetadata_(data) {\n    const dataObject = dev().assert(\n        typeof data === 'string' ? tryParseJson(data) : data,\n        'Could not setup metadata.');\n\n    const context = dataObject._context || dataObject.attributes._context;\n\n    this.canary = context.canary;\n    this.canonicalUrl = context.canonicalUrl;\n    this.clientId = context.clientId;\n    this.container = context.container;\n    this.data = context.tagName;\n    this.hidden = context.hidden;\n    this.initialLayoutRect = context.initialLayoutRect;\n    this.initialIntersection = context.initialIntersection;\n    this.location = context.location;\n    this.mode = context.mode;\n    this.pageViewId = context.pageViewId;\n    this.referrer = context.referrer;\n    this.sentinel = context.sentinel;\n    this.sourceUrl = context.sourceUrl;\n    this.startTime = context.startTime;\n    this.tagName = context.tagName;\n\n    this.embedType_ = dataObject.type || null;\n  }\n\n  /**\n   *  Calculate the hostWindow\n   *  @private\n   */\n  getHostWindow_() {\n    const sentinelMatch = this.sentinel.match(/((\\d+)-\\d+)/);\n    dev().assert(sentinelMatch, 'Incorrect sentinel format');\n    const depth = Number(sentinelMatch[2]);\n    const ancestors = [];\n    for (let win = this.win_; win && win != win.parent; win = win.parent) {\n      // Add window keeping the top-most one at the front.\n      ancestors.push(win.parent);\n    }\n    return ancestors[(ancestors.length - 1) - depth];\n  }\n\n  /**\n   *  Checks to see if there is a window variable assigned with the\n   *  sentinel value, sets it, and returns true if so.\n   *  @private\n   */\n  findAndSetMetadata_() {\n    // If the context data is set on window, that means we don't need\n    // to check the name attribute as it has been bypassed.\n    // TODO(alanorozco): why the heck could AMP_CONTEXT_DATA be two different\n    // types? FIX THIS.\n    if (isObject(this.win_.sf_) && this.win_.sf_.cfg) {\n      this.setupMetadata_(/** @type {!string}*/(this.win_.sf_.cfg));\n    } else if (this.win_.AMP_CONTEXT_DATA) {\n      if (typeof this.win_.AMP_CONTEXT_DATA == 'string') {\n        this.sentinel = this.win_.AMP_CONTEXT_DATA;\n      } else if (isObject(this.win_.AMP_CONTEXT_DATA)) {\n        this.setupMetadata_(this.win_.AMP_CONTEXT_DATA);\n      }\n    } else {\n      this.setupMetadata_(this.win_.name);\n    }\n  }\n}\n\n\nexport class AmpContext extends AbstractAmpContext {\n  /** @return {boolean} */\n  isAbstractImplementation_() {\n    return false;\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {listenParent} from './messaging';\n\n/**\n * Info about the current document/iframe.\n * @type {boolean}\n */\nlet inViewport = true;\n\n/**\n * @param {boolean} inV\n */\nexport function setInViewportForTesting(inV) {\n  inViewport = inV;\n}\n\n// Active intervals. Must be global, because people clear intervals\n// with clearInterval from a different window.\nconst intervals = {};\nlet intervalId = 0;\n\n/**\n * Add instrumentation to a window and all child iframes.\n * @param {!Window} win\n */\nexport function manageWin(win) {\n  try {\n    manageWin_(win);\n  } catch (e) {\n    // We use a try block, because the ad integrations often swallow errors.\n    console./*OK*/error(e.message, e.stack);\n  }\n}\n\n/**\n * @param {!Window} win\n */\nfunction manageWin_(win) {\n  if (win.ampSeen) {\n    return;\n  }\n  win.ampSeen = true;\n  // Instrument window.\n  instrumentEntryPoints(win);\n\n  // Watch for new iframes.\n  installObserver(win);\n  // Existing iframes.\n  maybeInstrumentsNodes(win, win.document.querySelectorAll('iframe'));\n  blockSyncPopups(win);\n}\n\n\n/**\n * Add instrumentation code to doc.write.\n * @param {!Window} parent\n * @param {!Window} win\n */\nfunction instrumentDocWrite(parent, win) {\n  const doc = win.document;\n  const close = doc.close;\n  doc.close = function() {\n    parent.ampManageWin = function(win) {\n      manageWin(win);\n    };\n    if (!parent.ampSeen) {\n      // .call does not work in Safari with document.write.\n      doc.write('<script>window.parent.ampManageWin(window)</script>');\n    }\n    doc._close = close;\n    return doc._close();\n  };\n}\n\n/**\n * Add instrumentation code to iframe's srcdoc.\n * @param {!Window} parent\n * @param {!Element} iframe\n */\nfunction instrumentSrcdoc(parent, iframe) {\n  let srcdoc = iframe.getAttribute('srcdoc');\n  parent.ampManageWin = function(win) {\n    manageWin(win);\n  };\n  srcdoc += '<script>window.parent.ampManageWin(window)</script>';\n  iframe.setAttribute('srcdoc', srcdoc);\n}\n\n/**\n * Instrument added nodes if they are instrumentable iframes.\n * @param {!Window} win\n * @param {!Array<!Node>|NodeList<!Node>|NodeList<!Element>|null} addedNodes\n */\nfunction maybeInstrumentsNodes(win, addedNodes) {\n  for (let n = 0; n < addedNodes.length; n++) {\n    const node = addedNodes[n];\n    try {\n      if (node.tagName != 'IFRAME') {\n        continue;\n      }\n      const src = node.getAttribute('src');\n      const srcdoc = node.getAttribute('srcdoc');\n      if (src == null || /^(about:|javascript:)/i.test(src.trim()) ||\n          srcdoc) {\n        if (node.contentWindow) {\n          instrumentIframeWindow(node, win, node.contentWindow);\n          node.addEventListener('load', () => {\n            try {\n              instrumentIframeWindow(node, win, node.contentWindow);\n            } catch (e) {\n              console./*OK*/error(e.message, e.stack);\n            }\n          });\n        } else if (srcdoc) {\n          instrumentSrcdoc(parent, node);\n        }\n      }\n    } catch (e) {\n      console./*OK*/error(e.message, e.stack);\n    }\n  }\n}\n\n/**\n * Installs a mutation observer in a window to look for iframes.\n * @param {!Element} node\n * @param {!Window} parent\n * @param {!Window} win\n */\nfunction instrumentIframeWindow(node, parent, win) {\n  if (win.ampSeen) {\n    return;\n  }\n  const doc = win.document;\n  instrumentDocWrite(parent, win);\n  if (doc.body && doc.body.childNodes.length) {\n    manageWin(win);\n  }\n}\n\n/**\n * Installs a mutation observer in a window to look for iframes.\n * @param {!Window} win\n */\nfunction installObserver(win) {\n  if (!window.MutationObserver) {\n    return;\n  }\n  const observer = new MutationObserver(function(mutations) {\n    for (let i = 0; i < mutations.length; i++) {\n      maybeInstrumentsNodes(win, mutations[i].addedNodes);\n    }\n  });\n  observer.observe(win.document.documentElement, {\n    subtree: true,\n    childList: true,\n  });\n}\n\n/**\n * Replace timers with variants that can be throttled.\n * @param {!Window} win\n */\nfunction instrumentEntryPoints(win) {\n  // Change setTimeout to respect a minimum timeout.\n  const setTimeout = win.setTimeout;\n  win.setTimeout = function(fn, time) {\n    time = minTime(time);\n    arguments[1] = time;\n    return setTimeout.apply(this, arguments);\n  };\n  // Implement setInterval in terms of setTimeout to make\n  // it respect the same rules\n  win.setInterval = function(fn) {\n    const id = intervalId++;\n    const args = Array.prototype.slice.call(arguments);\n    function wrapper() {\n      next();\n      if (typeof fn == 'string') {\n        // Handle rare and dangerous string arg case.\n        return (0, win.eval/*NOT OK but whatcha gonna do.*/).call(win, fn);\n      } else {\n        return fn.apply(this, arguments);\n      }\n    }\n    args[0] = wrapper;\n    function next() {\n      intervals[id] = win.setTimeout.apply(win, args);\n    }\n    next();\n    return id;\n  };\n  const clearInterval = win.clearInterval;\n  win.clearInterval = function(id) {\n    clearInterval(id);\n    win.clearTimeout(intervals[id]);\n    delete intervals[id];\n  };\n}\n\n/**\n * Blackhole the legacy popups since they should never be used for anything.\n * @param {!Window} win\n */\nfunction blockSyncPopups(win) {\n  let count = 0;\n  function maybeThrow() {\n    // Prevent deep recursion.\n    if (count++ > 2) {\n      throw new Error('security error');\n    }\n  }\n  try {\n    win.alert = maybeThrow;\n    win.prompt = function() {\n      maybeThrow();\n      return '';\n    };\n    win.confirm = function() {\n      maybeThrow();\n      return false;\n    };\n  } catch (e) {\n    console./*OK*/error(e.message, e.stack);\n  }\n}\n\n/**\n * Calculates the minimum time that a timeout should have right now.\n * @param {number|undefined} time\n * @return {number|undefined}\n */\nfunction minTime(time) {\n  if (!inViewport) {\n    time += 1000;\n  }\n  // Eventually this should throttle like this:\n  // - for timeouts in the order of a frame use requestAnimationFrame\n  //   instead.\n  // - only allow about 2-4 short timeouts (< 16ms) in a 16ms time frame.\n  //   Throttle further timeouts to requestAnimationFrame.\n  return time;\n}\n\nexport function installEmbedStateListener() {\n  listenParent(window, 'embed-state', function(data) {\n    inViewport = data.inViewport;\n  });\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from './3p';\nimport {user} from '../src/log';\nimport {dashToUnderline} from '../src/string';\n\n/**\n * Produces the Facebook SDK object for the passed in callback.\n *\n * Note: Facebook SDK fails to render multiple plugins when the SDK is only\n * loaded in one frame. To Allow the SDK to render them correctly we load the\n * script per iframe.\n *\n * @param {!Window} global\n * @param {function(!Object)} cb\n */\nfunction getFacebookSdk(global, cb) {\n  loadScript(global, 'https://connect.facebook.net/' + dashToUnderline(window.navigator.language) + '/sdk.js', () => {\n    cb(global.FB);\n  });\n}\n\n/**\n * Create DOM element for the Facebook embedded content plugin.\n * Reference: https://developers.facebook.com/docs/plugins/embedded-posts\n * @param {!Window} global\n * @param {!Object} data The element data\n * @return {!Element} div\n */\nfunction getPostContainer(global, data) {\n  const container = global.document.createElement('div');\n  const embedAs = data.embedAs || 'post';\n  user().assert(['post', 'video'].indexOf(embedAs) !== -1,\n      'Attribute data-embed-as  for <amp-facebook> value is wrong, should be' +\n      ' \"post\" or \"video\" was: %s', embedAs);\n  container.className = 'fb-' + embedAs;\n  container.setAttribute('data-href', data.href);\n  return container;\n}\n\n/**\n * Create DOM element for the Facebook comments plugin:\n * Reference: https://developers.facebook.com/docs/plugins/comments\n * @param {!Window} global\n * @param {!Object} data The element data\n * @return {!Element} div\n */\nfunction getCommentsContainer(global, data) {\n  const container = global.document.createElement('div');\n  container.className = 'fb-comments';\n  container.setAttribute('data-href', data.href);\n  container.setAttribute('data-numposts', data.numposts || 10);\n  container.setAttribute('data-colorscheme', data.colorscheme || 'light');\n  container.setAttribute('data-width', '100%');\n  return container;\n}\n\n/**\n * Create DOM element for the Facebook like-button plugin:\n * Reference: https://developers.facebook.com/docs/plugins/like-button\n * @param {!Window} global\n * @param {!Object} data The element data\n * @return {!Element} div\n */\nfunction getLikeContainer(global, data) {\n  const container = global.document.createElement('div');\n  container.className = 'fb-like';\n  container.setAttribute('data-action', data.action || 'like');\n  container.setAttribute('data-colorscheme', data.colorscheme || 'light');\n  container.setAttribute('data-href', data.href);\n  container.setAttribute('data-kd_site', data.kd_site || 'false');\n  container.setAttribute('data-layout', data.layout || 'standard');\n  container.setAttribute('data-ref', data.ref || '');\n  container.setAttribute('data-share', data.share || 'false');\n  container.setAttribute('data-show_faces', data.show_faces || 'false');\n  container.setAttribute('data-size', data.size || 'small');\n  return container;\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function facebook(global, data) {\n  const extension = global.context.tagName;\n  let container;\n  if (extension === 'AMP-FACEBOOK-LIKE') {\n    container = getLikeContainer(global, data);\n  } else if (extension === 'AMP-FACEBOOK-COMMENTS') {\n    container = getCommentsContainer(global, data);\n  } else /*AMP-FACEBOOK */ {\n    container = getPostContainer(global, data);\n  }\n\n  global.document.getElementById('c').appendChild(container);\n\n  getFacebookSdk(global, FB => {\n    // Dimensions are given by the parent frame.\n    delete data.width;\n    delete data.height;\n\n    FB.Event.subscribe('xfbml.resize', event => {\n      context.updateDimensions(\n          parseInt(event.width, 10),\n          parseInt(event.height, 10) + /* margins */ 20);\n    });\n\n    FB.init({xfbml: true, version: 'v2.5'});\n  });\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript} from './3p';\nimport {user} from '../src/log';\n\n/**\n * Get the correct script for the gist.\n *\n * Use writeScript: Failed to execute 'write' on 'Document': It isn't possible\n * to write into a document from an asynchronously-loaded external script unless\n * it is explicitly opened.\n *\n * @param {!Window} global\n * @param {string} scriptSource The source of the script, different for post and comment embeds.\n */\nfunction getGistJs(global, scriptSource, cb) {\n  writeScript(global, scriptSource, function() {\n    cb(global.gist);\n  });\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function github(global, data) {\n  user().assert(\n      data.gistid,\n      'The data-gistid attribute is required for <amp-gist> %s',\n      data.element);\n\n  let gistUrl = 'https://gist.github.com/' + encodeURIComponent(data.gistid) + '.js';\n\n  if (data.file) {\n    gistUrl += '?file=' + encodeURIComponent(data.file);\n  }\n\n  getGistJs(global, gistUrl, function() {\n    // Dimensions are given by the parent frame.\n    delete data.width;\n    delete data.height;\n    const gistContainer = global.document.querySelector('#c .gist');\n\n    // get all links in the embed\n    const gistLinks = global.document.querySelectorAll('.gist-meta a');\n    for (let i = 0; i < gistLinks.length; i++) {\n      // have the links open in a new tab #8587\n      gistLinks[i].target = '_BLANK';\n    }\n\n    context.updateDimensions(\n        gistContainer./*OK*/offsetWidth,\n        gistContainer./*OK*/offsetHeight\n    );\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Observable} from '../src/observable';\nimport {map} from '../src/utils/object';\nimport {\n  listen,\n  serializeMessage,\n  deserializeMessage,\n} from '../src/3p-frame-messaging';\nimport {getMode} from '../src/mode';\nimport {dev} from '../src/log';\n\nexport class IframeMessagingClient {\n\n  /**\n   *  @param {!Window} win A window object.\n   */\n  constructor(win) {\n    /** @private {!Window} */\n    this.win_ = win;\n    /** @private {?string} */\n    this.rtvVersion_ = getMode().rtvVersion || null;\n    /** @private {!Window} */\n    this.hostWindow_ = win.parent;\n    /** @private {?string} */\n    this.sentinel_ = null;\n    /**\n     * Map messageType keys to observables to be fired when messages of that\n     * type are received.\n     * @private {!Object}\n     */\n    this.observableFor_ = map();\n    this.setupEventListener_();\n  }\n\n  /**\n   * Make an event listening request to the host window.\n   *\n   * @param {string} requestType The type of the request message.\n   * @param {string} responseType The type of the response message.\n   * @param {function(Object)} callback The callback function to call\n   *   when a message with type responseType is received.\n   */\n  makeRequest(requestType, responseType, callback) {\n    const unlisten = this.registerCallback(responseType, callback);\n    this.sendMessage(requestType);\n    return unlisten;\n  }\n\n  /**\n   * Register callback function for message with type messageType.\n   *   As it stands right now, only one callback can exist at a time.\n   *   All future calls will overwrite any previously registered\n   *   callbacks.\n   * @param {string} messageType The type of the message.\n   * @param {function(Object)} callback The callback function to call\n   *   when a message with type messageType is received.\n   */\n  registerCallback(messageType, callback) {\n    // NOTE : no validation done here. any callback can be register\n    // for any callback, and then if that message is received, this\n    // class *will execute* that callback\n    return this.getOrCreateObservableFor_(messageType).add(callback);\n  }\n\n  /**\n   *  Send a postMessage to Host Window\n   *  @param {string} type The type of message to send.\n   *  @param {JsonObject=} opt_payload The payload of message to send.\n   */\n  sendMessage(type, opt_payload) {\n    this.hostWindow_.postMessage/*OK*/(\n        serializeMessage(\n            type, dev().assertString(this.sentinel_),\n            opt_payload, this.rtvVersion_),\n        '*');\n  }\n\n  /**\n   * Sets up event listener for post messages of the desired type.\n   *   The actual implementation only uses a single event listener for all of\n   *   the different messages, and simply diverts the message to be handled\n   *   by different callbacks.\n   *   To add new messages to listen for, call registerCallback with the\n   *   messageType to listen for, and the callback function.\n   * @private\n   */\n  setupEventListener_() {\n    listen(this.win_, 'message', event => {\n      // Does it look a message from AMP?\n      if (event.source != this.hostWindow_) {\n        return;\n      }\n\n      const message = deserializeMessage(event.data);\n      if (!message || message['sentinel'] != this.sentinel_) {\n        return;\n      }\n\n      this.fireObservable_(message['type'], message);\n    });\n  }\n\n  /**\n   * @param {!Window} win\n   */\n  setHostWindow(win) {\n    this.hostWindow_ = win;\n  }\n\n  /**\n   * @param {string} sentinel\n   */\n  setSentinel(sentinel) {\n    this.sentinel_ = sentinel;\n  }\n\n  /**\n   * @param {string} messageType\n   * @return {!Observable<Object>}\n   */\n  getOrCreateObservableFor_(messageType) {\n    if (!(messageType in this.observableFor_)) {\n      this.observableFor_[messageType] = new Observable();\n    }\n    return this.observableFor_[messageType];\n  }\n\n  /**\n   * @param {string} messageType\n   * @param {Object} message\n   */\n  fireObservable_(messageType, message) {\n    if (messageType in this.observableFor_) {\n      this.observableFor_[messageType].fire(message);\n    }\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registers all known ad network factories and then executes\n * one of them.\n *\n * This files gets minified and published to\n * https://3p.ampproject.net/$version/f.js\n */\n\nimport './polyfills';\nimport {\n  IntegrationAmpContext,\n  masterSelection,\n} from './ampcontext-integration';\nimport {installEmbedStateListener, manageWin} from './environment';\nimport {isExperimentOn} from './3p';\nimport {nonSensitiveDataPostMessage, listenParent} from './messaging';\nimport {\n  computeInMasterFrame,\n  nextTick,\n  register,\n  run,\n  setExperimentToggles,\n} from './3p';\nimport {urls} from '../src/config';\nimport {endsWith} from '../src/string';\nimport {parseJson} from '../src/json';\nimport {parseUrl, getSourceUrl, isProxyOrigin} from '../src/url';\nimport {dev, initLogConstructor, setReportError, user} from '../src/log';\nimport {dict} from '../src/utils/object.js';\nimport {getMode} from '../src/mode';\nimport {startsWith} from '../src/string.js';\n\n// 3P - please keep in alphabetic order\nimport {facebook} from './facebook';\nimport {github} from './github';\nimport {reddit} from './reddit';\nimport {twitter} from './twitter';\n\n// 3P Ad Networks - please keep in alphabetic order\nimport {_ping_} from '../ads/_ping_';\nimport {a8} from '../ads/a8';\nimport {a9} from '../ads/a9';\nimport {accesstrade} from '../ads/accesstrade';\nimport {adblade, industrybrains} from '../ads/adblade';\nimport {adbutler} from '../ads/adbutler';\nimport {adform} from '../ads/adform';\nimport {adfox} from '../ads/adfox';\nimport {adgeneration} from '../ads/adgeneration';\nimport {adhese} from '../ads/adhese';\nimport {adition} from '../ads/adition';\nimport {adman} from '../ads/adman';\nimport {admanmedia} from '../ads/admanmedia';\nimport {adreactor} from '../ads/adreactor';\nimport {adsense} from '../ads/google/adsense';\nimport {adsnative} from '../ads/adsnative';\nimport {adspeed} from '../ads/adspeed';\nimport {adspirit} from '../ads/adspirit';\nimport {adstir} from '../ads/adstir';\nimport {adtech} from '../ads/adtech';\nimport {adthrive} from '../ads/adthrive';\nimport {aduptech} from '../ads/aduptech';\nimport {adverline} from '../ads/adverline';\nimport {adverticum} from '../ads/adverticum';\nimport {advertserve} from '../ads/advertserve';\nimport {affiliateb} from '../ads/affiliateb';\nimport {amoad} from '../ads/amoad';\nimport {appnexus} from '../ads/appnexus';\nimport {atomx} from '../ads/atomx';\nimport {bidtellect} from '../ads/bidtellect';\nimport {brainy} from '../ads/brainy';\nimport {bringhub} from '../ads/bringhub';\nimport {caajainfeed} from '../ads/caajainfeed';\nimport {capirs} from '../ads/capirs';\nimport {caprofitx} from '../ads/caprofitx';\nimport {chargeads} from '../ads/chargeads';\nimport {colombia} from '../ads/colombia';\nimport {contentad} from '../ads/contentad';\nimport {criteo} from '../ads/criteo';\nimport {csa} from '../ads/google/csa';\nimport {distroscale} from '../ads/distroscale';\nimport {ezoic} from '../ads/ezoic';\nimport {dotandads} from '../ads/dotandads';\nimport {doubleclick} from '../ads/google/doubleclick';\nimport {eas} from '../ads/eas';\nimport {eplanning} from '../ads/eplanning';\nimport {f1e} from '../ads/f1e';\nimport {f1h} from '../ads/f1h';\nimport {felmat} from '../ads/felmat';\nimport {flite} from '../ads/flite';\nimport {fluct} from '../ads/fluct';\nimport {fusion} from '../ads/fusion';\nimport {genieessp} from '../ads/genieessp';\nimport {gmossp} from '../ads/gmossp';\nimport {gumgum} from '../ads/gumgum';\nimport {holder} from '../ads/holder';\nimport {ibillboard} from '../ads/ibillboard';\nimport {imaVideo} from '../ads/google/imaVideo';\nimport {imedia} from '../ads/imedia';\nimport {imobile} from '../ads/imobile';\nimport {improvedigital} from '../ads/improvedigital';\nimport {inmobi} from '../ads/inmobi';\nimport {ix} from '../ads/ix';\nimport {kargo} from '../ads/kargo';\nimport {kiosked} from '../ads/kiosked';\nimport {kixer} from '../ads/kixer';\nimport {ligatus} from '../ads/ligatus';\nimport {loka} from '../ads/loka';\nimport {mads} from '../ads/mads';\nimport {mantisDisplay, mantisRecommend} from '../ads/mantis';\nimport {mediaimpact} from '../ads/mediaimpact';\nimport {medianet} from '../ads/medianet';\nimport {mediavine} from '../ads/mediavine';\nimport {meg} from '../ads/meg';\nimport {microad} from '../ads/microad';\nimport {mixpo} from '../ads/mixpo';\nimport {mywidget} from '../ads/mywidget';\nimport {nativo} from '../ads/nativo';\nimport {navegg} from '../ads/navegg';\nimport {nend} from '../ads/nend';\nimport {netletix} from '../ads/netletix';\nimport {nokta} from '../ads/nokta';\nimport {openadstream} from '../ads/openadstream';\nimport {openx} from '../ads/openx';\nimport {outbrain} from '../ads/outbrain';\nimport {plista} from '../ads/plista';\nimport {polymorphicads} from '../ads/polymorphicads';\nimport {popin} from '../ads/popin';\nimport {pubmatic} from '../ads/pubmatic';\nimport {pubmine} from '../ads/pubmine';\nimport {pulsepoint} from '../ads/pulsepoint';\nimport {purch} from '../ads/purch';\nimport {revcontent} from '../ads/revcontent';\nimport {relap} from '../ads/relap';\nimport {rubicon} from '../ads/rubicon';\nimport {sharethrough} from '../ads/sharethrough';\nimport {sklik} from '../ads/sklik';\nimport {slimcutmedia} from '../ads/slimcutmedia';\nimport {smartadserver} from '../ads/smartadserver';\nimport {smartclip} from '../ads/smartclip';\nimport {sortable} from '../ads/sortable';\nimport {sovrn} from '../ads/sovrn';\nimport {spotx} from '../ads/spotx';\nimport {sunmedia} from '../ads/sunmedia';\nimport {swoop} from '../ads/swoop';\nimport {taboola} from '../ads/taboola';\nimport {teads} from '../ads/teads';\nimport {triplelift} from '../ads/triplelift';\nimport {valuecommerce} from '../ads/valuecommerce';\nimport {webediads} from '../ads/webediads';\nimport {weboramaDisplay} from '../ads/weborama';\nimport {widespace} from '../ads/widespace';\nimport {xlift} from '../ads/xlift';\nimport {yahoo} from '../ads/yahoo';\nimport {yahoojp} from '../ads/yahoojp';\nimport {yandex} from '../ads/yandex';\nimport {yieldbot} from '../ads/yieldbot';\nimport {yieldmo} from '../ads/yieldmo';\nimport {yieldone} from '../ads/yieldone';\nimport {zedo} from '../ads/zedo';\nimport {zergnet} from '../ads/zergnet';\nimport {zucks} from '../ads/zucks';\n\n\n/**\n * Whether the embed type may be used with amp-embed tag.\n * @const {!Object<string, boolean>}\n */\nconst AMP_EMBED_ALLOWED = {\n  _ping_: true,\n  bringhub: true,\n  'mantis-recommend': true,\n  mywidget: true,\n  outbrain: true,\n  plista: true,\n  smartclip: true,\n  taboola: true,\n  zergnet: true,\n};\n\n\n/** @const {!JsonObject} */\nconst FALLBACK_CONTEXT_DATA = dict({\n  '_context': dict(),\n});\n\n\n// Need to cache iframeName as it will be potentially overwritten by\n// masterSelection, as per below.\nconst iframeName = window.name;\nconst data = getData(iframeName);\n\nwindow.context = data['_context'];\n\n// This should only be invoked after window.context is set\ninitLogConstructor();\nsetReportError(console.error.bind(console));\n\n// Experiment toggles\nsetExperimentToggles(window.context.experimentToggles);\ndelete window.context.experimentToggles;\n\nif (getMode().test || getMode().localDev) {\n  register('_ping_', _ping_);\n}\n\n// Keep the list in alphabetic order\nregister('a8', a8);\nregister('a9', a9);\nregister('accesstrade', accesstrade);\nregister('adblade', adblade);\nregister('adbutler', adbutler);\nregister('adform', adform);\nregister('adfox', adfox);\nregister('adgeneration', adgeneration);\nregister('adhese', adhese);\nregister('adition', adition);\nregister('adman', adman);\nregister('admanmedia', admanmedia);\nregister('adreactor', adreactor);\nregister('adsense', adsense);\nregister('adsnative', adsnative);\nregister('adspeed', adspeed);\nregister('adspirit', adspirit);\nregister('adstir', adstir);\nregister('adtech', adtech);\nregister('adthrive', adthrive);\nregister('aduptech', aduptech);\nregister('adverline', adverline);\nregister('adverticum', adverticum);\nregister('advertserve', advertserve);\nregister('affiliateb', affiliateb);\nregister('amoad', amoad);\nregister('appnexus', appnexus);\nregister('atomx', atomx);\nregister('bidtellect', bidtellect);\nregister('brainy', brainy);\nregister('bringhub', bringhub);\nregister('caajainfeed', caajainfeed);\nregister('capirs', capirs);\nregister('caprofitx', caprofitx);\nregister('chargeads', chargeads);\nregister('colombia', colombia);\nregister('contentad', contentad);\nregister('criteo', criteo);\nregister('csa', csa);\nregister('distroscale', distroscale);\nregister('dotandads', dotandads);\nregister('doubleclick', doubleclick);\nregister('eas', eas);\nregister('eplanning', eplanning);\nregister('ezoic', ezoic);\nregister('f1e', f1e);\nregister('f1h', f1h);\nregister('facebook', facebook);\nregister('felmat', felmat);\nregister('flite', flite);\nregister('fluct', fluct);\nregister('fusion', fusion);\nregister('genieessp', genieessp);\nregister('github', github);\nregister('gmossp', gmossp);\nregister('gumgum', gumgum);\nregister('holder', holder);\nregister('ibillboard', ibillboard);\nregister('ima-video', imaVideo);\nregister('imedia', imedia);\nregister('imobile', imobile);\nregister('improvedigital', improvedigital);\nregister('industrybrains', industrybrains);\nregister('inmobi', inmobi);\nregister('ix', ix);\nregister('kargo', kargo);\nregister('kiosked', kiosked);\nregister('kixer', kixer);\nregister('ligatus', ligatus);\nregister('loka', loka);\nregister('mads', mads);\nregister('mantis-display', mantisDisplay);\nregister('mantis-recommend', mantisRecommend);\nregister('mediaimpact', mediaimpact);\nregister('medianet', medianet);\nregister('mediavine', mediavine);\nregister('meg', meg);\nregister('microad', microad);\nregister('mixpo', mixpo);\nregister('mywidget', mywidget);\nregister('nativo', nativo);\nregister('navegg', navegg);\nregister('nend', nend);\nregister('netletix', netletix);\nregister('nokta', nokta);\nregister('openadstream', openadstream);\nregister('openx', openx);\nregister('outbrain', outbrain);\nregister('plista', plista);\nregister('polymorphicads', polymorphicads);\nregister('popin', popin);\nregister('pubmatic', pubmatic);\nregister('pubmine', pubmine);\nregister('pulsepoint', pulsepoint);\nregister('purch', purch);\nregister('reddit', reddit);\nregister('relap', relap);\nregister('revcontent', revcontent);\nregister('rubicon', rubicon);\nregister('sharethrough', sharethrough);\nregister('sklik', sklik);\nregister('slimcutmedia', slimcutmedia);\nregister('smartadserver', smartadserver);\nregister('smartclip', smartclip);\nregister('sortable', sortable);\nregister('sovrn', sovrn);\nregister('spotx', spotx);\nregister('sunmedia', sunmedia);\nregister('swoop', swoop);\nregister('taboola', taboola);\nregister('teads', teads);\nregister('triplelift', triplelift);\nregister('twitter', twitter);\nregister('valuecommerce', valuecommerce);\nregister('webediads', webediads);\nregister('weborama-display', weboramaDisplay);\nregister('widespace', widespace);\nregister('xlift' , xlift);\nregister('yahoo', yahoo);\nregister('yahoojp', yahoojp);\nregister('yandex', yandex);\nregister('yieldbot', yieldbot);\nregister('yieldmo', yieldmo);\nregister('zergnet', zergnet);\nregister('yieldone', yieldone);\nregister('zedo', zedo);\nregister('zucks', zucks);\n\n// For backward compat, we always allow these types without the iframe\n// opting in.\nconst defaultAllowedTypesInCustomFrame = [\n  // Entries must be reasonably safe and not allow overriding the injected\n  // JS URL.\n  // Each custom iframe can override this through the second argument to\n  // draw3p. See amp-ad docs.\n  'facebook',\n  'twitter',\n  'doubleclick',\n  'yieldbot',\n  '_ping_',\n];\n\n\n/**\n * Gets data encoded in iframe name attribute.\n * @return {!JsonObject}\n */\nfunction getData(iframeName) {\n  try {\n    // TODO(bradfrizzell@): Change the data structure of the attributes\n    //    to make it less terrible.\n    return parseJson(iframeName)['attributes'];\n  } catch (err) {\n    if (!getMode().test) {\n      dev().info(\n          'INTEGRATION', 'Could not parse context from:', iframeName);\n    }\n    return FALLBACK_CONTEXT_DATA;\n  }\n}\n\n\n/**\n * Visible for testing.\n * Draws a 3p embed to the window. Expects the data to include the 3p type.\n * @param {!Window} win\n * @param {!Object} data\n * @param {function(!Object, function(!Object))|undefined} configCallback\n *     Optional callback that allows user code to manipulate the incoming\n *     configuration. See\n *     https://github.com/ampproject/amphtml/issues/1210 for some context\n *     on this.\n */\nexport function draw3p(win, data, configCallback) {\n  const type = data.type;\n\n  user().assert(isTagNameAllowed(data.type, win.context.tagName),\n      'Embed type %s not allowed with tag %s', data.type, win.context.tagName);\n  if (configCallback) {\n    configCallback(data, data => {\n      user().assert(data,\n          'Expected configuration to be passed as first argument');\n      run(type, win, data);\n    });\n  } else {\n    run(type, win, data);\n  }\n};\n\n/**\n * @return {boolean} Whether this is the master iframe.\n */\nfunction isMaster() {\n  return window.context.master == window;\n}\n\n/**\n * Draws an embed, optionally synchronously, to the DOM.\n * @param {function(!Object, function(!Object))} opt_configCallback If provided\n *     will be invoked with two arguments:\n *     1. The configuration parameters supplied to this embed.\n *     2. A callback that MUST be called for rendering to proceed. It takes\n *        no arguments. Configuration is expected to be modified in-place.\n * @param {!Array<string>=} opt_allowed3pTypes List of advertising network\n *     types you expect.\n * @param {!Array<string>=} opt_allowedEmbeddingOrigins List of domain suffixes\n *     that are allowed to embed this frame.\n */\nwindow.draw3p = function(opt_configCallback, opt_allowed3pTypes,\n    opt_allowedEmbeddingOrigins) {\n  try {\n    const location = parseUrl(data['_context']['location']['href']);\n\n    ensureFramed(window);\n    validateParentOrigin(window, location);\n    validateAllowedTypes(window, data['type'], opt_allowed3pTypes);\n    if (opt_allowedEmbeddingOrigins) {\n      validateAllowedEmbeddingOrigins(window, opt_allowedEmbeddingOrigins);\n    }\n    installContext(window);\n    delete data['_context'];\n    manageWin(window);\n    installEmbedStateListener();\n    draw3p(window, data, opt_configCallback);\n\n    if (isAmpContextExperimentOn()) {\n      window.context.bootstrapLoaded();\n    } else {\n      updateVisibilityState(window);\n\n      // Subscribe to page visibility updates.\n      nonSensitiveDataPostMessage('send-embed-state');\n      nonSensitiveDataPostMessage('bootstrap-loaded');\n    }\n  } catch (e) {\n    const c = window.context || {mode: {test: false}};\n    if (!c.mode.test) {\n      lightweightErrorReport(e, c.canary);\n      throw e;\n    }\n  }\n};\n\n\n/** @return {boolean} */\nfunction isAmpContextExperimentOn() {\n  return isExperimentOn('3p-use-ampcontext');\n}\n\n\n/**\n * Installs window.context API.\n * @param {!Window} win\n */\nfunction installContext(win) {\n  if (isAmpContextExperimentOn()) {\n    installContextUsingExperimentalImpl(win);\n    return;\n  }\n\n  installContextUsingStandardImpl(win);\n}\n\n\n/**\n * Installs window.context API.\n * @param {!Window} win\n */\nfunction installContextUsingExperimentalImpl(win) {\n  win.context = new IntegrationAmpContext(win);\n}\n\n\n/**\n * Installs window.context using standard (to be deprecated) implementation.\n * @param {!Window} win\n */\nfunction installContextUsingStandardImpl(win) {\n  // Define master related properties to be lazily read.\n  Object.defineProperties(win.context, {\n    master: {\n      get: () => masterSelection(win, data['type']),\n    },\n    isMaster: {\n      get: isMaster,\n    },\n  });\n\n  win.context.data = data;\n  win.context.location = parseUrl(data['_context']['location']['href']);\n  win.context.noContentAvailable = triggerNoContentAvailable;\n  win.context.requestResize = triggerResizeRequest;\n  win.context.renderStart = triggerRenderStart;\n\n  const type = data['type'];\n  if (type === 'facebook' || type === 'twitter' || type === 'github') {\n    // Only make this available to selected embeds until the\n    // generic solution is available.\n    win.context.updateDimensions = triggerDimensions;\n  }\n\n  // This only actually works for ads.\n  const initialIntersection = win.context.initialIntersection;\n  win.context.observeIntersection = cb => {\n    const unlisten = observeIntersection(cb);\n    // Call the callback with the value that was transmitted when the\n    // iframe was drawn. Called in nextTick, so that callers don't\n    // have to specially handle the sync case.\n    nextTick(win, () => cb([initialIntersection]));\n    return unlisten;\n  };\n  win.context.onResizeSuccess = onResizeSuccess;\n  win.context.onResizeDenied = onResizeDenied;\n  win.context.reportRenderedEntityIdentifier =\n      reportRenderedEntityIdentifier;\n  win.context.computeInMasterFrame = computeInMasterFrame;\n  win.context.addContextToIframe = iframe => {\n    iframe.name = iframeName;\n  };\n  win.context.getHtml = getHtml;\n}\n\n\nfunction triggerNoContentAvailable() {\n  nonSensitiveDataPostMessage('no-content');\n}\n\nfunction triggerDimensions(width, height) {\n  nonSensitiveDataPostMessage('embed-size', dict({\n    'width': width,\n    'height': height,\n  }));\n}\n\nfunction triggerResizeRequest(width, height) {\n  nonSensitiveDataPostMessage('embed-size', dict({\n    'width': width,\n    'height': height,\n  }));\n}\n\n/**\n * @param {!JsonObject=} opt_data fields: width, height\n */\nfunction triggerRenderStart(opt_data) {\n  nonSensitiveDataPostMessage('render-start', opt_data);\n}\n\n/**\n * Id for getHtml postMessage.\n * @type {!number}\n */\nlet currentMessageId = 0;\n\n/**\n * See readme for window.context.getHtml\n * @param {!string} selector - CSS selector of the node to take content from\n * @param {!Array<string>} attributes - tag attributes to be left in the stringified HTML\n * @param {!Function} callback\n */\nfunction getHtml(selector, attributes, callback) {\n  const messageId = currentMessageId++;\n  nonSensitiveDataPostMessage('get-html', dict({\n    'selector': selector,\n    'attributes': attributes,\n    'messageId': messageId,\n  }));\n\n  const unlisten = listenParent(window, 'get-html-result', data => {\n    if (data.messageId === messageId) {\n      callback(data.content);\n      unlisten();\n    }\n  });\n}\n\n/**\n * Registers a callback for intersections of this iframe with the current\n * viewport.\n * The passed in array has entries that aim to be compatible with\n * the IntersectionObserver spec callback.\n * http://rawgit.com/slightlyoff/IntersectionObserver/master/index.html#callbackdef-intersectionobservercallback\n * @param {function(!Array<IntersectionObserverEntry>)} observerCallback\n * @returns {!function()} A function which removes the event listener that\n *    observes for intersection messages.\n */\nfunction observeIntersection(observerCallback) {\n  // Send request to received records.\n  nonSensitiveDataPostMessage('send-intersections');\n  return listenParent(window, 'intersection', data => {\n    observerCallback(data.changes);\n  });\n}\n\n/**\n * Listens for events via postMessage and updates `context.hidden` based on\n * it and forwards the event to a custom event called `amp:visibilitychange`.\n * @param {!Window} global\n */\nfunction updateVisibilityState(global) {\n  listenParent(window, 'embed-state', function(data) {\n    global.context.hidden = data.pageHidden;\n    dispatchVisibilityChangeEvent(global, data.pageHidden);\n  });\n}\n\n\nfunction dispatchVisibilityChangeEvent(win, isHidden) {\n  const event = win.document.createEvent('Event');\n  event.data = {hidden: isHidden};\n  event.initEvent('amp:visibilitychange', true, true);\n  win.dispatchEvent(event);\n}\n\n/**\n * Registers a callback for communicating when a resize request succeeds.\n * @param {function(number, number)} observerCallback\n * @returns {!function()} A function which removes the event listener that\n *    observes for resize status messages.\n */\nfunction onResizeSuccess(observerCallback) {\n  return listenParent(window, 'embed-size-changed', data => {\n    observerCallback(data.requestedHeight, data.requestedWidth);\n  });\n}\n\n/**\n * Registers a callback for communicating when a resize request is denied.\n * @param {function(number, number)} observerCallback\n * @returns {!function()} A function which removes the event listener that\n *    observes for resize status messages.\n */\nfunction onResizeDenied(observerCallback) {\n  return listenParent(window, 'embed-size-denied', data => {\n    observerCallback(data.requestedHeight, data.requestedWidth);\n  });\n}\n\n/**\n * Reports the \"entity\" that was rendered to this frame to the parent for\n * reporting purposes.\n * The entityId MUST NOT contain user data or personal identifiable\n * information. One example for an acceptable data item would be the\n * creative id of an ad, while the user's location would not be\n * acceptable.\n * @param {string} entityId See comment above for content.\n */\nfunction reportRenderedEntityIdentifier(entityId) {\n  user().assert(typeof entityId == 'string',\n      'entityId should be a string %s', entityId);\n  nonSensitiveDataPostMessage('entity-id', dict({\n    'id': entityId,\n  }));\n}\n\n/**\n * Throws if the current frame's parent origin is not equal to\n * the claimed origin.\n * Only check for browsers that support ancestorOrigins\n * @param {!Window} window\n * @param {!Location} parentLocation\n * @visibleForTesting\n */\nexport function validateParentOrigin(window, parentLocation) {\n  const ancestors = window.location.ancestorOrigins;\n  // Currently only webkit and blink based browsers support\n  // ancestorOrigins. In that case we proceed but mark the origin\n  // as non-validated.\n  if (!ancestors || !ancestors.length) {\n    return;\n  }\n  user().assert(ancestors[0] == parentLocation.origin,\n      'Parent origin mismatch: %s, %s',\n      ancestors[0], parentLocation.origin);\n}\n\n/**\n * Check that this iframe intended this particular ad type to run.\n * @param {!Window} window\n * @param {string} type 3p type\n * @param {!Array<string>|undefined} allowedTypes May be undefined.\n * @visibleForTesting\n */\nexport function validateAllowedTypes(window, type, allowedTypes) {\n  const thirdPartyHost = parseUrl(urls.thirdParty).hostname;\n\n  // Everything allowed in default iframe.\n  if (window.location.hostname == thirdPartyHost) {\n    return;\n  }\n  if (urls.thirdPartyFrameRegex.test(window.location.hostname)) {\n    return;\n  }\n  if (window.location.hostname == 'ads.localhost') {\n    return;\n  }\n  if (defaultAllowedTypesInCustomFrame.indexOf(type) != -1) {\n    return;\n  }\n  user().assert(allowedTypes && allowedTypes.indexOf(type) != -1,\n      'Non-whitelisted 3p type for custom iframe: ' + type);\n}\n\n/**\n * Check that parent host name was whitelisted.\n * @param {!Window} window\n * @param {!Array<string>} allowedHostnames Suffixes of allowed host names.\n * @visibleForTesting\n */\nexport function validateAllowedEmbeddingOrigins(window, allowedHostnames) {\n  if (!window.document.referrer) {\n    throw new Error('Referrer expected: ' + window.location.href);\n  }\n  const ancestors = window.location.ancestorOrigins;\n  // We prefer the unforgable ancestorOrigins, but referrer is better than\n  // nothing.\n  const ancestor = ancestors ? ancestors[0] : window.document.referrer;\n  let hostname = parseUrl(ancestor).hostname;\n  if (isProxyOrigin(ancestor)) {\n    // If we are on the cache domain, parse the source hostname from\n    // the referrer. The referrer is used because it should be\n    // trustable.\n    hostname = parseUrl(getSourceUrl(window.document.referrer)).hostname;\n  }\n  for (let i = 0; i < allowedHostnames.length; i++) {\n    // Either the hostname is exactly as whitelisted\n    if (allowedHostnames[i] == hostname) {\n      return;\n    }\n    // Or it ends in .$hostname (aka is a sub domain of the whitelisted domain.\n    if (endsWith(hostname, '.' + allowedHostnames[i])) {\n      return;\n    }\n  }\n  throw new Error('Invalid embedding hostname: ' + hostname + ' not in '\n      + allowedHostnames);\n}\n\n/**\n * Throws if this window is a top level window.\n * @param {!Window} window\n * @visibleForTesting\n */\nexport function ensureFramed(window) {\n  if (window == window.parent) {\n    throw new Error('Must be framed: ' + window.location.href);\n  }\n}\n\n/**\n * Expects the fragment to contain JSON.\n * @param {string} fragment Value of location.fragment\n * @return {?JsonObject}\n * @visibleForTesting\n */\nexport function parseFragment(fragment) {\n  try {\n    let json = fragment.substr(1);\n    // Some browser, notably Firefox produce an encoded version of the fragment\n    // while most don't. Since we know how the string should start, this is easy\n    // to detect.\n    if (startsWith(json, '{%22')) {\n      json = decodeURIComponent(json);\n    }\n    return /** @type {!JsonObject} */ (json ? parseJson(json) : dict());\n  } catch (err) {\n    return null;\n  }\n}\n\n/**\n * Not all types of embeds are allowed to be used with all tag names on the\n * AMP side. This function checks whether the current usage is permissible.\n * @param {string} type\n * @param {string|undefined} tagName The tagName that was used to embed this\n *     3p-frame.\n * @return {boolean}\n */\nexport function isTagNameAllowed(type, tagName) {\n  if (tagName == 'AMP-EMBED') {\n    return !!AMP_EMBED_ALLOWED[type];\n  }\n  return true;\n}\n\n/**\n * Reports an error to the server. Must only be called once per page.\n * Not for use in event handlers.\n *\n * We don't use the default error in error.js handler because it has\n * too many deps for this small JS binary.\n *\n * @param {!Error} e\n * @param {boolean} isCanary\n */\nfunction lightweightErrorReport(e, isCanary) {\n  new Image().src = urls.errorReporting +\n      '?3p=1&v=' + encodeURIComponent('$internalRuntimeVersion$') +\n      '&m=' + encodeURIComponent(e.message) +\n      '&ca=' + (isCanary ? 1 : 0) +\n      '&r=' + encodeURIComponent(document.referrer) +\n      '&s=' + encodeURIComponent(e.stack || '');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseJson} from '../src/json';\n\n/**\n * Send messages to parent frame. These should not contain user data.\n * @param {string} type Type of messages\n * @param {!JsonObject=} opt_object Data for the message.\n */\nexport function nonSensitiveDataPostMessage(type, opt_object) {\n  if (window.parent == window) {\n    return;  // Nothing to do.\n  }\n  const object = opt_object || /** @type {JsonObject} */ ({});\n  object['type'] = type;\n  object['sentinel'] = window.context.sentinel;\n  window.parent./*OK*/postMessage(object,\n      window.context.location.origin);\n}\n\n/**\n * Message event listeners.\n * @const {!Array<{type: string, cb: function(!Object)}>}\n */\nconst listeners = [];\n\n/**\n * Listen to message events from document frame.\n * @param {!Window} win\n * @param {string} type Type of messages\n * @param {function(*)} callback Called with data payload of message.\n * @return {function()} function to unlisten for messages.\n */\nexport function listenParent(win, type, callback) {\n  const listener = {\n    type,\n    cb: callback,\n  };\n  listeners.push(listener);\n  startListening(win);\n  return function() {\n    const index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n    }\n  };\n}\n\n/**\n * Listens for message events and dispatches to listeners registered\n * via listenParent.\n * @param {!Window} win\n */\nfunction startListening(win) {\n  if (win.AMP_LISTENING) {\n    return;\n  }\n  win.AMP_LISTENING = true;\n  win.addEventListener('message', function(event) {\n    // Cheap operations first, so we don't parse JSON unless we have to.\n    if (event.source != win.parent ||\n        event.origin != win.context.location.origin ||\n        typeof event.data != 'string' ||\n        event.data.indexOf('amp-') != 0) {\n      return;\n    }\n    // Parse JSON only once per message.\n    const data = parseJson(event.data.substr(4));\n    if (win.context.sentinel && data['sentinel'] != win.context.sentinel) {\n      return;\n    }\n    // Don't let other message handlers interpret our events.\n    if (event.stopImmediatePropagation) {\n      event.stopImmediatePropagation();\n    }\n    // Find all the listeners for this type.\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i].type != data['type']) {\n        continue;\n      }\n      const cb = listeners[i].cb;\n      try {\n        cb(data);\n      } catch (e) {\n        // Do not interrupt execution.\n        setTimeout(() => {\n          throw e;\n        });\n      }\n    }\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Loads all polyfills needed by the AMP 3p integration frame.\n */\n\n\n// This list should not get longer without a very good reason.\nimport '../third_party/babel/custom-babel-helpers';\nimport {install as installMathSign} from '../src/polyfills/math-sign';\nimport {install as installObjectAssign} from '../src/polyfills/object-assign';\n\ninstallMathSign(self);\ninstallObjectAssign(self);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from './3p';\n\n/**\n * Get the correct script for the container.\n * @param {!Window} global\n * @param {string} scriptSource The source of the script, different for post and comment embeds.\n */\nfunction getContainerScript(global, scriptSource) {\n  loadScript(global, scriptSource, () => {});\n}\n\n/**\n * Embedly looks for a blockquote with a '-card' suffixed class.\n * @param {!Window} global\n * @return {!Element} blockquote\n */\nfunction getPostContainer(global) {\n  const blockquote = global.document.createElement('blockquote');\n  blockquote.classList.add('reddit-card');\n  blockquote.setAttribute('data-card-created', Math.floor(Date.now() / 1000));\n  return blockquote;\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data The element data\n * @return {!Element} div\n */\nfunction getCommentContainer(global, data) {\n  const div = global.document.createElement('div');\n  div.classList.add('reddit-embed');\n  div.setAttribute('data-embed-media', 'www.redditmedia.com');\n  // 'uuid' and 'created' are provided by the embed script, but don't seem\n  // to actually be needed. Account for them, but let them default to undefined.\n  div.setAttribute('data-embed-uuid', data.uuid);\n  div.setAttribute('data-embed-created', data.embedcreated);\n  div.setAttribute('data-embed-parent', data.embedparent || 'false');\n  div.setAttribute('data-embed-live', data.embedlive || 'false');\n\n  return div;\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function reddit(global, data) {\n  const embedtype = data.embedtype || 'post';\n\n  let container;\n  let scriptSource = '';\n\n  // Post and comment embeds are handled totally differently.\n  if (embedtype === 'post') {\n    container = getPostContainer(global);\n    scriptSource = 'https://embed.redditmedia.com/widgets/platform.js';\n  } else if (embedtype === 'comment') {\n    container = getCommentContainer(global, data);\n    scriptSource = 'https://www.redditstatic.com/comment-embed.js';\n  }\n\n  const link = global.document.createElement('a');\n  link.href = data.src;\n\n  container.appendChild(link);\n  global.document.getElementById('c').appendChild(container);\n\n  getContainerScript(global, scriptSource);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO(malteubl) Move somewhere else since this is not an ad.\n\nimport {loadScript} from './3p';\nimport {setStyles} from '../src/style';\n\n/**\n * Produces the Twitter API object for the passed in callback. If the current\n * frame is the master frame it makes a new one by injecting the respective\n * script, otherwise it schedules the callback for the script from the master\n * window.\n * @param {!Window} global\n * @param {function(!Object)} cb\n */\nfunction getTwttr(global, cb) {\n  loadScript(global, 'https://platform.twitter.com/widgets.js', () => {\n    cb(global.twttr);\n  });\n  // Temporarily disabled the code sharing between frames.\n  // The iframe throttling implemented in modern browsers can break with this,\n  // because things may execute in frames that are currently throttled, even\n  // though they are needed in the main frame.\n  // See https://github.com/ampproject/amphtml/issues/3220\n  //\n  // computeInMasterFrame(global, 'twttrCbs', done => {\n  //  loadScript(global, 'https://platform.twitter.com/widgets.js', () => {\n  //    done(global.twttr);\n  //  });\n  //}, cb);\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function twitter(global, data) {\n  const tweet = global.document.createElement('div');\n  tweet.id = 'tweet';\n  setStyles(tweet, {\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  });\n  global.document.getElementById('c').appendChild(tweet);\n  getTwttr(global, function(twttr) {\n    // Dimensions are given by the parent frame.\n    delete data.width;\n    delete data.height;\n\n    let twitterWidgetSandbox;\n    twttr.events.bind('resize', event => {\n      // To be safe, make sure the resize event was triggered for the widget we created below.\n      if (twitterWidgetSandbox === event.target) {\n        resize(twitterWidgetSandbox);\n      }\n    });\n\n    twttr.widgets.createTweet(data.tweetid, tweet, data)./*OK*/then(el => {\n      if (el) {\n        // Not a deleted tweet\n        twitterWidgetSandbox = el;\n        resize(twitterWidgetSandbox);\n      }\n    });\n  });\n\n  function resize(container) {\n    const height = container./*OK*/offsetHeight;\n    // 0 height is always wrong and we should get another resize request\n    // later.\n    if (height == 0) {\n      return;\n    }\n    context.updateDimensions(\n        container./*OK*/offsetWidth,\n        height + /* margins */ 20);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData} from '../3p/3p';\nimport {dev} from '../src/log';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function _ping_(global, data) {\n  validateData(data, [], ['valid', 'adHeight', 'adWidth', 'enableIo', 'url']);\n  global.document.getElementById('c').textContent = data.ping;\n  global.ping = Object.create(null);\n\n  global.context.onResizeSuccess(() => {\n    global.ping.resizeSuccess = true;\n  });\n\n  global.context.onResizeDenied(() => {\n    global.ping.resizeSuccess = false;\n  });\n\n  if (data.ad_container) {\n    dev().assert(\n        global.context.container == data.ad_container, 'wrong container');\n  }\n  if (data.valid && data.valid == 'true') {\n    const img = document.createElement('img');\n    if (data.url) {\n      img.setAttribute('src', data.url);\n      img.setAttribute('width', data.width);\n      img.setAttribute('height', data.height);\n    }\n    let width, height;\n    if (data.adHeight) {\n      img.setAttribute('height', data.adHeight);\n      height = Number(data.adHeight);\n    }\n    if (data.adWidth) {\n      img.setAttribute('width', data.adWidth);\n      width = Number(data.adWidth);\n    }\n    document.body.appendChild(img);\n    if (width || height) {\n      global.context.renderStart({width, height});\n    } else {\n      global.context.renderStart();\n    }\n    if (data.enableIo) {\n      global.context.observeIntersection(function(changes) {\n        changes.forEach(function(c) {\n          dev().info('AMP-AD', 'Intersection: (WxH)' +\n              `${c.intersectionRect.width}x${c.intersectionRect.height}`);\n        });\n        // store changes to global.lastIO for testing purpose\n        global.ping.lastIO = changes[changes.length - 1];\n      });\n    }\n  } else {\n    global.setTimeout(() => {\n      global.context.noContentAvailable();\n    }, 1000);\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function a8(global, data) {\n  validateData(data, ['aid'], ['wid', 'eno', 'mid', 'mat', 'type']);\n  global.a8Param = data;\n  writeScript(global, 'https://statics.a8.net/amp/ad.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function a9(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], ['aax_size', 'aax_pubname', 'aax_src']);\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global.aax_size = data.aax_size;\n  global.aax_pubname = data.aax_pubname;\n  global.aax_src = data.aax_src;\n  writeScript(global, 'https://c.amazon-adsystem.com/aax2/assoc.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function accesstrade(global, data) {\n  validateData(data, ['atops', 'atrotid']);\n  global.atParams = data;\n  writeScript(global, 'https://h.accesstrade.net/js/amp/amp.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\nconst adbladeFields = ['width', 'height', 'cid'];\nconst adbladeHostname = 'web.adblade.com';\nconst industrybrainsHostname = 'web.industrybrains.com';\n\nfunction addAdiantUnit(hostname, global, data) {\n  validateData(data, adbladeFields, []);\n\n  // create a data element so our script knows what to do\n  const ins = global.document.createElement('ins');\n  ins.setAttribute('class', 'adbladeads');\n  ins.setAttribute('data-width', data.width);\n  ins.setAttribute('data-height', data.height);\n  ins.setAttribute('data-cid', data.cid);\n  ins.setAttribute('data-host', hostname);\n  ins.setAttribute('data-protocol', 'https');\n  ins.setAttribute('data-tag-type', 1);\n  global.document.getElementById('c').appendChild(ins);\n\n  ins.parentNode.addEventListener(\n      'eventAdbladeRenderStart',\n      global.context.renderStart()\n  );\n\n  // run our JavaScript code to display the ad unit\n  writeScript(global, 'https://' + hostname + '/js/ads/async/show.js');\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adblade(global, data) {\n  addAdiantUnit(adbladeHostname, global, data);\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function industrybrains(global, data) {\n  addAdiantUnit(industrybrainsHostname, global, data);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adbutler(global,data) {\n  validateData(\n      data,\n    ['account', 'zone', 'width', 'height'],\n    ['keyword', 'place']\n  );\n\n  data['place'] = data['place'] || 0;\n\n  const placeholderID = 'placement_' + data['zone'] + '_' + data['place'];\n\n  // placeholder div\n  const d = global.document.createElement('div');\n  d.setAttribute('id', placeholderID);\n  global.document.getElementById('c').appendChild(d);\n\n  global.AdButler = global.AdButler || {};\n  global.AdButler.ads = global.AdButler.ads || [];\n\n  global.AdButler.ads.push({\n    handler(opt) {\n      global.AdButler.register(\n          data['account'],\n          data['zone'],\n          [data['width'], data['height']],\n          placeholderID,\n          opt\n      );\n    },\n    opt: {\n      place: data['place'],\n      pageKey: global.context.pageViewId,\n      keywords: data['keyword'],\n      domain: 'servedbyadbutler.com',\n      click: 'CLICK_MACRO_PLACEHOLDER',\n    },\n  });\n  loadScript(global, 'https://servedbyadbutler.com/app.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateSrcPrefix, validateData} from '../3p/3p';\n\n// Valid adform ad source hosts\nconst hosts = {\n  track: 'https://track.adform.net',\n  adx: 'https://adx.adform.net',\n  a2: 'https://a2.adform.net',\n  adx2: 'https://adx2.adform.net',\n  asia: 'https://asia.adform.net',\n  adx3: 'https://adx3.adform.net',\n};\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adform(global, data) {\n  validateData(data, [['src', 'bn', 'mid']]);\n  global.Adform = {ampData: data};\n  const src = data.src;\n  const bn = data.bn;\n  const mid = data.mid;\n  let url;\n\n  // Custom ad url using \"data-src\" attribute\n  if (src) {\n    validateSrcPrefix(Object.keys(hosts).map(type => hosts[type]), src);\n    url = src;\n  }\n  // Ad tag using \"data-bn\" attribute\n  else if (bn) {\n    url = hosts.track + '/adfscript/?bn=' + encodeURIComponent(bn) + ';msrc=1';\n  }\n  // Ad placement using \"data-mid\" attribute\n  else if (mid) {\n    url = hosts.adx + '/adx/?mid=' + encodeURIComponent(mid);\n  }\n\n  writeScript(global, url);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\nimport {yandex} from './yandex';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adfox(global, data) {\n  validateData(data, ['adfoxParams', 'ownerId']);\n  loadScript(global, 'https://yastatic.net/pcode/adfox/loader.js',\n      () => initAdFox(global, data));\n}\n\n/**\n * @param {!Window} global\n * @param {Object} data\n */\nfunction initAdFox(global, data) {\n  const params = JSON.parse(data.adfoxParams);\n  const container = global.document.createElement('div');\n\n  container.setAttribute('id', 'adfox_container');\n  global.document.getElementById('c').appendChild(container);\n\n  global.Ya.adfoxCode.create({\n    ownerId: data.ownerId,\n    containerId: 'adfox_container',\n    params,\n    onLoad: data => checkLoading(global, data),\n    onRender: () => global.context.renderStart(),\n    onError: () => global.context.noContentAvailable(),\n    onStub: () => global.context.noContentAvailable(),\n  });\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction checkLoading(global, data) {\n  if (data.bundleName === 'banner.direct') {\n    const dblParams = {\n      blockId: data.bundleParams.blockId,\n      data: data.bundleParams.data,\n      isAdfox: true,\n    };\n\n    yandex(global, dblParams);\n    return false;\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adgeneration(global, data) {\n  validateData(data, ['id'],\n      ['targetid', 'displayid', 'adtype', 'async', 'option']);\n\n  // URL encoding\n  const option = data.option ? encodeQueryValue(data.option) : null;\n\n  const url = 'https://i.socdm.com/sdk/js/adg-script-loader.js?' +\n      'id=' + encodeURIComponent(data.id) +\n      '&width=' + encodeURIComponent(data.width) +\n      '&height=' + encodeURIComponent(data.height) +\n      '&adType=' +\n      (data.adtype ? encodeURIComponent(data.adtype.toUpperCase()) : 'FREE') +\n      '&async=' +\n      (data.async ? encodeURIComponent(data.async.toLowerCase()) : 'false') +\n      '&displayid=' +\n      (data.displayid ? encodeURIComponent(data.displayid) : '1') +\n      '&tagver=2.0.0' +\n      (data.targetid ? '&targetID=' + encodeURIComponent(data.targetid) : '') +\n      (option ? '&' + option : '');\n\n  if (data.async && data.async.toLowerCase() === 'true') {\n    loadScript(global, url);\n  } else {\n    writeScript(global, url);\n  }\n}\n\n/**\n * URL encoding of query string\n * @param {!String} str\n */\nfunction encodeQueryValue(str) {\n  return str.split('&').map(v => {\n    const key = v.split('=')[0],\n        val = v.split('=')[1];\n    return encodeURIComponent(key) + '=' + encodeURIComponent(val);\n  }).join('&');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adhese(global, data) {\n  validateData(data, ['location','format', 'account', 'requestType']);\n  let targetParam = '';\n  if (data['targeting']) {\n    const targetList = data['targeting'];\n    for (const category in targetList) {\n      targetParam += encodeURIComponent(category);\n      const targets = targetList[category];\n      for (let x = 0; x < targets.length; x++) {\n        targetParam += encodeURIComponent(targets[x]) +\n            (targets.length - 1 > x ? ';' : '');\n      }\n      targetParam += '/';\n    }\n  }\n  targetParam += '?t=' + Date.now();\n  writeScript(window, 'https://ads-' + encodeURIComponent(data['account']) +\n      '.adhese.com/' + encodeURIComponent(data['requestType']) + '/sl' +\n      encodeURIComponent(data['location']) +\n      encodeURIComponent(data['position']) + '-' +\n      encodeURIComponent(data['format']) + '/' + targetParam);\n  const co = global.document.querySelector('#c');\n  co.width = data['width'];\n  co.height = data['height'];\n  co.addEventListener('adhLoaded', getAdInfo, false);\n}\n\n/**\n * @param {!Object} e\n */\nfunction getAdInfo(e) {\n  if (e.detail.isReady && e.detail.width == e.target.width &&\n      e.detail.height == e.target.height) {\n    global.context.renderStart();\n  } else if (e.detail.isReady && (e.detail.width != e.target.width ||\n      e.detail.width != e.target.width)) {\n    global.context.renderStart({width: e.detail.width,\n      height: e.detail.height});\n  } else {\n    global.context.noContentAvailable();\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adition(global, data) {\n  validateData(data, ['version']);\n  global.data = data;\n  writeScript(global, 'https://imagesrv.adition.com/js/amp/v'\n      + encodeURIComponent(data['version']) + '.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adman(global, data) {\n  validateData(data, ['ws', 'host', 's'], []);\n\n  const script = global.document.createElement('script');\n  script.setAttribute('data-ws', data.ws);\n  script.setAttribute('data-h', data.host);\n  script.setAttribute('data-s', data.s);\n  script.setAttribute('data-tech', 'amp');\n\n  script.src = 'https://static.adman.gr/adman.js';\n\n  global.document.body.appendChild(script);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, loadScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function admanmedia(global, data) {\n  validateData(data, ['id']);\n\n  const encodedId = encodeURIComponent(data.id);\n  loadScript(global, `https://mona.admanmedia.com/go?id=${encodedId}`, () => {\n    const pattern = `script[src$=\"id=${encodedId}\"]`;\n    const scriptTag = global.document.querySelector(pattern);\n    scriptTag.setAttribute('id', `hybs-${encodedId}`);\n    global.context.renderStart();\n  }, () => {\n    global.context.noContentAvailable();\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adreactor(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], ['zid', 'pid', 'custom3']);\n  const url = 'https://adserver.adreactor.com' +\n      '/servlet/view/banner/javascript/zone?' +\n      'zid=' + encodeURIComponent(data.zid) +\n      '&pid=' + encodeURIComponent(data.pid) +\n      '&custom3=' + encodeURIComponent(data.custom3) +\n      '&random=' + Math.floor(89999999 * Math.random() + 10000000) +\n      '&millis=' + Date.now();\n  writeScript(global, url);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adsnative(global, data) {\n  try {\n    validateData(data, ['anapiid'], ['ankv', 'ancat', 'antid']);\n  } catch (e) {\n    validateData(data, ['annid', 'anwid'], ['ankv', 'ancat', 'antid']);\n  }\n\n  // convert string to object\n  let actualkv = undefined;\n  if (data.ankv) {\n    actualkv = {};\n    const arraykv = data.ankv.split(',');\n    for (const k in arraykv) {\n      const kv = arraykv[k].split(':');\n      actualkv[kv.pop()] = kv.pop();\n    }\n  }\n\n  // convert string to array\n  const actualcat = data.ancat ? data.ancat.split(',') : undefined;\n\n  // populate settings\n  global._AdsNativeOpts = {\n    apiKey: data.anapiid,\n    networkKey: data.annid,\n    nativeAdElementId: 'adsnative_ampad',\n    currentPageUrl: global.context.location.href,\n    widgetId: data.anwid,\n    templateKey: data.antid,\n    categories: actualcat,\n    keyValues: actualkv,\n    amp: true,\n  };\n\n  // drop ad placeholder div\n  const ad = global.document.createElement('div');\n  const ampwrapper = global.document.getElementById('c');\n  ad.id = global._AdsNativeOpts.nativeAdElementId;\n  ampwrapper.appendChild(ad);\n\n  // load renderjs\n  writeScript(global, 'https://static.adsnative.com/static/js/render.v1.js');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adspeed(global, data) {\n  validateData(data, ['zone', 'client']);\n\n  const url = 'https://g.adspeed.net/ad.php?do=amphtml&zid=' + data.zone + '&oid=' + data.client + '&cb=' + Math.random();\n\n  writeScript(global, url);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData} from '../3p/3p';\nimport {setStyles} from '../src/style';\n\n/**\n  * @param {!Window} global\n  * @param {!Object} data\n  */\nexport function adspirit(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], ['asmParams', 'asmHost']);\n  const i = global.document.createElement('ins');\n  i.setAttribute('data-asm-params', data['asmParams']);\n  i.setAttribute('data-asm-host', data['asmHost']);\n  i.setAttribute('class', 'asm_async_creative');\n  setStyles(i, {\n    display: 'inline-block',\n    'text-align': 'left',\n  });\n  global.document.getElementById('c').appendChild(i);\n  const s = global.document.createElement('script');\n  s.src = 'https://' + data['asmHost'] + '/adasync.js';\n  global.document.body.appendChild(s);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adstir(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], ['appId', 'adSpot']);\n\n  const v = '4.0';\n\n  const d = global.document.createElement('div');\n  d.setAttribute('class', 'adstir-ad-async');\n  d.setAttribute('data-ver', v);\n  d.setAttribute('data-app-id', data['appId']);\n  d.setAttribute('data-ad-spot', data['adSpot']);\n  d.setAttribute('data-amp', true);\n  d.setAttribute('data-origin', global.context.location.href);\n  global.document.getElementById('c').appendChild(d);\n\n  loadScript(global, 'https://js.ad-stir.com/js/adstir_async.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  writeScript,\n  validateData,\n  validateSrcPrefix,\n  validateSrcContains,\n} from '../3p/3p';\n\n\nexport function adtech(global, data) {\n  const adsrc = data.src;\n  if (typeof adsrc != 'undefined') {\n    validateSrcPrefix('https:', adsrc);\n    validateSrcContains('/addyn/', adsrc);\n    writeScript(global, adsrc);\n  } else {\n    validateData(data, ['atwmn', 'atwdiv'], [\n      'atwco', 'atwheight', 'atwhtnmat',\n      'atwmoat', 'atwnetid', 'atwothat', 'atwplid',\n      'atwpolar', 'atwsizes', 'atwwidth',\n    ]);\n    global.atwco = data.atwco;\n    global.atwdiv = data.atwdiv;\n    global.atwheight = data.atwheight;\n    global.atwhtnmat = data.atwhtnmat;\n    global.atwmn = data.atwmn;\n    global.atwmoat = data.atwmoat;\n    global.atwnetid = data.atwnetid;\n    global.atwothat = data.atwothat;\n    global.atwplid = data.atwplid;\n    global.atwpolar = data.atwpolar;\n    global.atwsizes = data.atwsizes;\n    global.atwwidth = data.atwwidth;\n    writeScript(global,'https://s.aolcdn.com/os/ads/adsWrapper3.js');\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adthrive(global, data) {\n  validateData(data, ['siteId', 'adUnit'], ['sizes']);\n  loadScript(global, 'https://ads.adthrive.com/sites/'\n      + encodeURIComponent(data.siteId) + '/amp.min.js');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function aduptech(global, data) {\n  const elementId = 'aduptech';\n\n  validateData(data, ['placementkey'], ['query', 'mincpc', 'adtest']);\n\n  // add id attriubte to given container (required)\n  global.document.getElementById('c').setAttribute('id', elementId);\n\n  // load aduptech js api\n  loadScript(global, 'https://s.d.adup-tech.com/jsapi', () => {\n\n    // force responsive ads for amp\n    data.responsive = true;\n\n    // ads callback => render start\n    //\n    // NOTE: Not using \"data.onAds = global.context.renderStart;\"\n    //       because the \"onAds()\" callback returns our API object\n    //       as first parameter which will cause errors\n    data.onAds = () => {\n      global.context.renderStart();\n    };\n\n    // no ads callback => noContentAvailable\n    data.onNoAds = global.context.noContentAvailable;\n\n    // embed iframe\n    global.uAd.embed(elementId, data);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adverline(global, data) {\n  validateData(data, ['id', 'plc'], ['s', 'section']);\n\n  writeScript(global, 'https://ads.adverline.com/richmedias/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript} from '../3p/3p';\nimport {validateData} from '../3p/3p';\nimport {setStyle} from '../src/style';\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adverticum(global, data) {\n  validateData(data, ['goa3zone'], ['costumetargetstring']);\n  const zoneid = 'zone' + data['goa3zone'];\n  const d = global.document.createElement('div');\n\n  d.id = zoneid;\n  d.classList.add('goAdverticum');\n\n  document.getElementById('c').appendChild(d);\n  if (data['costumetargetstring']) {\n    const s = global.document.createTextNode(data['costumetargetstring']);\n    const v = global.document.createElement('var');\n    v.setAttribute('id', 'cT');\n    v.setAttribute('class', 'customtarget');\n    setStyle(v, 'display', 'none');\n    v.appendChild(s);\n    document.getElementById(zoneid).appendChild(v);\n  }\n  writeScript(global, '//ad.adverticum.net/g3.js');\n\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function advertserve(global, data) {\n  validateData(data, [], ['zid', 'pid', 'client']);\n\n  const url = 'https://' + data.client + '.advertserve.com' +\n      '/servlet/view/banner/javascript/zone?amp=true' +\n      '&zid=' + encodeURIComponent(data.zid) +\n      '&pid=' + encodeURIComponent(data.pid) +\n      '&random=' + Math.floor(89999999 * Math.random() + 10000000) +\n      '&millis=' + Date.now();\n\n  writeScript(global, url);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function affiliateb(global, data) {\n  validateData(data, ['afb_a', 'afb_p', 'afb_t']);\n  global.afbParam = data;\n  writeScript(global, 'https://track.affiliate-b.com/amp/a.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function amoad(global, data) {\n  validateData(data, ['sid'], ['adType']);\n\n  let script;\n  const attrs = {};\n  if (data['adType'] === 'native') {\n    script = 'https://j.amoad.com/js/n.js';\n    attrs['class'] = 'amoad_native';\n    attrs['data-sid'] = data.sid;\n  } else {\n    script = 'https://j.amoad.com/js/a.js';\n    attrs['class'] = `amoad_frame sid_${data.sid} container_div sp`;\n  }\n  global.amoadOption = {ampData: data};\n\n  const d = global.document.createElement('div');\n  Object.keys(attrs).forEach(k => {\n    d.setAttribute(k, attrs[k]);\n  });\n  global.document.getElementById('c').appendChild(d);\n\n  loadScript(global, script);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, writeScript, validateData} from '../3p/3p';\n\nconst APPNEXUS_AST_URL = 'https://acdn.adnxs.com/ast/ast.js';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function appnexus(global, data) {\n  const args = [];\n  args.push('size=' + data.width + 'x' + data.height);\n  if (data.tagid) {\n    validateData(data, ['tagid']);\n    args.push('id=' + encodeURIComponent(data.tagid));\n    writeScript(global, constructTtj(args));\n    return;\n  } else if (data.member && data.code) {\n    validateData(data, ['member', 'code']);\n    args.push('member=' + encodeURIComponent(data.member));\n    args.push('inv_code=' + encodeURIComponent(data.code));\n    writeScript(global, constructTtj(args));\n    return;\n  }\n\n  /**\n   * Construct the TTJ URL. Note params should be properly encoded first (use encodeURIComponent);\n   * @param  {!Array<string>} args query string params to add to the base URL.\n   * @return {string}      Formated TTJ URL.\n   */\n  function constructTtj(args) {\n    let url = 'https://ib.adnxs.com/ttj?';\n    for (let i = 0; i < args.length; i++) {\n      //append arg to query. Please encode arg first.\n      url += args[i] + '&';\n    }\n\n    return url;\n  }\n\n  appnexusAst(global, data);\n\n}\n\nfunction appnexusAst(global, data) {\n  validateData(data, ['adUnits']);\n  let apntag;\n  if (context.isMaster) { // in case we are in the master iframe, we load AST\n    context.master.apntag = context.master.apntag || {};\n    context.master.apntag.anq = context.master.apntag.anq || [];\n    apntag = context.master.apntag;\n\n    apntag.anq.push(() => {\n      if (data.pageOpts) {\n        apntag.anq.push(() => {\n          //output console information\n          apntag.debug = data.debug || false;\n          apntag.setPageOpts(data.pageOpts);\n        });\n      }\n\n      data.adUnits.forEach(adUnit => {\n        apntag.defineTag(adUnit);\n      });\n\n    });\n    loadScript(global, APPNEXUS_AST_URL, () => {\n      apntag.anq.push(() => {\n        apntag.loadTags();\n        apntag.initialRequestMade = true;\n      });\n    });\n  }\n\n  const div = global.document.createElement('div');\n  div.setAttribute('id', data.target);\n  const divContainer = global.document.getElementById('c');\n  if (divContainer) {\n    divContainer.appendChild(div);\n  }\n\n  if (!apntag) {\n    apntag = context.master.apntag;\n\n    //preserve a global reference\n    global.apntag = context.master.apntag;\n  }\n\n  apntag.anq.push(() => {\n    if (!apntag.initialRequestMade) {\n      apntag.onEvent('adAvailable', data.target, () => {\n        apntag.showTag(data.target, global.window);\n      });\n    } else {\n      apntag.showTag(data.target, global.window);\n    }\n\n    apntag.onEvent('adNoBid', data.target, () => {\n      context.noContentAvailable();\n    });\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function atomx(global, data) {\n  const optionals = ['click', 'uv1', 'uv2', 'uv3', 'context'];\n\n  validateData(data, ['id'], optionals);\n\n  const args = [\n    'size=' + data.width + 'x' + data.height,\n    'id=' + encodeURIComponent(data.id),\n  ];\n\n  for (let i = 0; i < optionals.length; i++) {\n    const optional = optionals[i];\n    if (optional in data) {\n      args.push(optional + '=' + encodeURIComponent(data[optional]));\n    }\n  }\n\n  writeScript(global, 'https://s.ato.mx/p.js#' + args.join('&'));\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function bidtellect(global, data) {\n  const requiredParams = ['t', 'pid', 'sid'];\n  const optionalParams = [\n    'sname',\n    'pubid',\n    'pubname',\n    'renderid',\n    'bestrender',\n    'autoplay',\n    'playbutton',\n    'videotypeid',\n    'videocloseicon',\n    'targetid',\n    'bustframe'];\n  validateData(data, requiredParams, optionalParams);\n  let params = '?t=' + encodeURIComponent(data.t);\n  params += '&pid=' + encodeURIComponent(data.pid);\n  params += '&sid=' + encodeURIComponent(data.sid);\n  if (data.width) {\n    params += '&w=' + encodeURIComponent(data.width);\n  }\n  if (data.height) {\n    params += '&h=' + encodeURIComponent(data.height);\n  }\n  optionalParams.forEach(function(param) {\n    if (data[param]) {\n      params += '&' + param + '=' + encodeURIComponent(data[param]);\n    }\n  });\n  const url = 'https://cdn.bttrack.com/js/infeed/2.0/infeed.min.js' + params;\n  writeScript(global, url);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function brainy(global, data) {\n\n  validateData(data, [], ['aid', 'slotId']);\n\n  const url = 'https://proparm.jp/ssp/p/js1'\n      + '?_aid=' + encodeURIComponent(data['aid'])\n      + '&amp;_slot=' + encodeURIComponent(data['slotId']);\n\n  writeScript(global, url);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function bringhub(global, data) {\n  (global._bringhub = global._bringhub || {\n    viewId: global.context.pageViewId,\n    htmlURL: data['htmlurl'] || global.context.canonicalUrl,\n    ampURL: data['ampurl'] || global.context.sourceUrl,\n    referrer: data['referrer'] || global.context.referrer,\n  });\n\n  writeScript(global, `https://static.bh-cdn.com/msf/amp-loader.js?v=${Date.now()}`, function() {\n    loadScript(global, `https://static.bh-cdn.com/msf/amp-widget.js?v=${global._bringhub.hash}`);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function caajainfeed(global, data) {\n\n  validateData(\n      data,\n    [],\n      [\n        'adSpot',\n        'format',\n        'test',\n        'optout',\n        'offset',\n        'ipv4',\n        'ipv6',\n        'networkReachability',\n        'osName',\n        'osVersion',\n        'osLang',\n        'osTimezone',\n        'deviceVersion',\n        'appId',\n        'appVersion',\n        'kv',\n        'uids',\n        'template',\n        'protocol',\n        'fields',\n      ]\n  );\n\n  global.caAjaInfeedConfig = data;\n  loadScript(global, 'https://cdn.amanad.adtdp.com/sdk/ajaamp.js');\n\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData} from '../3p/3p';\nimport {loadScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function capirs(global, data) {\n  validateData(data, ['begunAutoPad', 'begunBlockId']);\n\n  global['begun_callbacks'] = {\n    lib: {\n      init: () => {\n        const block = global.document.createElement('div');\n        block.id = 'x-' + Math.round(Math.random() * 1e8).toString(36);\n        document.body.appendChild(block);\n\n        global['Adf']['banner']['ssp'](block.id, data['params'], {\n          'begun-auto-pad': data['begunAutoPad'],\n          'begun-block-id': data['begunBlockId'],\n        });\n      },\n    },\n    block: {\n      draw: feed => {\n        const banner = feed['banners']['graph'][0];\n        window.context.renderStart({\n          width: banner['width'],\n          height: banner['height'],\n        });\n        const reportId = 'capirs-' + banner['banner_id'];\n        window.context.reportRenderedEntityIdentifier(reportId);\n      },\n      unexist: window.context.noContentAvailable,\n    },\n  };\n\n  loadScript(global, '//ssp.rambler.ru/lpdid.js');\n  loadScript(global, '//ssp.rambler.ru/capirs_async.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function caprofitx(global, data) {\n  validateData(data, ['tagid'], []);\n\n  global.caprofitxConfig = data;\n  loadScript(global, 'https://cdn.caprofitx.com/tags/amp/profitx_amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateSrcPrefix} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function chargeads(global, data) {\n  const src = data.src;\n  validateSrcPrefix('https://www.chargeplatform.com/', src);\n  writeScript(global, src);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function colombia(global, data) {\n  validateData(data, [\n    'clmb_slot', 'clmb_position', 'clmb_section',\n    'clmb_divid', 'loadingStrategy',\n  ]);\n  // push the two object into the '_colombia' global\n  (global._colombia = global._colombia || []).push({\n    clmbslot: data.clmb_slot,\n    clmbposition: data.clmb_position,\n    clmbsection: data.clmb_section,\n    clmbdivid: data.clmb_divid,\n  });\n  // install observation on entering/leaving the view\n  global.context.observeIntersection(function(newrequest) {\n    newrequest.forEach(function(d) {\n      if (d.intersectionRect.height > 0) {\n        global._colombia.push({\n          visible: true,\n          rect: d,\n        });\n      }\n    });\n  });\n  loadScript(global, 'https://static.clmbtech.com/ad/commons/js/colombia-amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\nimport {parseUrl} from '../src/url';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function contentad(global, data) {\n  validateData(data, [], ['id', 'd', 'wid', 'url']);\n  global.id = data.id;\n  global.d = data.d;\n  global.wid = data.wid;\n  global.url = data.url;\n\n  /* Create div for ad to target */\n  const cadDiv = window.document.createElement('div');\n  cadDiv.id = 'contentad' + global.wid;\n  window.document.body.appendChild(cadDiv);\n\n  /* Pass Source URL */\n  let sourceUrl = window.context.sourceUrl;\n  if (data.url) {\n    const domain = data.url || window.atob(data.d);\n    sourceUrl = sourceUrl.replace(parseUrl(sourceUrl).host, domain);\n  }\n\n  /* Build API URL */\n  const cadApi = 'https://api.content-ad.net/Scripts/widget2.aspx'\n    + '?id=' + encodeURIComponent(global.id)\n    + '&d=' + encodeURIComponent(global.d)\n    + '&wid=' + global.wid\n    + '&url=' + encodeURIComponent(sourceUrl)\n    + '&cb=' + Date.now();\n\n  /* Call Content.ad Widget */\n  writeScript(global, cadApi);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {computeInMasterFrame, loadScript} from '../3p/3p';\nimport {doubleclick} from '../ads/google/doubleclick';\n\n/* global Criteo: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function criteo(global, data) {\n  loadScript(global, 'https://static.criteo.net/js/ld/publishertag.js', () => {\n    if (data.tagtype === 'rta') {\n      // Make sure RTA is called only once\n      computeInMasterFrame(window, 'call-rta', resultCallback => {\n        const params = {\n          networkid: data.networkid,\n          cookiename:\n            data.cookiename || Criteo.PubTag.RTA.DefaultCrtgRtaCookieName,\n          varname:\n            data.varname || Criteo.PubTag.RTA.DefaultCrtgContentName,\n        };\n        Criteo.CallRTA(params);\n        resultCallback(null);\n      }, () => {});\n      setTargeting(global, data);\n    } else if (!data.tagtype || data.tagtype === 'passback') {\n      Criteo.DisplayAd({\n        zoneid: data.zone,\n        containerid: 'c',\n        integrationmode: 'amp',\n      });\n    }\n  });\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction setTargeting(global, data) {\n  if (data.adserver === 'DFP') {\n    const dblParams = {\n      slot: data.slot,\n      targeting: Criteo.ComputeDFPTargetingForAMP(\n          data.cookiename || Criteo.PubTag.RTA.DefaultCrtgRtaCookieName,\n          data.varname || Criteo.PubTag.RTA.DefaultCrtgContentName),\n      width: data.width,\n      height: data.height,\n      type: 'criteo',\n    };\n    doubleclick(global, dblParams);\n  }\n}\n\n\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function distroscale(global, data) {\n  validateData(data, ['pid'], ['zid', 'tid']);\n  let src = '//c.jsrdn.com/s/cs.js?p=' + encodeURIComponent(data.pid);\n\n  if (data.zid) {\n    src += '&z=' + encodeURIComponent(data.zid);\n  } else {\n    src += '&z=amp';\n  }\n\n  if (data.tid) {\n    src += '&t=' + encodeURIComponent(data.tid);\n  }\n\n  let srcUrl = global.context.sourceUrl;\n\n  srcUrl = srcUrl.replace(/#.+/, '').replace(/\\?.+/, '');\n\n  src += '&f=' + encodeURIComponent(srcUrl);\n\n\n  global.dsAMPCallbacks = {\n    renderStart: global.context.renderStart,\n    noContentAvailable: global.context.noContentAvailable,\n  };\n  loadScript(global, src, () => {}, () => {\n    global.context.noContentAvailable();\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function dotandads(global, data) {\n  global.data = data;\n  writeScript(global, 'https://amp.ad.dotandad.com/dotandadsAmp.js');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function eas(global, data) {\n  validateData(data, ['easDomain']);\n  global.easAmpParams = data;\n  writeScript(global, 'https://amp.emediate.eu/amp.v0.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function eplanning(global, data) {\n  validateData(data, [\n    'epl_si', 'epl_isv', 'epl_sv', 'epl_sec', 'epl_kvs', 'epl_e',\n  ]);\n  // push the two object into the '_eplanning' global\n  (global._eplanning = global._eplanning || []).push({\n    sI: data.epl_si,\n    isV: data.epl_isv,\n    sV: data.epl_sv,\n    sec: data.epl_sec,\n    kVs: data.epl_kvs,\n    e: data.epl_e,\n  });\n  loadScript(global, 'https://us.img.e-planning.net/layers/epl-amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function ezoic(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], ['slot','targeting','extras']);\n  loadScript(global, 'https://g.ezoic.net/ezoic/ampad.js', () => {\n    loadScript(global, 'https://www.googletagservices.com/tag/js/gpt.js', () => {\n      global.googletag.cmd.push(() => {\n        new window.EzoicAmpAd(global,data).createAd();\n      });\n    });\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\n\nexport function f1e(global, data) {\n  validateData(data, ['url','target'], []);\n  global.f1eData = data;\n  writeScript(global, 'https://img.ak.impact-ad.jp/util/f1e_amp.min.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  loadScript,\n  validateData,\n} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function f1h(global, data) {\n  validateData(data, ['sectionId', 'slot']);\n\n  const scriptUrl =\n      data['debugsrc'] || 'https://img.ak.impact-ad.jp/fh/f1h_amp.js';\n\n  global.f1hData = data;\n  loadScript(global, scriptUrl);\n}\n\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function felmat(global, data) {\n  validateData(data, ['host', 'fmt', 'fmk', 'fmp']);\n  global.fmParam = data;\n  writeScript(global, 'https://t.' + encodeURIComponent(data.host) + '/js/fmamp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n import {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\n export function flite(global, data) {\n  // TODO: check mandatory fields\n   validateData(data, [], ['guid','mixins']);\n   const guid = data.guid, o = global, e = encodeURIComponent, x = 0;\n   let r = '', dep = '';\n   o.FLITE = o.FLITE || {};\n   o.FLITE.config = o.FLITE.config || {};\n   o.FLITE.config[guid] = o.FLITE.config[guid] || {};\n   o.FLITE.config[guid].cb = Math.random();\n   o.FLITE.config[guid].ts = (+Number(new Date()));\n   r = global.context.location.href;\n   const m = r.match(new RegExp('[A-Za-z]+:[/][/][A-Za-z0-9.-]+'));\n   dep = data.mixins ? '&dep=' + data.mixins : '';\n   const url = ['https://r.flite.com/syndication/uscript.js?i=',e(guid),\n     '&v=3',dep,'&x=us',x,'&cb=',o.FLITE.config[guid].cb,'&d=',\n     e((m && m[0]) || r), '&tz=', (new Date()).getTimezoneOffset()].join('');\n   loadScript(o, url);\n }\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/* global adingoFluct: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function fluct(global, data) {\n  validateData(data, ['g', 'u']);\n  writeScript(global,\n      `https://cdn-fluct.sh.adingo.jp/f.js?G=${encodeURIComponent(data['g'])}`,\n      function() {\n        adingoFluct.showAd(data['u']);\n      });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\nfunction queryParametersToObject(input) {\n  if (!input) {\n    return undefined;\n  }\n  return input.split('&').filter(_ => _).reduce((obj, val) => {\n    const kv = val.split('=');\n    return Object.assign(obj, {[kv[0]]: kv[1] || true});\n  }, {});\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function fusion(global, data) {\n  validateData(data, [],\n      ['mediaZone', 'layout', 'adServer', 'space', 'parameters']);\n\n  const container = global.document.getElementById('c');\n  const ad = global.document.createElement('div');\n  ad.setAttribute('data-fusion-space', data.space);\n  container.appendChild(ad);\n  const parameters = queryParametersToObject(data.parameters);\n\n  writeScript(global,\n      'https://assets.adtomafusion.net/fusion/latest/fusion-amp.min.js', () => {\n        global.Fusion.apply(container, global.Fusion.loadAds(data, parameters));\n\n        global.Fusion.on.warning.run(ev => {\n          if (ev.msg === 'Space not present in response.') {\n            global.context.noContentAvailable();\n          }\n        });\n      });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function genieessp(global, data) {\n  validateData(data, ['vid', 'zid']);\n\n  global.data = data;\n  writeScript(global, 'https://js.gsspcln.jp/l/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\nconst gmosspFields = ['width', 'height', 'id'];\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function gmossp(global, data) {\n  validateData(data, gmosspFields, []);\n\n  global.gmosspParam = data;\n  writeScript(global, 'https://cdn.gmossp-sp.jp/ads/amp.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData} from '../../3p/3p';\nimport {setStyles} from '../../src/style';\n\n/**\n * Make an adsense iframe.\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adsense(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [],\n      ['adClient', 'adSlot', 'adHost', 'adtest', 'tagOrigin', 'experimentId',\n        'ampSlotIndex']);\n\n  if (global.context.clientId) {\n    // Read by GPT for GA/GPT integration.\n    global.gaGlobal = {\n      cid: global.context.clientId,\n      hid: global.context.pageViewId,\n    };\n  }\n  const s = global.document.createElement('script');\n  s.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';\n  global.document.body.appendChild(s);\n\n  const i = global.document.createElement('ins');\n  i.setAttribute('data-ad-client', data['adClient']);\n  if (data['adSlot']) {\n    i.setAttribute('data-ad-slot', data['adSlot']);\n  }\n  if (data['adHost']) {\n    i.setAttribute('data-ad-host', data['adHost']);\n  }\n  if (data['adtest'] != null) {\n    i.setAttribute('data-adtest', data['adtest']);\n  }\n  if (data['tagOrigin']) {\n    i.setAttribute('data-tag-origin', data['tagOrigin']);\n  }\n  i.setAttribute('data-page-url', global.context.canonicalUrl);\n  i.setAttribute('class', 'adsbygoogle');\n  setStyles(i, {\n    display: 'inline-block',\n    width: '100%',\n    height: '100%',\n  });\n  const initializer = {};\n  if (data['experimentId']) {\n    const experimentIdList = data['experimentId'].split(',');\n    if (experimentIdList) {\n      initializer['params'] = {\n        'google_ad_modifications': {\n          'eids': experimentIdList,\n        },\n      };\n    }\n  }\n  global.document.getElementById('c').appendChild(i);\n  (global.adsbygoogle = global.adsbygoogle || []).push(initializer);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {(string|undefined)} clientId\n * @param {string} pageViewId\n * @return {number}\n */\nexport function makeCorrelator(clientId, pageViewId) {\n  const pageViewIdNumeric = Number(pageViewId || 0);\n  if (clientId) {\n    return pageViewIdNumeric + (clientId.replace(/\\D/g, '') % 1e6) * 1e6;\n  } else {\n    // In this case, pageViewIdNumeric is only 4 digits => too low entropy\n    // to be useful as a page correlator.  So synthesize one from scratch.\n    // 4503599627370496 == 2^52.  The guaranteed range of JS Number is at least\n    // 2^53 - 1.\n    return Math.floor(4503599627370496 * Math.random());\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {validateData, loadScript} from '../../3p/3p';\nimport {tryParseJson} from '../../src/json.js';\nimport {getStyle, setStyle, setStyles} from '../../src/style';\n\n// Keep track of current height of AMP iframe\nlet currentAmpHeight = null;\n\n// Height of overflow element\nconst overflowHeight = 40;\n\n/**\n * Enum for different AdSense Products\n * @enum {number}\n * @visibleForTesting\n */\nexport const AD_TYPE = {\n  /** Value if we can't determine which product to request */\n  UNSUPPORTED: 0,\n  /** AdSense for Search */\n  AFS: 1,\n  /** AdSense for Shopping */\n  AFSH: 2,\n  /** AdSense for Shopping, backfilled with AdSense for Search */\n  AFSH_BACKFILL: 3,\n};\n\n\n/**\n * Request Custom Search Ads (Adsense for Search or AdSense for Shopping).\n * @param {!Window} global The window object of the iframe\n * @param {!Object} data\n */\nexport function csa(global, data) {\n  // Get parent width in case we want to override\n  const width = global.document.body./*OK*/clientWidth;\n\n  validateData(data, [], [\n    'afshPageOptions',\n    'afshAdblockOptions',\n    'afsPageOptions',\n    'afsAdblockOptions',\n    'ampSlotIndex',\n  ]);\n\n  // Add the ad container to the document\n  const containerDiv = global.document.createElement('div');\n  const containerId = 'csacontainer';\n  containerDiv.id = containerId;\n  global.document.getElementById('c').appendChild(containerDiv);\n\n  const pageOptions = {source: 'amp', referer: global.context.referrer};\n  const adblockOptions = {container: containerId};\n\n  // Parse all the options\n  const afshPage = Object.assign(\n      Object(tryParseJson(data['afshPageOptions'])), pageOptions);\n  const afsPage = Object.assign(\n      Object(tryParseJson(data['afsPageOptions'])), pageOptions);\n  const afshAd = Object.assign(\n      Object(tryParseJson(data['afshAdblockOptions'])), adblockOptions);\n  const afsAd = Object.assign(\n      Object(tryParseJson(data['afsAdblockOptions'])), adblockOptions);\n\n  // Special case for AFSh when \"auto\" is the requested width\n  if (afshAd['width'] == 'auto') {\n    afshAd['width'] = width;\n  }\n\n  // Event listener needed for iOS9 bug\n  global.addEventListener('orientationchange',\n      orientationChangeHandler.bind(null, global, containerDiv));\n\n  // Register resize callbacks\n  global.context.onResizeSuccess(\n      resizeSuccessHandler.bind(null, global, containerDiv));\n  global.context.onResizeDenied(\n      resizeDeniedHandler.bind(null, global, containerDiv));\n\n  // Only call for ads once the script has loaded\n  loadScript(global, 'https://www.google.com/adsense/search/ads.js',\n      requestCsaAds.bind(null, global, data, afsPage, afsAd, afshPage, afshAd));\n}\n\n/**\n * Resize the AMP iframe if the CSA container changes in size upon rotation.\n * This is needed for an iOS bug found in versions 10.0.1 and below that\n * doesn't properly reflow the iframe upon orientation change.\n * @param {!Window} global The window object of the iframe\n * @param {!Element} containerDiv The CSA container\n */\nfunction orientationChangeHandler(global, containerDiv) {\n  // Save the height of the container before the event listener triggers\n  const oldHeight = getStyle(containerDiv, 'height');\n  global.setTimeout(() => {\n    // Force DOM reflow and repaint\n    /*eslint-disable no-unused-vars*/\n    const ignore = global.document.body./*OK*/offsetHeight;\n    /*eslint-enable no-unused-vars*/\n    // Capture new height\n    let newHeight = getStyle(containerDiv, 'height');\n    // In older versions of iOS, this height will be different because the\n    // container height is resized.\n    // In Chrome and iOS 10.0.2 the height is the same because\n    // the container isn't resized.\n    if (oldHeight != newHeight && newHeight != currentAmpHeight) {\n      // style.height returns \"60px\" (for example), so turn this into an int\n      newHeight = parseInt(newHeight, 10);\n      // Also update the onclick function to resize to the right height.\n      const overflow = global.document.getElementById('overflow');\n      if (overflow) {\n        overflow.onclick =\n            global.context.requestResize.bind(null, undefined, newHeight);\n      }\n      // Resize the container to the correct height\n      global.context.requestResize(undefined, newHeight);\n    }\n  }, 250); /* 250 is time in ms to wait before executing orientation */\n}\n\n/**\n * Hanlder for when a resize request succeeds\n * Hide the overflow and resize the container\n * @param {!Window} global The window object of the iframe\n * @param {!Element} container The CSA container\n * @param {!number} requestedHeight The height of the resize request\n * @visibleForTesting\n */\nexport function resizeSuccessHandler(global, container, requestedHeight) {\n  currentAmpHeight = requestedHeight;\n  const overflow = global.document.getElementById('overflow');\n  if (overflow) {\n    setStyle(overflow, 'display', 'none');\n    resizeCsa(container, requestedHeight);\n  }\n}\n\n/**\n * Hanlder for When a resize request is denied\n * If the container is larger than the AMP container and an overflow already\n * exists, show the overflow and resize the container to fit inside the AMP\n * container.  If an overflow doesn't exist, create one.\n * @param {!Window} global The window object of the iframe\n * @param {!Element} container The CSA container\n * @param {!number} requestedHeight The height of the resize request\n * @visibleForTesting\n */\nexport function resizeDeniedHandler(global, container, requestedHeight) {\n  const overflow = global.document.getElementById('overflow');\n  const containerHeight = parseInt(getStyle(container, 'height'), 10);\n  if (containerHeight > currentAmpHeight) {\n    if (overflow) {\n      setStyle(overflow, 'display', '');\n      resizeCsa(container, currentAmpHeight - overflowHeight);\n    } else {\n      createOverflow(global, container, requestedHeight);\n    }\n  }\n}\n\n/**\n * Make a request for either AFS or AFSh\n * @param {!Window} global The window object of the iframe\n * @param {!Object} data The data passed in by the partner\n * @param {!Object} afsP The parsed AFS page options object\n * @param {!Object} afsA The parsed AFS adblock options object\n * @param {!Object} afshP The parsed AFSh page options object\n * @param {!Object} afshA The parsed AFSh adblock options object\n */\nfunction requestCsaAds(global, data, afsP, afsA, afshP, afshA) {\n  const type = getAdType(data);\n  const callback = callbackWithNoBackfill.bind(null, global);\n  const callbackBackfill = callbackWithBackfill.bind(null, global, afsP, afsA);\n\n  switch (type) {\n    case AD_TYPE.AFS:\n      /** Do not backfill, request AFS */\n      afsA['adLoadedCallback'] = callback;\n      global._googCsa('ads', afsP, afsA);\n      break;\n    case AD_TYPE.AFSH:\n      /** Do not backfill, request AFSh */\n      afshA['adLoadedCallback'] = callback;\n      global._googCsa('plas', afshP, afshA);\n      break;\n    case AD_TYPE.AFSH_BACKFILL:\n      /** Backfill with AFS, request AFSh */\n      afshA['adLoadedCallback'] = callbackBackfill;\n      global._googCsa('plas', afshP, afshA);\n      break;\n  }\n}\n\n/**\n * Helper function to determine which product to request\n * @param {!Object} data The data passed in by the partner\n * @return {!number} Enum of ad type\n */\nfunction getAdType(data) {\n  if (data['afsPageOptions'] != null && data['afshPageOptions'] == null) {\n    return AD_TYPE.AFS;\n  }\n  if (data['afsPageOptions'] == null && data['afshPageOptions'] != null) {\n    return AD_TYPE.AFSH;\n  }\n  if (data['afsPageOptions'] != null && data['afshPageOptions'] != null) {\n    return AD_TYPE.AFSH_BACKFILL;\n  }\n  else {\n    return AD_TYPE.UNSUPPORTED;\n  }\n}\n\n/**\n * The adsLoadedCallback for requests without a backfill.  If ads were returned,\n * resize the iframe.  If ads weren't returned, tell AMP we don't have ads.\n * @param {!Window} global The window object of the iframe\n * @param {!string} containerName The name of the CSA container\n * @param {!boolean} hasAd Whether or not CSA returned an ad\n * @visibleForTesting\n */\nexport function callbackWithNoBackfill(global, containerName, hasAd) {\n  if (hasAd) {\n    resizeIframe(global, containerName);\n  } else {\n    global.context.noContentAvailable();\n  }\n}\n\n/**\n * The adsLoadedCallback for requests with a backfill.  If ads were returned,\n * resize the iframe.  If ads weren't returned, backfill the ads.\n * @param {!Window} global The window object of the iframe\n * @param {!Object} page The parsed AFS page options to backfill the unit with\n * @param {!Object} ad The parsed AFS page options to backfill the unit with\n * @param {!string} containerName The name of the CSA container\n * @param {!boolean} hasAd Whether or not CSA returned an ad\n * @visibleForTesting\n*/\nexport function callbackWithBackfill(global, page, ad, containerName, hasAd) {\n  if (hasAd) {\n    resizeIframe(global, containerName);\n  } else {\n    ad['adLoadedCallback'] = callbackWithNoBackfill.bind(null, global);\n    global['_googCsa']('ads', page, ad);\n  }\n}\n\n/**\n * CSA callback function to resize the iframe when ads were returned\n * @param {!string} containerName Name of the container ('csacontainer')\n * @visibleForTesting\n */\nexport function resizeIframe(global, containerName) {\n  // Get actual height of container\n  const container = global.document.getElementById(containerName);\n  const height = container./*OK*/offsetHeight;\n  // Set initial AMP height\n  currentAmpHeight =\n      global.context.initialIntersection.boundingClientRect.height;\n\n  // If the height of the container is larger than the height of the\n  // initially requested AMP tag, add the overflow element\n  if (height > currentAmpHeight) {\n    createOverflow(global, container, height);\n  }\n  // Attempt to resize to actual CSA container height\n  global.context.requestResize(undefined, height);\n}\n\n/**\n * Helper function to create an overflow element\n * @param {!Window} global The window object of the iframe\n * @param {!Element} container HTML element of the CSA container\n * @param {!number} height The full height the CSA container should be when the\n * overflow element is clicked.\n */\nfunction createOverflow(global, container, height) {\n  const overflow = getOverflowElement(global);\n  // When overflow is clicked, resize to full height\n  overflow.onclick = global.context.requestResize.bind(null, undefined, height);\n  global.document.getElementById('c').appendChild(overflow);\n  // Resize the CSA container to not conflict with overflow\n  resizeCsa(container, currentAmpHeight - overflowHeight);\n}\n\n/**\n * Helper function to create the base overflow element\n * @param {!Window} global The window object of the iframe\n * @return {!Element}\n */\nfunction getOverflowElement(global) {\n  const overflow = global.document.createElement('div');\n  overflow.id = 'overflow';\n  setStyles(overflow, {\n    position: 'absolute',\n    height: overflowHeight + 'px',\n    width: '100%',\n  });\n  overflow.appendChild(getOverflowLine(global));\n  overflow.appendChild(getOverflowChevron(global));\n  return overflow;\n}\n\n/**\n * Helper function to create a line element for the overflow element\n * @param {!Window} global The window object of the iframe\n * @return {!Element}\n */\nfunction getOverflowLine(global) {\n  const line = global.document.createElement('div');\n  setStyles(line, {\n    background: 'rgba(0,0,0,.16)',\n    height: '1px',\n  });\n  return line;\n}\n\n/**\n * Helper function to create a chevron element for the overflow element\n * @param {!Window} global The window object of the iframe\n * @return {!Element}\n */\nfunction getOverflowChevron(global) {\n  const svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"36px\" ' +\n      'height=\"36px\" viewBox=\"0 0 48 48\" fill=\"#757575\"><path d=\"M14.83' +\n      ' 16.42L24 25.59l9.17-9.17L36 19.25l-12 12-12-12z\"/>' +\n      '<path d=\"M0-.75h48v48H0z\" fill=\"none\"/> </svg>';\n\n  const chevron = global.document.createElement('div');\n  setStyles(chevron, {\n    width: '36px',\n    height: '36px',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    display: 'block',\n  });\n  chevron./*OK*/innerHTML = svg;\n  return chevron;\n}\n\n/**\n * Helper function to resize the height of a CSA container and its child iframe\n * @param {!Element} container HTML element of the CSA container\n * @param {!number} height Height to resize, in pixels\n */\nfunction resizeCsa(container, height) {\n  const iframe = container.firstElementChild;\n  if (iframe) {\n    setStyles(iframe, {\n      height: height + 'px',\n      width: '100%',\n    });\n  }\n  setStyle(container, 'height', height + 'px');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {makeCorrelator} from './correlator';\nimport {validateData, loadScript} from '../../3p/3p';\nimport {dev} from '../../src/log';\nimport {setStyles} from '../../src/style';\nimport {getMultiSizeDimensions} from './utils';\n\n/**\n * @enum {number}\n * @private\n */\nconst GladeExperiment = {\n  NO_EXPERIMENT: 0,\n  GLADE_CONTROL: 1,\n  GLADE_EXPERIMENT: 2,\n  GLADE_OPT_OUT: 3,\n};\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function doubleclick(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], [\n    'slot', 'targeting', 'categoryExclusions',\n    'tagForChildDirectedTreatment', 'cookieOptions',\n    'overrideWidth', 'overrideHeight', 'loadingStrategy',\n    'consentNotificationId', 'useSameDomainRenderingUntilDeprecated',\n    'experimentId', 'multiSize', 'multiSizeValidation', 'ampSlotIndex',\n  ]);\n\n  if (global.context.clientId) {\n    // Read by GPT/Glade for GA/Doubleclick integration.\n    global.gaGlobal = {\n      cid: global.context.clientId,\n      hid: global.context.pageViewId,\n    };\n  }\n\n  centerAd();\n\n  const gptFilename = selectGptExperiment(data);\n\n  writeAdScript(global, data, gptFilename);\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n * @param {!GladeExperiment} gladeExperiment\n * @param {!string} url\n */\nfunction doubleClickWithGpt(global, data, gladeExperiment, url) {\n  const dimensions = [[\n    parseInt(data.overrideWidth || data.width, 10),\n    parseInt(data.overrideHeight || data.height, 10),\n  ]];\n\n  // Handle multi-size data parsing, validation, and inclusion into dimensions.\n  const multiSizeDataStr = data.multiSize || null;\n  if (multiSizeDataStr) {\n    const primarySize = dimensions[0];\n    const primaryWidth = primarySize[0];\n    const primaryHeight = primarySize[1];\n\n    getMultiSizeDimensions(\n        multiSizeDataStr,\n        primaryWidth,\n        primaryHeight,\n        (data.multiSizeValidation || 'true') == 'true',\n        dimensions);\n  }\n\n  loadScript(global, url, () => {\n    global.googletag.cmd.push(() => {\n      const googletag = global.googletag;\n      const pubads = googletag.pubads();\n      const slot = googletag.defineSlot(data.slot, dimensions, 'c')\n          .addService(pubads);\n\n      if (gladeExperiment === GladeExperiment.GLADE_CONTROL) {\n        pubads.markAsGladeControl();\n      } else if (gladeExperiment === GladeExperiment.GLADE_OPT_OUT) {\n        pubads.markAsGladeOptOut();\n      }\n\n      if (data['experimentId']) {\n        const experimentIdList = data['experimentId'].split(',');\n        pubads.forceExperiment = pubads.forceExperiment || function() {};\n        experimentIdList &&\n            experimentIdList.forEach(eid => pubads.forceExperiment(eid));\n      }\n\n      pubads.markAsAmp();\n      pubads.set('page_url', global.context.canonicalUrl);\n      pubads.setCorrelator(Number(getCorrelator(global)));\n      googletag.enableServices();\n\n      if (data.categoryExclusions) {\n        if (Array.isArray(data.categoryExclusions)) {\n          for (let i = 0; i < data.categoryExclusions.length; i++) {\n            slot.setCategoryExclusion(data.categoryExclusions[i]);\n          }\n        } else {\n          slot.setCategoryExclusion(data.categoryExclusions);\n        }\n      }\n\n      if (data.cookieOptions) {\n        pubads.setCookieOptions(data.cookieOptions);\n      }\n\n      if (data.tagForChildDirectedTreatment != undefined) {\n        pubads.setTagForChildDirectedTreatment(\n            data.tagForChildDirectedTreatment);\n      }\n\n      if (data.targeting) {\n        for (const key in data.targeting) {\n          slot.setTargeting(key, data.targeting[key]);\n        }\n      }\n\n      pubads.addEventListener('slotRenderEnded', event => {\n        const primaryInvSize = dimensions[0];\n        const pWidth = primaryInvSize[0];\n        const pHeight = primaryInvSize[1];\n        const returnedSize = event.size;\n        const rWidth = returnedSize ? returnedSize[0] : null;\n        const rHeight = returnedSize ? returnedSize[1] : null;\n\n        let creativeId = event.creativeId || '_backfill_';\n\n        // If the creative is empty, or either dimension of the returned size\n        // is larger than its counterpart in the primary size, then we don't\n        // want to render the creative.\n        if (event.isEmpty ||\n            returnedSize && (rWidth > pWidth || rHeight > pHeight)) {\n          global.context.noContentAvailable();\n          creativeId = '_empty_';\n        } else {\n          // We only want to call renderStart with a specific size if the\n          // returned creative size matches one of the multi-size sizes.\n          let newSize;\n          for (let i = 1; i < dimensions.length; i++) {\n            // dimensions[0] is the primary or overridden size.\n            if (dimensions[i][0] == rWidth && dimensions[i][1] == rHeight) {\n              newSize = {\n                width: rWidth,\n                height: rHeight,\n              };\n              break;\n            }\n          }\n          global.context.renderStart(newSize);\n        }\n        global.context.reportRenderedEntityIdentifier('dfp-' + creativeId);\n      });\n\n      // Exported for testing.\n      global.document.getElementById('c')['slot'] = slot;\n      googletag.display('c');\n    });\n  });\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n * @param {!GladeExperiment} gladeExperiment\n */\nfunction doubleClickWithGlade(global, data, gladeExperiment) {\n  const requestHeight = parseInt(data.overrideHeight || data.height, 10);\n  const requestWidth = parseInt(data.overrideWidth || data.width, 10);\n\n  const jsonParameters = {};\n  if (data.categoryExclusions) {\n    jsonParameters.categoryExclusions = data.categoryExclusions;\n  }\n  if (data.cookieOptions) {\n    jsonParameters.cookieOptOut = data.cookieOptions;\n  }\n  if (data.tagForChildDirectedTreatment != undefined) {\n    jsonParameters.tagForChildDirectedTreatment =\n        data.tagForChildDirectedTreatment;\n  }\n  if (data.targeting) {\n    jsonParameters.targeting = data.targeting;\n  }\n  if (gladeExperiment === GladeExperiment.GLADE_EXPERIMENT) {\n    jsonParameters.gladeEids = '108809102';\n  }\n  const expIds = data['experimentId'];\n  if (expIds) {\n    jsonParameters.gladeEids = jsonParameters.gladeEids ?\n        jsonParameters.gladeEids + ',' + expIds : expIds;\n  }\n\n\n  const slot = global.document.getElementById('c');\n  slot.setAttribute('data-glade', '');\n  slot.setAttribute('data-amp-ad', '');\n  slot.setAttribute('data-ad-unit-path', data.slot);\n  if (Object.keys(jsonParameters).length > 0) {\n    slot.setAttribute('data-json', JSON.stringify(jsonParameters));\n  }\n  slot.setAttribute('data-page-url', global.context.canonicalUrl);\n\n  // Center the ad in the container.\n  slot.setAttribute('height', requestHeight);\n  slot.setAttribute('width', requestWidth);\n\n  slot.addEventListener('gladeAdFetched', event => {\n    if (event.detail.empty) {\n      global.context.noContentAvailable();\n    }\n    global.context.renderStart();\n  });\n\n  window.glade = {correlator: getCorrelator(global)};\n  loadScript(global, 'https://securepubads.g.doubleclick.net/static/glade.js');\n}\n\n/**\n * @param {!Window} global\n * @return {number}\n */\nfunction getCorrelator(global) {\n  return makeCorrelator(global.context.clientId, global.context.pageViewId);\n}\n\nfunction centerAd() {\n  setStyles(dev().assertElement(global.document.getElementById('c')), {\n    top: '50%',\n    left: '50%',\n    bottom: '',\n    right: '',\n    transform: 'translate(-50%, -50%)',\n  });\n}\n\n/**\n * @param {!Object} data\n * @return {!string}\n */\nexport function selectGptExperiment(data) {\n  const fileExperimentConfig = {\n    21060540: 'gpt_sf_a.js',\n    21060541: 'gpt_sf_b.js',\n  };\n  // Note that reduce will return the first item that matches but it is\n  // expected that only one of the experiment ids will be present.\n  let expFilename;\n  (data['experimentId'] || '').split(',').forEach(\n      val => expFilename = expFilename || fileExperimentConfig[val]);\n  return expFilename;\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n * @param {!string} gptFilename\n */\nexport function writeAdScript(global, data, gptFilename) {\n  const url =\n  `https://www.googletagservices.com/tag/js/${gptFilename || 'gpt.js'}`;\n  if (gptFilename || data.useSameDomainRenderingUntilDeprecated != undefined\n    || data.multiSize) {\n    doubleClickWithGpt(global, data, GladeExperiment.GLADE_OPT_OUT, url);\n  } else {\n    const experimentFraction = 0.1;\n    const dice = global.Math.random();\n    const href = global.context.location.href;\n    if ((href.indexOf('google_glade=0') > 0 || dice < experimentFraction)\n          && href.indexOf('google_glade=1') < 0) {\n      doubleClickWithGpt(global, data, GladeExperiment.GLADE_CONTROL, url);\n    } else {\n      const exp = (dice < 2 * experimentFraction) ?\n          GladeExperiment.GLADE_EXPERIMENT : GladeExperiment.NO_EXPERIMENT;\n      doubleClickWithGlade(global, data, exp);\n    }\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../../src/types';\nimport {loadScript} from '../../3p/3p';\nimport {setStyle} from '../../src/style';\nimport {tryParseJson} from '../../src/json';\n\n/**\n * Possible player states.\n * @enum {number}\n * @private\n */\nconst PlayerStates = {\n  PLAYING: 1,\n  PAUSED: 2,\n};\n\n// Character used for play icon.\nconst playChar = '\\u25b6\\ufe0e';\n\n// Character used for pause icons.\nconst pauseChars = '\\u258c\\ufe0e\\u258c\\ufe0e';\n\n// Character used for seek dot on progress bar.\nconst seekDot = '\\u25cf\\ufe0e';\n\n// Characters used for fullscreen icon.\nconst fullscreenChars = '\\u25ad\\ufe0e';\n\n// Div wrapping our entire DOM.\nlet wrapperDiv;\n\n// Div containing big play button. Rendered before player starts.\nlet bigPlayDiv;\n\n// Div contianing play button. Double-nested for alignment.\nlet playButtonDiv;\n\n// Node containing play button characters.\nlet bigPlayButtonNode;\n\n// Div containing player controls.\nlet controlsDiv;\n\n// Div containing play or pause button.\nlet playPauseDiv;\n\n// Node contianing play or pause characters.\nlet playPauseNode;\n\n// Div containing player time.\nlet timeDiv;\n\n// Node containing the player time text.\nlet timeNode;\n\n// Wrapper for progress bar DOM elements.\nlet progressBarWrapperDiv;\n\n// Line for progress bar.\nlet progressLine;\n\n// Line for total time in progress bar.\nlet totalTimeLine;\n\n// Div containing the marker for the progress.\nlet progressMarkerDiv;\n\n// Div for fullscreen icon.\nlet fullscreenDiv;\n\n// Div for ad container.\nlet adContainerDiv;\n\n// Div for content player.\nlet contentDiv;\n\n// Content player.\nlet videoPlayer;\n\n// Event indicating user interaction.\nlet interactEvent;\n\n// Event for mouse down.\nlet mouseDownEvent;\n\n// Event for mouse move.\nlet mouseMoveEvent;\n\n// Event for mouse up.\nlet mouseUpEvent;\n\n// Percent of the way through the video the user has seeked. Used for seek\n// events.\nlet seekPercent;\n\n// Flag tracking whether or not content has played to completion.\nlet contentComplete;\n\n// Flag tracking if an ad request has failed.\nlet adRequestFailed;\n\n// IMA SDK AdDisplayContainer object.\nlet adDisplayContainer;\n\n// IMA SDK AdsLoader object.\nlet adsLoader;\n\n// IMA SDK AdsManager object;\nlet adsManager;\n\n// Timer for UI updates.\nlet uiTicker;\n\n// Tracks the current state of the player.\nlet playerState;\n\n// Flag for whether or not we are currently in fullscreen mode.\nlet fullscreen;\n\n// Width the player should be in fullscreen mode.\nlet fullscreenWidth;\n\n// Height the player should be in fullscreen mode.\nlet fullscreenHeight;\n\n// Flag tracking if ads are currently active.\nlet adsActive;\n\n// Flag tracking if playback has started.\nlet playbackStarted;\n\n// Timer used to hide controls after user action.\nlet hideControlsTimeout;\n\n// Flag tracking if we need to mute the ads manager once it loads. Used for\n// autoplay.\nlet muteAdsManagerOnLoaded;\n\n// Flag tracking if we are in native fullscreen mode. Used for iPhone.\nlet nativeFullscreen;\n\n// Used if the adsManager needs to be resized on load.\nlet adsManagerWidthOnLoad, adsManagerHeightOnLoad;\n\n// Initial video dimensions.\nlet videoWidth, videoHeight;\n\n/**\n * Loads the IMA SDK library.\n */\nfunction getIma(global, cb) {\n  loadScript(global, 'https://imasdk.googleapis.com/js/sdkloader/ima3.js', cb);\n  //loadScript(global, 'https://storage.googleapis.com/gvabox/sbusolits/h5/debug/ima3.js', cb);\n}\n\n/**\n * The business.\n */\nexport function imaVideo(global, data) {\n\n  videoWidth = global./*OK*/innerWidth;\n  videoHeight = global./*OK*/innerHeight;\n\n  // Wraps *everything*.\n  wrapperDiv = global.document.createElement('div');\n  wrapperDiv.id = 'ima-wrapper';\n  setStyle(wrapperDiv, 'width', videoWidth + 'px');\n  setStyle(wrapperDiv, 'height', videoHeight + 'px');\n  setStyle(wrapperDiv, 'background-color', 'black');\n\n  // Wraps the big play button we show before video start.\n  bigPlayDiv = global.document.createElement('div');\n  bigPlayDiv.id = 'ima-big-play';\n  setStyle(bigPlayDiv, 'position', 'relative');\n  setStyle(bigPlayDiv, 'width', videoWidth + 'px');\n  setStyle(bigPlayDiv, 'height', videoHeight + 'px');\n  setStyle(bigPlayDiv, 'display', 'table-cell');\n  setStyle(bigPlayDiv, 'vertical-align', 'middle');\n  setStyle(bigPlayDiv, 'text-align', 'center');\n  setStyle(bigPlayDiv, 'cursor', 'pointer');\n  // Inner div so we can v and h align.\n  playButtonDiv = global.document.createElement('div');\n  playButtonDiv.id = 'ima-play-button';\n  setStyle(playButtonDiv, 'font-size', '10em');\n  setStyle(playButtonDiv, 'color', 'white');\n  setStyle(playButtonDiv, 'display', 'inline-block');\n  setStyle(playButtonDiv, 'line-height', '0.5');\n  // Play button text node.\n  bigPlayButtonNode = global.document.createTextNode(playChar);\n  playButtonDiv.appendChild(bigPlayButtonNode);\n  bigPlayDiv.appendChild(playButtonDiv);\n\n  // Video controls.\n  controlsDiv = global.document.createElement('div');\n  controlsDiv.id = 'ima-controls';\n  setStyle(controlsDiv, 'position', 'absolute');\n  setStyle(controlsDiv, 'bottom', '0px');\n  setStyle(controlsDiv, 'width', '100%');\n  setStyle(controlsDiv, 'height', '30px');\n  setStyle(controlsDiv, 'background-color', '#EEEEEE');\n  setStyle(controlsDiv, 'color', '#333333');\n  setStyle(controlsDiv, 'display', 'none');\n  setStyle(controlsDiv, '-webkit-touch-callout', 'none');\n  setStyle(controlsDiv, '-webkit-user-select', 'none');\n  setStyle(controlsDiv, '-khtml-user-select', 'none');\n  setStyle(controlsDiv, '-moz-user-select', 'none');\n  setStyle(controlsDiv, '-ms-user-select', 'none');\n  setStyle(controlsDiv, 'user-select', 'none');\n  // Play button\n  playPauseDiv = global.document.createElement('div');\n  playPauseDiv.id = 'ima-play-pause';\n  setStyle(playPauseDiv, 'width', '30px');\n  setStyle(playPauseDiv, 'height', '30px');\n  setStyle(playPauseDiv, 'margin-left', '10px');\n  setStyle(playPauseDiv, 'font-size', '1.25em');\n  setStyle(playPauseDiv, 'float', 'left');\n  setStyle(playPauseDiv, 'cursor', 'pointer');\n  playPauseNode = global.document.createTextNode(playChar);\n  playPauseDiv.appendChild(playPauseNode);\n  controlsDiv.appendChild(playPauseDiv);\n  // Current time and duration.\n  timeDiv = global.document.createElement('div');\n  timeDiv.id = 'ima-time';\n  setStyle(timeDiv, 'width', '120px');\n  setStyle(timeDiv, 'height', '30px');\n  setStyle(timeDiv, 'line-height', '30px');\n  setStyle(timeDiv, 'float', 'left');\n  setStyle(timeDiv, 'text-align', 'center');\n  timeNode = global.document.createTextNode('00:00 / 00:00');\n  timeDiv.appendChild(timeNode);\n  controlsDiv.appendChild(timeDiv);\n  // Progress bar.\n  progressBarWrapperDiv = global.document.createElement('div');\n  progressBarWrapperDiv.id = 'ima-progress-wrapper';\n  setStyle(progressBarWrapperDiv, 'height', '30px');\n  setStyle(progressBarWrapperDiv, 'position', 'absolute');\n  setStyle(progressBarWrapperDiv, 'left', '160px');\n  setStyle(progressBarWrapperDiv, 'right', '50px');\n  progressLine = global.document.createElement('div');\n  progressLine.id = 'progress-line';\n  setStyle(progressLine, 'background-color', '#00BBFF');\n  setStyle(progressLine, 'height', '2px');\n  setStyle(progressLine, 'margin-top', '14px');\n  setStyle(progressLine, 'width', '0%');\n  setStyle(progressLine, 'float', 'left');\n  totalTimeLine = global.document.createElement('div');\n  totalTimeLine.id = 'total-time-line';\n  setStyle(totalTimeLine, 'background-color', '#333333');\n  setStyle(totalTimeLine, 'height', '2px');\n  setStyle(totalTimeLine, 'width', '100%');\n  setStyle(totalTimeLine, 'margin-top', '14px');\n  progressMarkerDiv = global.document.createElement('div');\n  progressMarkerDiv.id = 'ima-progress-marker';\n  setStyle(progressMarkerDiv, 'color', '#00BBFF');\n  setStyle(progressMarkerDiv, 'height', '30px');\n  setStyle(progressMarkerDiv, 'position', 'absolute');\n  setStyle(progressMarkerDiv, 'font-size', '2em');\n  setStyle(progressMarkerDiv, 'margin-top', '-5px');\n  setStyle(progressMarkerDiv, 'left', '-1%');\n  setStyle(progressMarkerDiv, 'cursor', 'default');\n  progressMarkerDiv.appendChild(global.document.createTextNode(seekDot));\n  progressBarWrapperDiv.appendChild(progressLine);\n  progressBarWrapperDiv.appendChild(progressMarkerDiv);\n  progressBarWrapperDiv.appendChild(totalTimeLine);\n  controlsDiv.appendChild(progressBarWrapperDiv);\n  // Fullscreen button\n  fullscreenDiv = global.document.createElement('div');\n  fullscreenDiv.id = 'ima-fullscreen';\n  setStyle(fullscreenDiv, 'position', 'absolute');\n  setStyle(fullscreenDiv, 'bottom', '0px');\n  setStyle(fullscreenDiv, 'right', '10px');\n  setStyle(fullscreenDiv, 'width', '30px');\n  setStyle(fullscreenDiv, 'height', '30px');\n  setStyle(fullscreenDiv, 'font-size', '1.25em');\n  setStyle(fullscreenDiv, 'cursor', 'pointer');\n  setStyle(fullscreenDiv, 'text-align', 'center');\n  setStyle(fullscreenDiv, 'font-weight', 'bold');\n  setStyle(fullscreenDiv, 'line-height', '1.4em');\n  fullscreenDiv.appendChild(global.document.createTextNode(fullscreenChars));\n  controlsDiv.appendChild(fullscreenDiv);\n\n  // Ad container.\n  adContainerDiv = global.document.createElement('div');\n  adContainerDiv.id = 'ima-ad-container';\n  setStyle(adContainerDiv, 'position', 'absolute');\n  setStyle(adContainerDiv, 'top', '0px');\n  setStyle(adContainerDiv, 'left', '0px');\n  setStyle(adContainerDiv, 'width', '100%');\n  setStyle(adContainerDiv, 'height', '100%');\n\n  // Wraps our content video.\n  contentDiv = global.document.createElement('div');\n  contentDiv.id = 'ima-content';\n  setStyle(contentDiv, 'position', 'absolute');\n  setStyle(contentDiv, 'top', '0px');\n  setStyle(contentDiv, 'left', '0px');\n  setStyle(contentDiv, 'width', '100%');\n  setStyle(contentDiv, 'height', '100%');\n  // The video player\n  videoPlayer = global.document.createElement('video');\n  videoPlayer.id = 'ima-content-player';\n  setStyle(videoPlayer, 'width', '100%');\n  setStyle(videoPlayer, 'height', '100%');\n  setStyle(videoPlayer, 'background-color', 'black');\n  videoPlayer.setAttribute('poster', data.poster);\n  videoPlayer.setAttribute('playsinline', true);\n  if (data.src) {\n    const sourceElement = document.createElement('source');\n    sourceElement.setAttribute('src', data.src);\n    videoPlayer.appendChild(sourceElement);\n  }\n  if (data.childElements) {\n    const children = JSON.parse(data.childElements);\n    children.forEach(child => {\n      videoPlayer.appendChild(htmlToElement(child));\n    });\n  }\n\n  contentDiv.appendChild(videoPlayer);\n  wrapperDiv.appendChild(contentDiv);\n  wrapperDiv.appendChild(adContainerDiv);\n  wrapperDiv.appendChild(controlsDiv);\n  wrapperDiv.appendChild(bigPlayDiv);\n  global.document.getElementById('c').appendChild(wrapperDiv);\n\n  window.addEventListener('message', onMessage.bind(null, global));\n\n  /**\n   * Set-up code that can't run until the IMA lib loads.\n   */\n  getIma(global, function() {\n    // This is the first place where we have access to any IMA objects.\n    contentComplete = false;\n    adsActive = false;\n    playbackStarted = false;\n    nativeFullscreen = false;\n\n    interactEvent = 'click';\n    mouseDownEvent = 'mousedown';\n    mouseMoveEvent = 'mousemove';\n    mouseUpEvent = 'mouseup';\n    if (navigator.userAgent.match(/iPhone/i) ||\n        navigator.userAgent.match(/iPad/i) ||\n        navigator.userAgent.match(/Android/i)) {\n      interactEvent = 'touchend';\n      mouseDownEvent = 'touchstart';\n      mouseMoveEvent = 'touchmove';\n      mouseUpEvent = 'touchend';\n    }\n    bigPlayDiv.addEventListener(interactEvent, onClick.bind(null, global));\n    playPauseDiv.addEventListener(interactEvent, onPlayPauseClick);\n    progressBarWrapperDiv.addEventListener(mouseDownEvent, onProgressClick);\n    fullscreenDiv.addEventListener(interactEvent,\n        onFullscreenClick.bind(null, global));\n\n    const fullScreenEvents = [\n      'fullscreenchange',\n      'mozfullscreenchange',\n      'webkitfullscreenchange'];\n    fullScreenEvents.forEach(fsEvent => {\n      global.document.addEventListener(fsEvent,\n          onFullscreenChange.bind(null, global),\n          false);\n    });\n\n    adDisplayContainer =\n        new global.google.ima.AdDisplayContainer(adContainerDiv, videoPlayer);\n\n    adsLoader = new global.google.ima.AdsLoader(adDisplayContainer);\n    adsLoader.getSettings().setPlayerType('amp-ima');\n    adsLoader.getSettings().setPlayerVersion('0.1');\n    adsLoader.addEventListener(\n        global.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,\n        onAdsManagerLoaded.bind(null, global),\n        false);\n    adsLoader.addEventListener(\n        global.google.ima.AdErrorEvent.Type.AD_ERROR,\n        onAdsLoaderError,\n        false);\n\n    videoPlayer.addEventListener('ended', onContentEnded);\n\n    const adsRequest = new global.google.ima.AdsRequest();\n    adsRequest.adTagUrl = data.tag;\n    adsRequest.linearAdSlotWidth = videoWidth;\n    adsRequest.linearAdSlotHeight = videoHeight;\n    adsRequest.nonLinearAdSlotWidth = videoWidth;\n    adsRequest.nonLinearAdSlotHeight = videoHeight / 3;\n\n    adRequestFailed = false;\n    adsLoader.requestAds(adsRequest);\n  });\n}\n\nfunction htmlToElement(html) {\n  const template = document.createElement('template');\n  template./*OK*/innerHTML = html;\n  return template.content.firstChild;\n}\n\n/**\n * Triggered when the user clicks on the big play button div.\n *\n * @visibleForTesting\n */\nexport function onClick(global) {\n  playbackStarted = true;\n  uiTicker = setInterval(uiTickerClick, 500);\n  bigPlayDiv.removeEventListener(interactEvent, onClick);\n  setStyle(bigPlayDiv, 'display', 'none');\n  adDisplayContainer.initialize();\n  videoPlayer.load();\n  playAds(global);\n}\n\n/**\n * Starts ad playback. If the ad request has not yte resolved, calls itself\n * again after 250ms.\n *\n * @visibleForTesting\n */\nexport function playAds(global) {\n  if (adsManager) {\n    // Ad request resolved.\n    try {\n      adsManager.init(\n          videoWidth, videoHeight, global.google.ima.ViewMode.NORMAL);\n      window.parent./*OK*/postMessage({event: VideoEvents.PLAY}, '*');\n      adsManager.start();\n    } catch (adError) {\n      window.parent./*OK*/postMessage({event: VideoEvents.PLAY}, '*');\n      playVideo();\n    }\n  } else if (!adRequestFailed) {\n    // Ad request did not yet resolve but also did not yet fail.\n    setTimeout(playAds.bind(null, global), 250);\n  } else {\n    // Ad request failed.\n    window.parent./*OK*/postMessage({event: VideoEvents.PLAY}, '*');\n    playVideo();\n  }\n}\n\n/**\n * Called when the content completes.\n *\n * @visibleForTesting\n */\nexport function onContentEnded() {\n  contentComplete = true;\n  adsLoader.contentComplete();\n}\n\n/**\n * Called when the IMA SDK has an AdsManager ready for us.\n *\n * @visibleForTesting\n */\nexport function onAdsManagerLoaded(global, adsManagerLoadedEvent) {\n  const adsRenderingSettings = new global.google.ima.AdsRenderingSettings();\n  adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;\n  adsRenderingSettings.uiElements =\n  [global.google.ima.UiElements.AD_ATTRIBUTION,\n    global.google.ima.UiElements.COUNTDOWN];\n  adsManager = adsManagerLoadedEvent.getAdsManager(videoPlayer,\n      adsRenderingSettings);\n  adsManager.addEventListener(global.google.ima.AdErrorEvent.Type.AD_ERROR,\n      onAdError);\n  adsManager.addEventListener(\n      global.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,\n      onContentPauseRequested.bind(null, global));\n  adsManager.addEventListener(\n      global.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,\n      onContentResumeRequested);\n  if (muteAdsManagerOnLoaded) {\n    adsManager.setVolume(0);\n  }\n  window.parent./*OK*/postMessage({event: VideoEvents.LOAD}, '*');\n}\n\n/**\n * Called when we encounter an error trying to load ads.\n *\n * @visibleForTesting\n */\nexport function onAdsLoaderError() {\n  adRequestFailed = true;\n  playVideo();\n}\n\n/**\n * Called when we encounter an error trying to play ads.\n *\n * @visibleForTesting\n */\nexport function onAdError() {\n  if (adsManager) {\n    adsManager.destroy();\n  }\n  playVideo();\n}\n\n/**\n * Called by the IMA SDK. Pauses the content and readies the player for ads.\n *\n * @visibleForTesting\n */\nexport function onContentPauseRequested(global) {\n  if (adsManagerWidthOnLoad) {\n    adsManager.resize(\n        adsManagerWidthOnLoad,\n        adsManagerHeightOnLoad,\n        global.google.ima.ViewMode.NORMAL);\n    adsManagerWidthOnLoad = null;\n    adsManagerHeightOnLoad = null;\n  }\n  adsActive = true;\n  videoPlayer.removeEventListener(interactEvent, showControls);\n  setStyle(adContainerDiv, 'display', 'block');\n  videoPlayer.removeEventListener('ended', onContentEnded);\n  hideControls();\n  videoPlayer.pause();\n}\n\n/**\n * Called by the IMA SDK. Resumes content after an ad break.\n *\n * @visibleForTesting\n */\nexport function onContentResumeRequested() {\n  adsActive = false;\n  videoPlayer.addEventListener(interactEvent, showControls);\n  if (!contentComplete) {\n    // CONTENT_RESUME will fire after post-rolls as well, and we don't want to\n    // resume content in that case.\n    videoPlayer.addEventListener('ended', onContentEnded);\n    playVideo();\n  }\n}\n\n/**\n * Called when our ui timer goes off. Updates the player UI.\n */\nfunction uiTickerClick() {\n  updateUi(videoPlayer.currentTime, videoPlayer.duration);\n}\n\n/**\n * Updates the video player UI.\n *\n * @visibleForTesting\n */\nexport function updateUi(currentTime, duration) {\n  timeNode.textContent =\n      formatTime(currentTime) + ' / ' + formatTime(duration);\n  const progressPercent =\n      Math.floor((currentTime / duration) * 100);\n  setStyle(progressLine, 'width', progressPercent + '%');\n  setStyle(progressMarkerDiv, 'left', (progressPercent - 1) + '%');\n}\n\n/**\n * Formats an int in seconds into a string of the format X:XX:XX. Omits the\n * hour if the content is less than one hour.\n *\n * @visibleForTesting\n */\nexport function formatTime(time) {\n  if (isNaN(time)) {\n    return '00:00';\n  }\n  let timeString = '';\n  const hours = Math.floor(time / 3600);\n  if (hours > 0) {\n    timeString += hours + ':';\n  }\n  const minutes = Math.floor((time % 3600) / 60);\n  timeString += zeroPad(minutes) + ':';\n  const seconds = Math.floor(time - ((hours * 3600) + (minutes * 60)));\n  timeString += zeroPad(seconds);\n  return timeString;\n}\n\n/**\n * Zero-pads the provided int and returns a string of length 2.\n *\n * @visibleForTesting\n */\nexport function zeroPad(input) {\n  input = String(input);\n  return input.length == 1 ? '0' + input : input;\n}\n\n/**\n * Detects clicks on the progress bar.\n */\nfunction onProgressClick(event) {\n  // Call this logic once to make sure we still seek if the user just clicks\n  // instead of clicking and dragging.\n  clearInterval(hideControlsTimeout);\n  onProgressMove(event);\n  clearInterval(uiTicker);\n  document.addEventListener(mouseMoveEvent, onProgressMove);\n  document.addEventListener(mouseUpEvent, onProgressClickEnd);\n}\n\n/**\n * Detects the end of interaction on the progress bar.\n */\nfunction onProgressClickEnd() {\n  document.removeEventListener(mouseMoveEvent, onProgressMove);\n  document.removeEventListener(mouseUpEvent, onProgressClickEnd);\n  uiTicker = setInterval(uiTickerClick, 500);\n  videoPlayer.currentTime = videoPlayer.duration * seekPercent;\n  // Reset hide controls timeout.\n  showControls();\n}\n\n/**\n * Detects when the user clicks and drags on the progress bar.\n */\nfunction onProgressMove(event) {\n  const progressWrapperPosition = getPagePosition(progressBarWrapperDiv);\n  const progressListStart = progressWrapperPosition.x;\n  const progressListWidth = progressBarWrapperDiv./*OK*/offsetWidth;\n\n  // Handle Android Chrome touch events.\n  const eventX = event.clientX || event.touches[0].pageX;\n\n  seekPercent = (eventX - progressListStart) / progressListWidth;\n  if (seekPercent < 0) {\n    seekPercent = 0;\n  } else if (seekPercent > 1) {\n    seekPercent = 1;\n  }\n  updateUi(videoPlayer.duration * seekPercent, videoPlayer.duration);\n}\n\n/**\n * Returns the x,y coordinates of the given element relative to the window.\n */\nfunction getPagePosition(el) {\n  let lx, ly;\n  for (lx = 0, ly = 0;\n      el != null;\n      lx += el./*OK*/offsetLeft, ly += el./*OK*/offsetTop,\n          el = el./*OK*/offsetParent)\n    {};\n  return {x: lx,y: ly};\n}\n\n/**\n * Called when the user clicks on the play / pause button.\n *\n * @visibleForTesting\n */\nexport function onPlayPauseClick() {\n  if (playerState == PlayerStates.PLAYING) {\n    pauseVideo(null);\n  } else {\n    playVideo();\n  }\n}\n\n/**\n * Plays the content video.\n *\n * @visibleForTesting\n */\nexport function playVideo() {\n  setStyle(adContainerDiv, 'display', 'none');\n  playerState = PlayerStates.PLAYING;\n  // Kick off the hide controls timer.\n  showControls();\n  setStyle(playPauseDiv, 'line-height', '1.4em');\n  playPauseNode.textContent = pauseChars;\n  window.parent./*OK*/postMessage({event: VideoEvents.PLAY}, '*');\n  videoPlayer.play();\n}\n\n/**\n * Pauses the video player.\n *\n * @visibleForTesting\n */\nexport function pauseVideo(event) {\n  videoPlayer.pause();\n  playerState = PlayerStates.PAUSED;\n  // Show controls and keep them there because we're paused.\n  clearInterval(hideControlsTimeout);\n  if (!adsActive) {\n    showControls();\n  }\n  playPauseNode.textContent = playChar;\n  setStyle(playPauseDiv, 'line-height', '');;\n  window.parent./*OK*/postMessage({event: VideoEvents.PAUSE}, '*');\n  if (event && event.type == 'webkitendfullscreen') {\n    // Video was paused because we exited fullscreen.\n    videoPlayer.removeEventListener('webkitendfullscreen', pauseVideo);\n  }\n}\n\n/**\n * Called when the user clicks on the fullscreen button. Makes the video player\n * fullscreen\n */\nfunction onFullscreenClick(global) {\n  if (fullscreen) {\n    // The video is currently in fullscreen mode\n    const cancelFullscreen = global.document.exitFullscreen ||\n        global.document.exitFullScreen ||\n        global.document.webkitCancelFullScreen ||\n        global.document.mozCancelFullScreen;\n    if (cancelFullscreen) {\n      cancelFullscreen.call(document);\n    }\n  } else {\n    // Try to enter fullscreen mode in the browser\n    const requestFullscreen =\n        global.document.documentElement.requestFullscreen ||\n        global.document.documentElement.webkitRequestFullscreen ||\n        global.document.documentElement.mozRequestFullscreen ||\n        global.document.documentElement.requestFullScreen ||\n        global.document.documentElement.webkitRequestFullScreen ||\n        global.document.documentElement.mozRequestFullScreen;\n    if (requestFullscreen) {\n      fullscreenWidth = window.screen.width;\n      fullscreenHeight = window.screen.height;\n      requestFullscreen.call(global.document.documentElement);\n    } else {\n      // Figure out how to make iPhone fullscren work here - I've got nothing.\n      videoPlayer.webkitEnterFullscreen();\n      // Pause the video when we leave fullscreen. iPhone does this\n      // automatically, but we still use pauseVideo as an event handler to\n      // sync the UI.\n      videoPlayer.addEventListener('webkitendfullscreen', pauseVideo);\n      nativeFullscreen = true;\n      onFullscreenChange(global);\n    }\n  }\n}\n\n/**\n * Called when the fullscreen mode of the browser or content player changes.\n */\nfunction onFullscreenChange(global) {\n  if (fullscreen) {\n    // Resize the ad container\n    adsManager.resize(\n        videoWidth, videoHeight, global.google.ima.ViewMode.NORMAL);\n    adsManagerWidthOnLoad = null;\n    adsManagerHeightOnLoad = null;\n    // Return the video to its original size and position\n    setStyle(wrapperDiv, 'width', videoWidth + 'px');\n    setStyle(wrapperDiv, 'height', videoHeight + 'px');\n    fullscreen = false;\n  } else {\n    // The user just entered fullscreen\n    if (!nativeFullscreen) {\n      // Resize the ad container\n      adsManager.resize(\n          fullscreenWidth, fullscreenHeight,\n          global.google.ima.ViewMode.FULLSCREEN);\n      adsManagerWidthOnLoad = null;\n      adsManagerHeightOnLoad = null;\n      // Make the video take up the entire screen\n      setStyle(wrapperDiv, 'width', fullscreenWidth + 'px');\n      setStyle(wrapperDiv, 'height', fullscreenHeight + 'px');\n      hideControls();\n    }\n    fullscreen = true;\n  }\n}\n\n/**\n * Show video controls and reset hide controls timeout.\n *\n * @visibleForTesting\n */\nexport function showControls() {\n  setStyle(controlsDiv, 'display', 'block');\n  // Hide controls after 3 seconds\n  if (playerState == PlayerStates.PLAYING) {\n    // Reset hide controls timer.\n    clearInterval(hideControlsTimeout);\n    hideControlsTimeout = setTimeout(hideControls, 3000);\n  }\n}\n\n/**\n * Hide video controls.\n *\n * @visibleForTesting\n */\nexport function hideControls() {\n  setStyle(controlsDiv, 'display', 'none');\n}\n\n/**\n * Handles messages from the top window.\n */\nfunction onMessage(global, event) {\n  const msg = isObject(event.data) ? event.data : tryParseJson(event.data);\n  if (msg === undefined) {\n    return; // We only process valid JSON.\n  }\n  if (msg.event && msg.func) {\n    switch (msg.func) {\n      case 'playVideo':\n        if (adsActive) {\n          adsManager.resume();\n          window.parent./*OK*/postMessage({event: VideoEvents.PLAY}, '*');\n        } else if (playbackStarted) {\n          playVideo();\n        } else {\n          // Auto-play support\n          onClick(global);\n        }\n        break;\n      case 'pauseVideo':\n        if (adsActive) {\n          adsManager.pause();\n          window.parent./*OK*/postMessage({event: VideoEvents.PAUSE}, '*');\n        } else if (playbackStarted) {\n          pauseVideo(null);\n        }\n        break;\n      case 'mute':\n        videoPlayer.volume = 0;\n        videoPlayer.muted = true;\n        if (adsManager) {\n          adsManager.setVolume(0);\n        } else {\n          muteAdsManagerOnLoaded = true;\n        }\n        window.parent./*OK*/postMessage({event: VideoEvents.MUTED}, '*');\n        break;\n      case 'unMute':\n        videoPlayer.volume = 1;\n        videoPlayer.muted = false;\n        if (adsManager) {\n          adsManager.setVolume(1);\n        } else {\n          muteAdsManagerOnLoaded = false;\n        }\n        window.parent./*OK*/postMessage({event: VideoEvents.UNMUTED}, '*');\n        break;\n      case 'resize':\n        if (msg.args && msg.args.width && msg.args.height) {\n          setStyle(wrapperDiv, 'width', msg.args.width + 'px');\n          setStyle(wrapperDiv, 'height', msg.args.height + 'px');\n          setStyle(bigPlayDiv, 'width', msg.args.width + 'px');\n          setStyle(bigPlayDiv, 'height', msg.args.height + 'px');\n          if (adsActive) {\n            adsManager.resize(\n                msg.args.width, msg.args.height,\n                global.google.ima.ViewMode.NORMAL);\n          } else {\n            adsManagerWidthOnLoad = msg.args.width;\n            adsManagerHeightOnLoad = msg.args.height;\n          }\n        }\n        break;\n    }\n  }\n}\n\n/**\n * Returns the properties we need to access for testing.\n *\n * @visibleForTesting\n */\nexport function getPropertiesForTesting() {\n  return {adContainerDiv, adRequestFailed, adsActive, adsManagerWidthOnLoad,\n    adsManagerHeightOnLoad, contentComplete, controlsDiv, hideControlsTimeout,\n    interactEvent, pauseChars, playbackStarted, playChar, playerState,\n    PlayerStates, playPauseDiv, playPauseNode, progressLine,\n    progressMarkerDiv, timeNode, uiTicker, videoPlayer};\n}\n\n/**\n * Sets the big play button div.\n *\n * @visibleForTesting\n */\nexport function setBigPlayDivForTesting(div) {\n  bigPlayDiv = div;\n}\n\n/**\n * Sets the ad display container.\n *\n * @visibleForTesting\n */\nexport function setAdDisplayContainerForTesting(adc) {\n  adDisplayContainer = adc;\n}\n\n/**\n * Sets the video width and height.\n *\n * @visibleForTesting\n */\nexport function setVideoWidthAndHeightForTesting(width, height) {\n  videoWidth = width;\n  videoHeight = height;\n}\n\n/**\n * Sets the ad request failed flag.\n *\n * @visibleForTesting\n */\nexport function setAdRequestFailedForTesting(newValue) {\n  adRequestFailed = newValue;\n}\n\n/**\n * Sets the ads loader.\n *\n * @visibleForTesting\n */\nexport function setAdsLoaderForTesting(newAdsLoader) {\n  adsLoader = newAdsLoader;\n}\n\n/**\n * Sets the flag to mute the ads manager when it loads.\n *\n * @visibleForTesting\n */\nexport function setMuteAdsManagerOnLoadedForTesting(shouldMute) {\n  muteAdsManagerOnLoaded = shouldMute;\n}\n\n/**\n * Sets the ads manager.\n *\n * @visibleForTesting\n */\nexport function setAdsManagerForTesting(newAdsManager) {\n  adsManager = newAdsManager;\n}\n\n/**\n * Sets the ads manager dimensions on load.\n *\n * @visibleForTesting\n */\nexport function setAdsManagerDimensionsOnLoadForTesting(width, height) {\n  adsManagerWidthOnLoad = width;\n  adsManagerHeightOnLoad = height;\n}\n\n/**\n * Sets the content complete flag.\n *\n * @visibleForTesting\n */\nexport function setContentCompleteForTesting(newContentComplete) {\n  contentComplete = newContentComplete;\n}\n\n/**\n * Sets the video player.\n *\n * @visibleForTesting\n */\nexport function setVideoPlayerForTesting(newPlayer) {\n  videoPlayer = newPlayer;\n}\n\n/**\n * Sets the player state.\n *\n * @visibleForTesting\n */\nexport function setPlayerStateForTesting(newState) {\n  playerState = newState;\n}\n\n/**\n * Sets the hideControlsTimeout\n *\n * @visibleForTesting\n */\nexport function setHideControlsTimeoutForTesting(newTimeout) {\n  hideControlsTimeout = newTimeout;\n}\n\n/**\n * Events\n *\n * Copied from src/video-interface.js.\n *\n * @constant {!Object<string, string>}\n */\nconst VideoEvents = {\n  /**\n   * load\n   *\n   * Fired when the video player is loaded and calls to methods such as `play()`\n   * are allowed.\n   *\n   * @event load\n   */\n  LOAD: 'load',\n\n  /**\n   * play\n   *\n   * Fired when the video plays.\n   *\n   * @event play\n   */\n  PLAY: 'play',\n\n  /**\n   * pause\n   *\n   * Fired when the video pauses.\n   *\n   * @event pause\n   */\n  PAUSE: 'pause',\n\n  /**\n   * muted\n   *\n   * Fired when the video is muted.\n   *\n   * @event play\n   */\n  MUTED: 'muted',\n\n  /**\n   * unmuted\n   *\n   * Fired when the video is unmuted.\n   *\n   * @event pause\n   */\n  UNMUTED: 'unmuted',\n\n  /**\n   * amp:video:visibility\n   *\n   * Fired when the video's visibility changes. Normally fired\n   * from `viewportCallback`.\n   *\n   * @event amp:video:visibility\n   * @property {boolean} visible Whether the video player is visible or not.\n   */\n  VISIBILITY: 'amp:video:visibility',\n\n  /**\n   * reload\n   *\n   * Fired when the video's src changes.\n   *\n   * @event reload\n   */\n  RELOAD: 'reloaded',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {user} from '../../src/log';\n\n/**\n * Given the amp-ad data attribute containing the multi-size dimensions, and a\n * set of primary dimensions, this function will return all valid multi-size\n * [width, height] pairs in an array.\n *\n * @param {string} multiSizeDataStr The amp-ad data attribute containing the\n *   multi-size dimensions.\n * @param {number} primaryWidth The primary width of the ad slot.\n * @param {number} primaryHeight The primary height of the ad slot.\n * @param {!Array<Array<number>>=} opt_dimensions An array into which to put\n *   the multi-size dimensions.\n * @param {boolean} multiSizeValidation A flag that if set to true will enforce\n *   the rule that ensures multi-size dimensions are no less than 2/3rds of\n *   their primary dimension's counterpart.\n * @return {!Array<Array<number>>} An array of dimensions.\n */\nexport function getMultiSizeDimensions(\n    multiSizeDataStr,\n    primaryWidth,\n    primaryHeight,\n    multiSizeValidation,\n    opt_dimensions) {\n\n  const dimensions = opt_dimensions || [];\n  const arrayOfSizeStrs = multiSizeDataStr.split(',');\n\n  arrayOfSizeStrs.forEach(sizeStr => {\n\n    const size = sizeStr.split('x');\n\n    // Make sure that each size is specified in the form val1xval2.\n    if (size.length != 2) {\n      user().error('AMP-AD', `Invalid multi-size data format '${sizeStr}'.`);\n      return;\n    }\n\n    const width = Number(size[0]);\n    const height = Number(size[1]);\n\n    // Make sure that both dimensions given are numbers.\n    if (!validateDimensions(width, height,\n        w => isNaN(w),\n        h => isNaN(h),\n        ({badDim, badVal}) =>\n          `Invalid ${badDim} of ${badVal} given for secondary size.`)) {\n      return;\n    }\n\n    // Check that secondary size is not larger than primary size.\n    if (!validateDimensions(width, height,\n        w => w > primaryWidth,\n        h => h > primaryHeight,\n        ({badDim, badVal}) => `Secondary ${badDim} ${badVal} ` +\n          `can't be larger than the primary ${badDim}.`)) {\n      return;\n    }\n\n    // Check that if multi-size-validation is on, that the secondary sizes\n    // are at least minRatio of the primary size.\n    if (multiSizeValidation) {\n      // The minimum ratio of each secondary dimension to its corresponding\n      // primary dimension.\n      const minRatio = 2 / 3;\n      const minWidth = minRatio * primaryWidth;\n      const minHeight = minRatio * primaryHeight;\n      if (!validateDimensions(width, height,\n          w => w < minWidth,\n          h => h < minHeight,\n          ({badDim, badVal}) => `Secondary ${badDim} ${badVal} is ` +\n            `smaller than 2/3rds of the primary ${badDim}.`)) {\n        return;\n      }\n    }\n\n    // Passed all checks! Push additional size to dimensions.\n    dimensions.push([width, height]);\n  });\n\n  return dimensions;\n}\n\n/**\n * A helper function for determining whether a given width or height violates\n * some condition.\n *\n * Checks the width and height against their corresponding conditions. If\n * either of the conditions fail, the errorBuilder function will be called with\n * the appropriate arguments, its result will be logged to user().error, and\n * validateDimensions will return false. Otherwise, validateDimensions will\n * only return true.\n *\n * @param {(number|string)} width\n * @param {(number|string)} height\n * @param {!function((number|string)): boolean} widthCond\n * @param {!function((number|string)): boolean} heightCond\n * @param {!function(!{badDim: string, badVal: (string|number)}): string}\n *    errorBuilder A function that will produce an informative error message.\n * @return {boolean}\n */\nfunction validateDimensions(width, height, widthCond, heightCond,\n    errorBuilder) {\n  let badParams = null;\n  if (widthCond(width) && heightCond(height)) {\n    badParams = {\n      badDim: 'width and height',\n      badVal: width + 'x' + height,\n    };\n  }\n  else if (widthCond(width)) {\n    badParams = {\n      badDim: 'width',\n      badVal: width,\n    };\n  }\n  else if (heightCond(height)) {\n    badParams = {\n      badDim: 'height',\n      badVal: height,\n    };\n  }\n  if (badParams) {\n    user().error('AMP-AD', errorBuilder(badParams));\n    return false;\n  }\n  return true;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\nimport {setStyles} from '../src/style';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function gumgum(global, data) {\n  validateData(data, ['zone', 'slot']);\n\n  const\n      win = window,\n      ctx = win.context,\n      dom = global.document.getElementById('c'),\n      ampWidth = parseInt(data.width || '0', 10),\n      ampHeight = parseInt(data.height || '0', 10),\n      ggevents = global.ggevents || [];\n\n  const\n      max = Math.max,\n      slotId = parseInt(data.slot, 10),\n      onLoad = function(type) {\n        return function(evt) {\n          const\n              ad = Object.assign({width: 0, height: 0}, evt.ad || {}),\n              identifier = ['GUMGUM', type, evt.id].join('_');\n          ctx.reportRenderedEntityIdentifier(identifier);\n          ctx.renderStart({\n            width: max(ampWidth, ad.width),\n            height: max(ampHeight, ad.height),\n          });\n        };\n      },\n      noFill = function() {\n        ctx.noContentAvailable();\n      };\n\n  // Ads logic starts\n  global.ggv2id = data.zone;\n  global.ggevents = ggevents;\n  global.sourceUrl = context.sourceUrl;\n  global.sourceReferrer = context.referrer;\n\n  if (slotId) {\n    // Slot Ad\n    const ins = global.document.createElement('div');\n    setStyles(ins, {\n      display: 'block',\n      width: '100%',\n      height: '100%',\n    });\n    ins.setAttribute('data-gg-slot', slotId);\n    dom.appendChild(ins);\n    // Events\n    ggevents.push({\n      'slot.nofill': noFill,\n      'slot.close': noFill,\n      'slot.load': onLoad('SLOT'),\n    });\n    // Main script\n    loadScript(global, 'https://g2.gumgum.com/javascripts/ad.js');\n  } else {\n    // No valid configuration\n    ctx.noContentAvailable();\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function holder(global, data) {\n  validateData(data, ['block'], []);\n  const wcl = global.context.location;\n  const n = navigator.userAgent;\n  let l = '&r' + Math.round((Math.random() * 10000000)) + '&h' + wcl.href;\n  if (!(n.indexOf('Safari') != -1 && n.indexOf('Chrome') == -1)) {\n    l += '&c1';\n  }\n  data.queue = l;\n  writeScript(global,'https://i.holder.com.ua/js2/holder/ajax/ampv1.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData, validateSrcPrefix} from '../3p/3p';\n\nconst validHosts = [\n  'https://go.eu.bbelements.com',\n  'https://go.idnes.bbelements.com',\n  'https://go.goldbachpoland.bbelements.com',\n  'https://go.pol.bbelements.com',\n  'https://go.idmnet.bbelements.com',\n];\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function ibillboard(global, data) {\n\n  validateData(data, ['src']);\n  const src = data.src;\n  validateSrcPrefix(validHosts, src);\n\n  writeScript(global, src);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, computeInMasterFrame, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function imedia(global, data) {\n  validateData(data, ['id', 'positions']);\n  const positions = JSON.parse(data.positions);\n  const mW = context.isMaster ? global : context.master;\n\n  // create parent element\n  const parentElement = document.createElement('div');\n  parentElement.id = data.id;\n  global.document.getElementById('c').appendChild(parentElement);\n\n  // array of all ad elements and matching contexts through all iframes\n  if (!mW.inPagePositions) {\n    mW.inPagePositions = [];\n  }\n  mW.inPagePositions.push({parentElement, context: global.context});\n\n  computeInMasterFrame(global, 'imedia-load', done => {\n    loadScript(global, 'https://i.imedia.cz/js/im3.js', () => {\n      if (global.im != null) {\n        mW.im = global.im;\n        mW.im.conf.referer = context.location.href;\n\n        // send request to get all ads\n        mW.im.getAds(positions, {AMPcallback: ads => {\n          mW.ads = ads;\n          done(null);\n        }});\n      }});\n  }, () => {\n    mW.inPagePositions = mW.inPagePositions.filter(inPagePostion => {\n      let used = true;\n      positions.filter((position, index) => {\n\n        // match right element and zone to write advert from adserver\n        if (inPagePostion.parentElement.id == position.id) {\n          used = false;\n          position.id = inPagePostion.parentElement; // right element \"c\" to position obj.\n          if (mW.im.writeAd) {\n            mW.im.writeAd(mW.ads[index], position);\n\n            // inform AMP runtime when the ad starts rendering\n            if (mW.ads[index].impress) {\n              inPagePostion.context.renderStart();\n            } else {\n              inPagePostion.context.noContentAvailable();\n            }\n          }\n          return false;\n        }\n      });\n      return used; // remove (filter) element filled with add\n    });\n  });\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript} from '../3p/3p';\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function imobile(global, data) {\n  global.imobileParam = data;\n  writeScript(global, 'https://spamp.i-mobile.co.jp/script/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function improvedigital(global, data) {\n  validateData(data, ['placement'], ['width', 'height', 'optin', 'keyvalue']);\n\n  let url = 'https://ad.360yield.com' +\n      '/adj?' +\n      'p=' + encodeURIComponent(data.placement) +\n      '&w=' + encodeURIComponent(data.width) +\n      '&h=' + encodeURIComponent(data.height) +\n      '&optin=' + encodeURIComponent(data.optin) +\n      '&tz=' + new Date().getTimezoneOffset();\n\n  const value = data.keyvalue;\n  let newData = '';\n  const amps = '&';\n  let validKey = 0;\n\n  if (value && value.length > 0) {\n    const keys = value.split('&');\n    for (let i = 0; i < keys.length; i++)\n    {\n      if (!keys[i]) {continue;}\n      const segment = keys[i].split('=');\n      const segment1 = (segment[1] ? encodeURIComponent(segment[1]) : '');\n      if (validKey > 0) {\n        newData += amps;\n      }\n      validKey++;\n      newData += segment[0] + '=' + segment1;\n    }\n  }\n  if (newData) {\n    url += '&' + newData;\n  }\n  writeScript(global, url);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function inmobi(global, data) {\n  validateData(data, ['siteid','slotid'], []);\n\n  const inmobiConf = {\n    siteid: data.siteid,\n    slot: data.slotid,\n    manual: true,\n    onError: code => {\n      if (code == 'nfr') {\n        global.context.noContentAvailable();\n        document.getElementById('my-ad-slot').style./*OK*/display = 'none';\n      }\n    },\n    onSuccess: () => {\n      global.context.renderStart();\n    },\n  };\n\n  writeScript(global, 'https://cf.cdn.inmobi.com/ad/inmobi.secure.js', () => {\n    global.document.write('<div id=\\'my-ad-slot\\'></div>');\n    global._inmobi.getNewAd(document.getElementById('my-ad-slot'), inmobiConf);\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, loadScript} from '../3p/3p';\nimport {doubleclick} from '../ads/google/doubleclick';\n\nconst DEFAULT_TIMEOUT = 500; // ms\nconst EVENT_SUCCESS = 0;\nconst EVENT_TIMEOUT = 1;\nconst EVENT_ERROR = 2;\nconst EVENT_BADTAG = 3;\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function ix(global, data) {\n  if (!('slot' in data)) {\n    global.CasaleArgs = data;\n    writeScript(global, 'https://js-sec.indexww.com/indexJTag.js');\n  } else { //DFP ad request call\n\n    const start = Date.now();\n    let calledDoubleclick = false;\n    data.ixTimeout = isNaN(data.ixTimeout) ? DEFAULT_TIMEOUT : data.ixTimeout;\n    const timer = setTimeout(() => {\n      callDoubleclick(EVENT_TIMEOUT);\n    }, data.ixTimeout);\n\n    const callDoubleclick = function(code) {\n      if (calledDoubleclick) { return; }\n      calledDoubleclick = true;\n      clearTimeout(timer);\n      reportStats(data.ixId, data.ixSlot, data.slot, start, code);\n      prepareData(data);\n      doubleclick(global, data);\n    };\n\n    if (typeof data.ixId === 'undefined' || isNaN(data.ixId)) {\n      callDoubleclick(EVENT_BADTAG);\n      return;\n    }\n\n    global.IndexArgs = {\n      ampCallback: callDoubleclick,\n      ampSuccess: EVENT_SUCCESS,\n      ampError: EVENT_ERROR,\n    };\n\n    loadScript(global, 'https://js-sec.indexww.com/apl/amp.js', undefined, () => {\n      callDoubleclick(EVENT_ERROR);\n    });\n  }\n}\n\nfunction prepareData(data) {\n  for (const attr in data) {\n    if (data.hasOwnProperty(attr) && /^ix[A-Z]/.test(attr)) {\n      delete data[attr];\n    }\n  }\n  data.targeting = data.targeting || {};\n  data.targeting['IX_AMP'] = '1';\n}\n\nfunction reportStats(siteID, slotID, dfpSlot, start, code) {\n  try {\n    if (code == EVENT_BADTAG) { return; }\n    const xhttp = new XMLHttpRequest();\n    xhttp.withCredentials = true;\n\n    const deltat = Date.now() - start;\n    const ts = start / 1000 >> 0;\n    const ets = Date.now() / 1000 >> 0;\n    let url = 'https://as-sec.casalemedia.com/headerstats?s=' + siteID;\n    if (typeof window.context.location.href !== 'undefined') {\n      url += '&u=' + encodeURIComponent(window.context.location.href);\n    }\n    let stats = '{\"p\":\"display\",\"d\":\"mobile\",\"t\":' + ts + ',';\n    stats += '\"sl\":[{\"s\": \"' + slotID + '\",';\n    stats += '\"t\":' + ets + ',';\n    stats += '\"e\": [{';\n    if (code == EVENT_SUCCESS) {\n      stats += '\"n\":\"amp-s\",';\n    } else if (code == EVENT_TIMEOUT) {\n      stats += '\"n\":\"amp-t\",';\n    } else {\n      stats += '\"n\":\"amp-e\",';\n    }\n    stats += '\"v\":\"' + deltat + '\",';\n    stats += '\"b\": \"INDX\",\"x\": \"' + dfpSlot.substring(0,64) + '\"}]}]}';\n\n    xhttp.open('POST', url, true);\n    xhttp.setRequestHeader('Content-Type', 'application/json');\n    xhttp.send(stats);\n  } catch (e) {};\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  loadScript,\n  validateData,\n  computeInMasterFrame,\n} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function kargo(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n\n  validateData(data, ['site', 'slot'], ['options']);\n\n  // Kargo AdTag url\n  const kargoScriptUrl = 'https://storage.cloud.kargo.com/ad/network/tag/v3/' + data.site + '.js';\n\n  // parse extra ad call options (optional)\n  let options = {};\n  if (data.options != null) {\n    try {\n      options = JSON.parse(data.options);\n    } catch (e) {}\n  }\n\n  // Add window source reference to ad options\n  options.source_window = global;\n\n  computeInMasterFrame(global, 'kargo-load', function(done) {\n    // load AdTag in Master window\n    loadScript(this, kargoScriptUrl, () => {\n      let success = false;\n      if (this.Kargo != null && this.Kargo.loaded) {\n        success = true;\n      }\n\n      done(success);\n    });\n  }, success => {\n    if (success) {\n      const w = options.source_window;\n\n      // Add reference to Kargo api to this window if it's not the Master window\n      if (!w.context.isMaster) {\n        w.Kargo = w.context.master.Kargo;\n      }\n\n      w.Kargo.getAd(data.slot, options);\n    } else {\n      throw new Error('Kargo AdTag failed to load');\n    }\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function kiosked(global, data) {\n  let scriptId;\n  validateData(data, ['scriptid'], []);\n  if (data.hasOwnProperty('scriptid')) {\n    scriptId = data['scriptid'];\n  }\n  window.addEventListener('kioskedAdRender', function() {\n    global.context.renderStart();\n  }, false);\n\n  window.addEventListener('kioskedAdNoFill', function() {\n    global.context.noContentAvailable();\n  }, false);\n\n  writeScript(global, 'https://scripts.kiosked.com/loader/kiosked-ad.js?staticTagId=' + scriptId);\n\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/* global\n__kxamp: false,\n__kx_ad_slots: false,\n__kx_ad_start: false,\n__kx_viewability: false,\n*/\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\n\nexport function kixer(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n\n  validateData(data, ['adslot'], []);\n\n  let inView = false;\n  let viewed = false;\n  let viewTimer = null;\n\n  const d = global.document.createElement('div');\n  d.id = '__kx_ad_' + data.adslot;\n  global.document.getElementById('c').appendChild(d);\n\n  const kxload = function() {\n    d.removeEventListener('load', kxload, false);\n    if (d.childNodes.length > 0) {\n      global.context.renderStart();\n    } else {\n      global.context.noContentAvailable();\n    }\n  };\n  d.addEventListener('load', kxload, false); // Listen for the kixer load event\n\n  const kxviewCheck = function(intersectionEntry) {\n    inView = intersectionEntry.intersectionRatio > 0.5; // Half of the unit is in the viewport\n    if (inView) {\n      if (!viewed && viewTimer == null) { // If the ad hasn't been viewed and the timer is not set\n        viewTimer = setTimeout(kxviewFire, 900); // Set a Timeout to check the ad in 900ms and fire the view\n      }\n    } else {\n      if (viewTimer) { // If the Timeout is set\n        clearTimeout(viewTimer); // Clear the Timeout\n        viewTimer = null;\n      }\n    }\n  };\n\n  const kxviewFire = function() {\n    if (inView) { // if the ad is still in the viewport\n      if (typeof __kx_viewability.process_locked === 'function') {\n        viewed = true;\n        __kx_viewability.process_locked(data.adslot); // Fire kixer view\n      }\n    }\n  };\n\n  global.context.observeIntersection(function(changes) {\n    changes.forEach(function(c) {\n      kxviewCheck(c);\n    });\n  });\n\n  loadScript(global, 'https://cdn.kixer.com/ad/load.js', () => {\n    __kxamp[data.adslot] = 1;\n    __kx_ad_slots.push(data.adslot);\n    __kx_ad_start();\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateSrcPrefix} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function ligatus(global, data) {\n  const src = data.src;\n  validateSrcPrefix('https://a-ssl.ligatus.com/', src);\n  writeScript(global, src);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function loka(global, data) {\n  validateData(data, ['unitParams'], []);\n\n  global.lokaParams = data;\n\n  const container = global.document.querySelector('#c');\n  container.addEventListener('lokaUnitLoaded', e => {\n    if (e.detail.isReady) {\n      global.context.renderStart();\n    } else {\n      global.context.noContentAvailable();\n    }\n  });\n\n  loadScript(global, 'https://loka-cdn.akamaized.net/scene/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function mads(global, data) {\n  validateData(data, ['adrequest'], []);\n\n  writeScript(global, 'https://eu2.madsone.com/js/tags.js', function() {\n    window.MADSAdrequest.adrequest(JSON.parse(data.adrequest));\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function mantisDisplay(global, data) {\n  validateData(data, ['property', 'zone'], []);\n\n  global.mantis = global.mantis || [];\n  global.mantis.push(['display', 'load', {\n    property: data['property'],\n  }]);\n\n  const d = global.document.createElement('div');\n  d.setAttribute('data-mantis-zone', data['zone']);\n  global.document.getElementById('c').appendChild(d);\n\n  loadScript(global, 'https://assets.mantisadnetwork.com/mantodea.min.js');\n}\n\nexport function mantisRecommend(global, data) {\n  validateData(data, ['property'], ['css']);\n\n  global.mantis = global.mantis || [];\n  global.mantis.push(['recommend', 'load', {\n    property: data['property'],\n    render: 'recommended',\n    css: data['css'],\n  }]);\n\n  const d = global.document.createElement('div');\n  d.setAttribute('id', 'recommended');\n  global.document.getElementById('c').appendChild(d);\n\n  loadScript(global, 'https://assets.mantisadnetwork.com/recommend.min.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from '../3p/3p';\n\n/* global asmi: true */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\n\nexport function mediaimpact(global, data) {\n  global.fif = false;\n  /* eslint google-camelcase/google-camelcase: 0 */\n  global.sas_loadHandler = function(f) {\n    if (f.hasAd) {\n      f.crea1 || (f.crea1 = {\n        width: 300,\n        height: 250,\n      });\n      global.context.renderStart({\n        width: f.crea1.width,\n        height: f.crea1.height,\n      });\n    } else {\n      global.context.noContentAvailable();\n    }\n  };\n  window.addEventListener('load', function() {\n    asmi.sas.call(data.site + '/(' + data.page + ')',\n        data.format,\n        data.target + ';googleAMP=1;',\n        '',\n        'sas_' + data.slot.replace('sas_',''),\n        1);\n  }, false);\n  /* global asmiSetup: true */\n  /* eslint no-unused-vars: 0 */\n  asmiSetup = {\n    view: 'm',\n    async: true,\n  };\n  loadScript(global, 'https://ec-ns.sascdn.com/diff/251/pages/amp_default.js', () => {\n    if (!document.getElementById('sas_' + data.slot.replace('sas_',''))) {\n      const adContainer = global.document.createElement('div');\n      adContainer.id = 'sas_' + data.slot.replace('sas_','');\n      global.document.body.appendChild(adContainer);\n    }\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData, computeInMasterFrame} from '../3p/3p';\nimport {getSourceUrl} from '../src/url';\nimport {doubleclick} from '../ads/google/doubleclick';\n\nconst mandatoryParams = ['tagtype', 'cid'],\n    optionalParams = [\n      'timeout', 'crid', 'misc',\n      'slot', 'targeting', 'categoryExclusions',\n      'tagForChildDirectedTreatment', 'cookieOptions',\n      'overrideWidth', 'overrideHeight', 'loadingStrategy',\n      'consentNotificationId', 'useSameDomainRenderingUntilDeprecated',\n      'experimentId', 'multiSize', 'multiSizeValidation',\n    ],\n    dfpParams = [\n      'slot', 'targeting', 'categoryExclusions',\n      'tagForChildDirectedTreatment', 'cookieOptions',\n      'overrideWidth', 'overrideHeight', 'loadingStrategy',\n      'consentNotificationId', 'useSameDomainRenderingUntilDeprecated',\n      'experimentId', 'multiSize', 'multiSizeValidation',\n    ],\n    dfpDefaultTimeout = 1000;\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function medianet(global, data) {\n  validateData(data, mandatoryParams, optionalParams);\n\n  const publisherUrl = global.context.canonicalUrl ||\n      getSourceUrl(global.context.location.href),\n      referrerUrl = global.context.referrer;\n\n  if (data.tagtype === 'headerbidder') { //parameter tagtype is used to identify the product the publisher is using. Going ahead we plan to support more product types.\n    loadHBTag(global, data, publisherUrl, referrerUrl);\n  } else if (data.tagtype === 'cm' && data.crid) {\n    loadCMTag(global, data, publisherUrl, referrerUrl);\n  } else {\n    global.context.noContentAvailable();\n  }\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n * @param {!string} publisherUrl\n * @param {?string} referrerUrl\n */\nfunction loadCMTag(global, data, publisherUrl, referrerUrl) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  function setMacro(type) {\n    if (!type) {\n      return;\n    }\n    const name = 'medianet_' + type;\n    if (data.hasOwnProperty(type)) {\n      global[name] = data[type];\n    }\n  }\n\n  function setAdditionalData() {\n    data.requrl = publisherUrl || '';\n    data.refurl = referrerUrl || '';\n    data.versionId = '211213';\n\n    setMacro('width');\n    setMacro('height');\n    setMacro('crid');\n    setMacro('requrl');\n    setMacro('refurl');\n    setMacro('versionId');\n    setMacro('misc');\n  }\n\n  function setCallbacks() {\n    global._mNAmp = {\n      renderStartCb: opt_data => {\n        global.context.renderStart(opt_data);\n      },\n      reportRenderedEntityIdentifierCb: ampId => {\n        global.context.reportRenderedEntityIdentifier(ampId);\n      },\n      noContentAvailableCb: () => {\n        global.context.noContentAvailable();\n      },\n    };\n  }\n\n  function loadScript() {\n    let url = 'https://contextual.media.net/ampnmedianet.js?';\n    url += 'cid=' + encodeURIComponent(data.cid);\n    url += '&https=1';\n    url += '&requrl=' + encodeURIComponent(data.requrl);\n    url += '&refurl=' + encodeURIComponent(data.refurl);\n    writeScript(global, url);\n  }\n\n  function init() {\n    setAdditionalData();\n    setCallbacks();\n    loadScript();\n  }\n\n  init();\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n * @param {!string} publisherUrl\n * @param {?string} referrerUrl\n */\nfunction loadHBTag(global, data, publisherUrl, referrerUrl) {\n  function deleteUnexpectedDoubleclickParams() {\n    const allParams = mandatoryParams.concat(optionalParams);\n    let currentParam = '';\n    for (let i = 0; i < allParams.length; i++) {\n      currentParam = allParams[i];\n      if (dfpParams.indexOf(currentParam) === -1 && data[currentParam]) {\n        delete data[currentParam];\n      }\n    }\n  }\n\n  let isDoubleClickCalled = false;\n\n  function loadDFP() {\n    if (isDoubleClickCalled) {\n      return;\n    }\n    isDoubleClickCalled = true;\n\n    global.advBidxc = global.context.master.advBidxc;\n    if (global.advBidxc && typeof global.advBidxc.renderAmpAd === 'function') {\n      global.addEventListener('message', event => {\n        global.advBidxc.renderAmpAd(event, global);\n      });\n    }\n\n    data.targeting = data.targeting || {};\n\n    if (global.advBidxc &&\n      typeof global.advBidxc.setAmpTargeting === 'function') {\n      global.advBidxc.setAmpTargeting(global, data);\n    }\n    deleteUnexpectedDoubleclickParams();\n    doubleclick(global, data);\n  }\n\n  function mnetHBHandle() {\n    global.advBidxc = global.context.master.advBidxc;\n    if (global.advBidxc &&\n      typeof global.advBidxc.registerAmpSlot === 'function') {\n      global.advBidxc.registerAmpSlot({\n        cb: loadDFP,\n        data,\n        winObj: global,\n      });\n    }\n  }\n\n  global.setTimeout(() => {\n    loadDFP();\n  }, data.timeout || dfpDefaultTimeout);\n\n  computeInMasterFrame(global, 'medianet-hb-load', done => {\n    /*eslint \"google-camelcase/google-camelcase\": 0*/\n    global.advBidxc_requrl = publisherUrl;\n    global.advBidxc_refurl = referrerUrl;\n    global.advBidxc = {\n      registerAmpSlot: () => {},\n      setAmpTargeting: () => {},\n      renderAmpAd: () => {},\n    };\n    writeScript(global, 'https://contextual.media.net/bidexchange.js?https=1&amp=1&cid=' + encodeURIComponent(data.cid), () => {\n      done(null);\n    });\n  }, mnetHBHandle);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function mediavine(global, data) {\n  validateData(data, ['site'], ['sizes']);\n  loadScript(global, 'https://scripts.mediavine.com/amp/'\n      + encodeURIComponent(data.site) + '.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function meg(global, data) {\n  validateData(data, ['code']);\n  const code = data.code;\n  const lang = global.encodeURIComponent(global.navigator.language);\n  const ref = global.encodeURIComponent(global.context.referrer);\n  const params = ['lang=' + lang, 'ref=' + ref].join('&');\n  const url = 'https://apps.meg.com/embedjs/' + code + '?' + params;\n  global._megAdsLoaderCallbacks = {\n    onSuccess: () => {\n      global.context.renderStart();\n    },\n    onError: () => {\n      global.context.noContentAvailable();\n    },\n  };\n  loadScript(global, url, () => {\n    // Meg has been loaded\n  }, () => {\n    // Cannot load meg embed.js\n    global.context.noContentAvailable();\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/* global MicroAd: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function microad(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], ['spot', 'url', 'referrer', 'ifa', 'appid', 'geo']);\n\n  global.document.getElementById('c').setAttribute('id', data.spot);\n  loadScript(global, 'https://j.microad.net/js/camp.js', () => {\n    MicroAd.Compass.showAd(data);\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript,validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function mixpo(global, data) {\n  validateData(data, [\n    'guid',\n    'subdomain',\n  ]);\n\n  const g = global,\n      cdnSubdomain = (data.subdomain == 'www') ?\n          'cdn' : data.subdomain + '-cdn',\n      url = data.loader || `https://${cdnSubdomain}.mixpo.com/js/loader.js`;\n\n  g.mixpoAd = {\n    amp: true,\n    noflash: true,\n    width: data.width,\n    height: data.height,\n    guid: data.guid,\n    subdomain: data.subdomain,\n    embedv: data.embedv,\n    clicktag: data.clicktag,\n    customTarget: data.customtarget,\n    dynClickthrough: data.dynclickthrough,\n    viewTracking: data.viewtracking,\n    customCSS: data.customcss,\n    local: data.local,\n    enableMRAID: data.enablemraid,\n    jsPlayer: data.jsplayer,\n  };\n\n  writeScript(g, url);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function mywidget(global, data) {\n  validateData(data, ['cid']);\n\n  let isReady = false;\n\n  /**\n   * `data.height` can be not a number (`undefined`, if attribute is not set,\n   * for example), that's why condition is not `data.height < 0`\n   */\n  if (!(data.height >= 0)) {\n    return;\n  }\n\n  global.myWidget = {\n    params: {\n      cid: data.cid,\n      container: 'c',\n    },\n\n    renderStart: global.context.renderStart,\n    noContentAvailable: global.context.noContentAvailable,\n\n    /**\n     * @param {{firstIntersectionCallback:function()}} opts\n     */\n    ready(opts) {\n      // Make sure ready() is called only once.\n      if (isReady) {\n        return;\n      } else {\n        isReady = true;\n      }\n\n      if (!opts || !opts.firstIntersectionCallback) {\n        return;\n      }\n\n      /**\n       * Widget want to be informed, when it gets into viewport, so we start\n       * to listen when it happens for the first time.\n       */\n      const unlisten = global.context.observeIntersection(changes => {\n        changes.forEach(c => {\n          if (c.intersectionRect.height) {\n            opts.firstIntersectionCallback();\n            unlisten();\n          }\n        });\n      });\n    },\n  };\n\n  // load the myWidget initializer asynchronously\n  loadScript(global, 'https://likemore-go.imgsmail.ru/widget.amp.js', () => {},\n      global.context.noContentAvailable);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS-IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {loadScript} from '../3p/3p';\nexport function nativo(global, data) {\n  let ntvAd;\n  (function(ntvAd, global, data) {\n    global\n        .history\n        .replaceState(null,\n        null,\n        location.pathname + location.hash.replace(/({).*(})/, ''));\n    // Private\n    let delayedAdLoad = false;\n    let percentageOfadViewed;\n    const loc = global.context.location;\n    function isValidDelayTime(delay) {\n      return ((typeof delay != 'undefined'\n        && !isNaN(delay)\n        && parseInt(delay,10) >= 0));\n    }\n    function isDelayedTimeStart(data) {\n      return (isValidDelayTime(data.delayByTime)\n        && ('delay' in data)\n        && !('delayByView' in data));\n    }\n    function isDelayedViewStart(data) {\n      return (isValidDelayTime(data.delayByTime)\n        && ('delayByView' in data));\n    }\n    function loadAdWhenViewed() {\n      const g = global;\n      global.context.observeIntersection(function(positions) {\n        const coordinates = getLastPositionCoordinates(positions);\n        if (typeof coordinates.rootBounds != 'undefined'\n            && (coordinates\n                .intersectionRect\n                .top == (coordinates\n                    .rootBounds.top + coordinates\n                        .boundingClientRect\n                        .y))) {\n          if (isDelayedViewStart(data) && !delayedAdLoad) {\n            g.PostRelease.Start();\n            delayedAdLoad = true;\n          }\n        }\n      });\n    }\n    function loadAdWhenTimedout() {\n      const g = global;\n      setTimeout(function() {\n        g.PostRelease.Start();\n        delayedAdLoad = true;\n      }, parseInt(data.delayByTime, 10));\n    }\n    function getLastPositionCoordinates(positions) {\n      return positions[positions.length - 1];\n    }\n    function setPercentageOfadViewed(percentage) {\n      percentageOfadViewed = percentage;\n    }\n    // Used to track ad during scrolling event and trigger checkIsAdVisible method on PostRelease instance\n    function viewabilityConfiguration(positions) {\n      const coordinates = getLastPositionCoordinates(positions);\n      setPercentageOfadViewed(\n        (((coordinates.intersectionRect\n            .height * 100) / coordinates\n                .boundingClientRect\n                .height) / 100));\n      global.PostRelease.checkIsAdVisible();\n    }\n    // Public\n    ntvAd.getPercentageOfadViewed = function() {\n      return percentageOfadViewed;\n    };\n    ntvAd.getScriptURL = function() {\n      return 'https://s.ntv.io/serve/load.js';\n    };\n    // Configuration setup is based on the parameters/attributes associated with the amp-ad node\n    ntvAd.setupAd = function() {\n      global._prx = [['cfg.Amp']];\n      global._prx.push(['cfg.RequestUrl', data['requestUrl'] || loc.href]);\n      for (const key in data) {\n        switch (key) {\n          case 'premium': global._prx.push(['cfg.SetUserPremium']); break;\n          case 'debug': global._prx.push(['cfg.Debug']); break;\n          case 'delay': if (isValidDelayTime(data.delayByTime)) {\n            global._prx.push(['cfg.SetNoAutoStart']);\n          } break;\n        }\n      }\n    };\n    // Used to Delay Start and Initalize Tracking. This is a callback AMP will use once script is loaded\n    ntvAd.Start = function() {\n      if (isDelayedTimeStart(data)) {\n        loadAdWhenTimedout();\n      } else if (isDelayedViewStart(data)) {\n        loadAdWhenViewed();\n      }\n      global.PostRelease.checkAmpViewability = function() {\n        return ntvAd.getPercentageOfadViewed();\n      };\n      // ADD TRACKING HANDLER TO OBSERVER\n      global.context.observeIntersection(viewabilityConfiguration);\n    };\n  })(ntvAd || (ntvAd = {}), global, data);\n  // Setup Configurations\n  ntvAd.setupAd();\n  // Load Nativo Script\n  loadScript(global, ntvAd.getScriptURL(), ntvAd.Start);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\nimport {doubleclick} from '../ads/google/doubleclick';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function navegg(global, data) {\n  validateData(data, ['acc']);\n  const acc = data.acc;\n  let seg, nvg = function() {};\n  delete data.acc;\n  nvg.prototype.getProfile = function() {};\n  data.targeting = data.targeting || {};\n  loadScript(global, 'https://tag.navdmp.com/amp.1.0.0.min.js', () => {\n    nvg = global[`nvg${acc}`] = new global['AMPNavegg']({\n      acc,\n    });\n    nvg.getProfile(nvgTargeting => {\n      for (seg in nvgTargeting) {\n        data.targeting[seg] = nvgTargeting[seg];\n      };\n      doubleclick(global, data);\n    });\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\nconst nendFields = ['nend_params'];\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function nend(global, data) {\n  validateData(data, nendFields, []);\n\n  global.nendParam = data;\n  writeScript(global, 'https://js1.nend.net/js/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, loadScript, validateData} from '../3p/3p';\nimport {startsWith} from '../src/string.js';\nimport {dev} from '../src/log.js';\nimport {assertHttpsUrl, addParamsToUrl} from '../src/url.js';\n\nconst NX_URL_HOST = 'https://call.adadapter.netzathleten-media.de';\nconst NX_URL_PATHPREFIX = '/pb/';\nconst NX_URL_FULL = NX_URL_HOST + NX_URL_PATHPREFIX ;\nconst DEFAULT_NX_KEY = 'default';\nconst DEFAULT_NX_UNIT = 'default';\nconst DEFAULT_NX_WIDTH = 'fluid';\nconst DEFAULT_NX_HEIGHT = 'fluid';\nconst DEFAULT_NX_V = '0002';\nconst DEFAULT_NX_SITE = 'none';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function netletix(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global._netletix_amp = {\n    allowed_data: ['nxasync','nxv','nxsite','nxid','nxscript'],\n    mandatory_data: ['nxkey','nxunit','nxwidth','nxheight'],\n    data,\n  };\n\n  validateData(data,\n      global._netletix_amp.mandatory_data, global._netletix_amp.allowed_data);\n\n  const nxh = (data.nxheight || DEFAULT_NX_HEIGHT);\n  const nxw = (data.nxwidth || DEFAULT_NX_WIDTH);\n  const url = assertHttpsUrl(\n      addParamsToUrl(\n          NX_URL_FULL + encodeURIComponent(data.nxkey || DEFAULT_NX_KEY),\n          {\n            unit: data.nxunit || DEFAULT_NX_UNIT,\n            width: data.nxwidth || DEFAULT_NX_WIDTH,\n            height: data.nxheight || DEFAULT_NX_HEIGHT,\n            v: data.nxv || DEFAULT_NX_V,\n            site: data.nxsite || DEFAULT_NX_SITE,\n            ord: Math.round(Math.random() * 100000000),\n          }),\n      data.ampSlotIndex);\n\n  window.addEventListener('message', event => {\n    if (event.data.type &&\n        startsWith(dev().assertString(event.data.type), 'nx-')) {\n      switch (event.data.type) {\n        case 'nx-resize':\n          const renderconfig = {\n            'width': event.data.width,\n            'height': event.data.height,\n          };\n          global.context.renderStart(renderconfig);\n          if (event.data.width && event.data.height &&\n              (event.data.width != nxw || event.data.height != nxh)) {\n            global.context.requestResize(event.data.width, event.data.height);\n          };\n          break;\n        case 'nx-empty':\n          global.context.noContentAvailable();\n          break;\n        case 'nx-identifier':\n          global.context.reportRenderedEntityIdentifier(event.data.identifier);\n          break;\n        default:\n          break;\n      }\n    }\n  });\n\n  if (data.async && data.async.toLowerCase() === 'true') {\n    loadScript(global, url);\n  } else {\n    writeScript(global, url);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function nokta(global, data) {\n  validateData(data, ['category', 'site', 'zone']);\n  global.category = data.category;\n  global.site = data.site;\n  global.zone = data.zone;\n  global.iwidth = data.width;\n  global.iheight = data.height;\n  writeScript(global, 'https://static.virgul.com/theme/mockups/noktaamp/ampjs.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function openadstream(global, data) {\n  validateData(data, ['adhost', 'sitepage', 'pos'], ['query']);\n\n  let url = 'https://' + encodeURIComponent(data.adhost)\n      + '/3/' + data.sitepage\n      + '/1' + String(Math.random()).substring(2, 11) + '@' + data.pos;\n\n  if (data.query) {\n    url = url + '?' + data.query;\n  }\n  writeScript(global, url);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, writeScript, validateData} from '../3p/3p';\nimport {doubleclick} from '../ads/google/doubleclick';\nimport {startsWith} from '../src/string';\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Sort of like Object.assign.\n * @param {!Object} target\n * @param {!Object} source\n * @return {!Object}\n */\nfunction assign(target, source) {\n  for (const prop in source) {\n    if (hasOwnProperty.call(source, prop)) {\n      target[prop] = source[prop];\n    }\n  }\n\n  return target;\n}\n\n/* global OX: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function openx(global, data) {\n  const openxData = ['host', 'nc', 'auid', 'dfpSlot', 'dfp', 'openx'];\n  const dfpData = assign({}, data); // Make a copy for dfp.\n\n  // TODO: check mandatory fields\n  validateData(data, [], openxData);\n  // Consolidate Doubleclick inputs for forwarding -\n  // conversion rules are explained in openx.md.\n  if (data.dfpSlot) {\n    // Anything starting with 'dfp' gets promoted.\n    openxData.forEach(openxKey => {\n      if (openxKey in dfpData && openxKey !== 'dfp') {\n        if (startsWith(openxKey, 'dfp')) {\n          // Remove 'dfp' prefix, lowercase the first letter.\n          let fixKey = openxKey.substring(3);\n          fixKey = fixKey.substring(0,1).toLowerCase() + fixKey.substring(1);\n          dfpData[fixKey] = data[openxKey];\n        }\n        delete dfpData[openxKey];\n      }\n    });\n\n    // Promote the whole 'dfp' object.\n    if ('dfp' in data) {\n      assign(dfpData, dfpData.dfp);\n      delete dfpData['dfp'];\n    }\n  }\n\n  // Decide how to render.\n  if (data.host) {\n    let jssdk = `https://${data.host}/mw/1.0/jstag`;\n\n    if (data.nc && data.dfpSlot) {\n      jssdk += '?nc=' + encodeURIComponent(data.nc);\n      if (data.auid) {\n        advanceImplementation(global, jssdk, dfpData, data);\n      } else {\n        standardImplementation(global, jssdk, dfpData);\n      }\n    } else if (data.auid) { // Just show an ad.\n      global.OX_cmds = [\n        () => {\n          const oxRequest = OX();\n          const oxAnchor = global.document.createElement('div');\n          global.document.body.appendChild(oxAnchor);\n          /*eslint \"google-camelcase/google-camelcase\": 0*/\n          OX._requestArgs['bc'] = 'amp';\n          oxRequest.addAdUnit(data.auid);\n          oxRequest.setAdSizes([data.width + 'x' + data.height]);\n          if (data.openx && data.openx.customVars) {\n            setCustomVars(oxRequest, filterCustomVar(data.openx.customVars));\n          }\n          oxRequest.getOrCreateAdUnit(data.auid).set('anchor', oxAnchor);\n          global.context.renderStart();\n          oxRequest.load();\n        },\n      ];\n      loadScript(global, jssdk);\n    }\n  } else if (data.dfpSlot) { // Fall back to a DFP ad.\n    doubleclick(global, dfpData);\n  }\n}\n\nfunction standardImplementation(global, jssdk, dfpData) {\n  writeScript(global, jssdk, () => {\n    /*eslint \"google-camelcase/google-camelcase\": 0*/\n    doubleclick(global, dfpData);\n  });\n}\n\nfunction advanceImplementation(global, jssdk, dfpData, data) {\n  const size = [data.width + 'x' + data.height];\n  let customVars = {};\n  if (data.openx && data.openx.customVars) {\n    customVars = filterCustomVar(data.openx.customVars);\n  }\n  global.OX_bidder_options = {\n    bidderType: 'hb_amp',\n    callback: () => {\n      const priceMap = global.oxhbjs && global.oxhbjs.getPriceMap();\n      const slot = priceMap && priceMap['c'];\n      const targeting = slot ?\n        `${slot.size}_${slot.price},hb-bid-${slot.bid_id}` : 'none_t';\n      dfpData.targeting = dfpData.targeting || {};\n      assign(dfpData.targeting, {oxb: targeting});\n      doubleclick(global, dfpData);\n    },\n  };\n  global.OX_bidder_ads = [[data.dfpSlot, size, 'c', customVars]];\n  loadScript(global, jssdk);\n}\n\nfunction setCustomVars(oxRequest, customVars) {\n  const customVarKeys = Object.keys(customVars);\n  customVarKeys.forEach(customVarKey => {\n    const customVarValue = customVars[customVarKey];\n    if (Array.isArray(customVarValue)) {\n      customVarValue.forEach(value => {\n        oxRequest.addVariable(customVarKey, value);\n      });\n    } else {\n      oxRequest.addVariable(customVarKey, customVarValue);\n    }\n  });\n}\n\nfunction filterCustomVar(customVars) {\n  const filterPattern = /^[A-Za-z0-9._]{1,20}$/;\n  const filteredKeys = Object.keys(customVars)\n    .filter(key => filterPattern.test(key));\n  const filteredCustomVar = {};\n  filteredKeys.forEach(key => {\n    filteredCustomVar[key.toLowerCase()] = customVars[key];\n  });\n  return filteredCustomVar;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function outbrain(global, data) {\n\n  // ensure we have valid widgetIds value\n  validateData(data, ['widgetids']);\n\n  (global._outbrain = global._outbrain || {\n    viewId: global.context.pageViewId,\n    widgetIds: data['widgetids'],\n    htmlURL: data['htmlurl'] || global.context.canonicalUrl,\n    ampURL: data['ampurl'] || global.context.sourceUrl,\n    fbk: data['fbk'] || '',\n    testMode: data['testmode'] || 'false',\n    styleFile: data['stylefile'] || '',\n    referrer: data['referrer'] || global.context.referrer,\n  });\n\n  // load the Outbrain AMP JS file\n  loadScript(global, 'https://widgets.outbrain.com/widgetAMP/outbrainAMP.min.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function plista(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], [\n    'publickey', 'widgetname', 'urlprefix',\n    'item', 'geo', 'categories', 'countrycode',\n  ]);\n  const div = global.document.createElement('div');\n  div.setAttribute('data-display', 'plista_widget_' + data.widgetname);\n  // container with id \"c\" is provided by amphtml\n  global.document.getElementById('c').appendChild(div);\n  window.PLISTA = {\n    publickey: data.publickey,\n    widgets: [{\n      name: data.widgetname,\n      pre: data.urlprefix,\n    }],\n    item: data.item,\n    geo: data.geo,\n    categories: data.categories,\n    noCache: true,\n    useDocumentReady: false,\n    dataMode: 'data-display',\n  };\n\n  // load the plista modules asynchronously\n  loadScript(global, 'https://static' + (data.countrycode ? '-' + encodeURIComponent(data.countrycode) : '') + '.plista.com/async.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function polymorphicads(global, data) {\n  validateData(data, ['adunit', 'params']);\n  global.polyParam = data;\n  writeScript(global, 'https://www.polymorphicads.jp/js/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, loadScript} from '../3p/3p';\n\n/**\n* @param {!Window} global\n* @param {!Object} data\n*/\nexport function popin(global, data) {\n  validateData(data, ['mediaid']);\n\n  const d = global.document.createElement('div');\n  d.id = '_popIn_amp_recommend';\n  global.document.getElementById('c').appendChild(d);\n\n  const url = 'https://api.popin.cc/searchbox/' + encodeURIComponent(data['mediaid']) + '.js';\n\n  loadScript(global, url);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from '../3p/3p';\n\n/* global PubMatic: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function pubmatic(global, data) {\n  loadScript(global, 'https://ads.pubmatic.com/AdServer/js/amp.js', () => {\n    data.kadpageurl = global.context.location.href;\n    PubMatic.showAd(data);\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\nimport {getSourceOrigin, getSourceUrl} from '../src/url';\n\nconst pubmineOptional = ['adsafe', 'section', 'wordads'],\n    pubmineRequired = ['siteid'],\n    pubmineURL = 'https://s.pubmine.com/head.js';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function pubmine(global, data) {\n  validateData(data, pubmineRequired, pubmineOptional);\n\n  global._ipw_custom = { // eslint-disable-line google-camelcase/google-camelcase\n    adSafe: 'adsafe' in data ? data.adsafe : '0',\n    amznPay: [],\n    domain: getSourceOrigin(global.context.location.href),\n    pageURL: getSourceUrl(global.context.location.href),\n    wordAds: 'wordads' in data ? data.wordads : '0',\n    renderStartCallback: () => global.context.renderStart(),\n  };\n  writeScript(global, pubmineURL);\n\n  const o = {\n        sectionId: data['siteid'] + ('section' in data ? data.section : '1'),\n        height: data.height,\n        width: data.width,\n      },\n      wr = global.document.write;\n\n  wr.call(global.document,\n      `<script type=\"text/javascript\">\n      (function(g){g.__ATA.initAd(\n        {sectionId:${o.sectionId}, width:${o.width}, height:${o.height}});\n      })(window);\n    </script>`\n  );\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, loadScript, validateData} from '../3p/3p';\nimport {doubleclick} from '../ads/google/doubleclick';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function pulsepoint(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], [\n    'pid', 'tagid', 'tagtype', 'slot', 'timeout',\n  ]);\n  if (data.tagtype === 'hb') {\n    headerBidding(global, data);\n  } else {\n    tag(global, data);\n  }\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction tag(global, data) {\n  writeScript(global, 'https://tag.contextweb.com/getjs.aspx?action=VIEWAD' +\n      '&cwpid=' + encodeURIComponent(data.pid)\n      + '&cwtagid=' + encodeURIComponent(data.tagid)\n      + '&cwadformat=' + encodeURIComponent(data.width + 'X' + data.height));\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction headerBidding(global, data) {\n  loadScript(global, 'https://ads.contextweb.com/ht.js', () => {\n    const hbConfig = {\n      timeout: data.timeout || 1000,\n      slots: [{\n        cp: data.pid,\n        ct: data.tagid,\n        cf: data.width + 'x' + data.height,\n        placement: data.slot,\n        elementId: 'c',\n      }],\n      done(targeting) {\n        doubleclick(global, {\n          width: data.width,\n          height: data.height,\n          slot: data.slot,\n          targeting: targeting[data.slot],\n        });\n      },\n    };\n    new window.PulsePointHeaderTag(hbConfig).init();\n  });\n}\n\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  writeScript,\n  validateData,\n  validateSrcPrefix} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function purch(global, data) {\n  validateData(data, [],\n      ['pid', 'divid']);\n  global.data = data;\n\n  const adsrc = 'https://ramp.purch.com/serve/creative_amp.js';\n  validateSrcPrefix('https:', adsrc);\n  writeScript(global, adsrc);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function relap(global, data) {\n  validateData(data, [], ['token', 'url', 'anchorid']);\n\n  window.relapV6WidgetReady = function() {\n    window.context.renderStart();\n  };\n\n  window.relapV6WidgetNoSimilarPages = function() {\n    window.context.noContentAvailable();\n  };\n\n  const url = `https://relap.io/api/v6/head.js?token=${encodeURIComponent(data['token'])}&url=${encodeURIComponent(data['url'])}`;\n  loadScript(global, url);\n\n  const anchorEl = global.document.createElement('div');\n  anchorEl.id = data['anchorid'];\n  global.document.getElementById('c').appendChild(anchorEl);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function revcontent(global, data) {\n  const endpoint = 'https://labs-cdn.revcontent.com/build/amphtml/revcontent.amp.min.js';\n  const required = [\n    'id',\n    'width',\n    'height',\n    'wrapper',\n  ];\n  const optional = [\n    'api',\n    'key',\n    'ssl',\n    'adxw',\n    'adxh',\n    'rows',\n    'cols',\n    'domain',\n    'source',\n    'testing',\n    'endpoint',\n    'publisher',\n    'branding',\n    'font',\n    'css',\n    'sizer',\n    'debug',\n    'ampcreative',\n  ];\n\n  validateData(data, required, optional);\n  global.data = data;\n  writeScript(window, endpoint);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, loadScript, validateData} from '../3p/3p';\nimport {getSourceUrl} from '../src/url';\nimport {doubleclick} from '../ads/google/doubleclick';\n\n/* global rubicontag: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function rubicon(global, data) {\n  // TODO: check mandatory fields\n  validateData(data, [], [\n    'slot', 'targeting', 'categoryExclusions',\n    'tagForChildDirectedTreatment', 'cookieOptions',\n    'overrideWidth', 'overrideHeight', 'loadingStrategy',\n    'consentNotificationId', 'useSameDomainRenderingUntilDeprecated',\n    'account', 'site', 'zone', 'size',\n    'pos', 'kw', 'visitor', 'inventory',\n    'type', 'method', 'callback',\n  ]);\n\n  if (data.method === 'fastLane') {\n    fastLane(global, data);\n  } else {\n    smartTag(global, data);\n  }\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction fastLane(global, data) {\n  const dimensions = [[\n    parseInt(data.overrideWidth || data.width, 10),\n    parseInt(data.overrideHeight || data.height, 10),\n  ]];\n\n  function setFPD(type, data) {\n    if (typeof data === 'object' && (type === 'V' || type === 'I')) {\n      for (const key in data) {\n        if (data.hasOwnProperty(key)) {\n          if (type === 'V') {\n            rubicontag.setFPV(key, data[key]);\n          }\n          if (type === 'I') {\n            rubicontag.setFPI(key, data[key]);\n          }\n        }\n      }\n    }\n  }\n\n  let gptran = false;\n  function gptrun() {\n    if (gptran) {\n      return;\n    }\n    gptran = true;\n\n    let ASTargeting = rubicontag.getSlot('c').getAdServerTargeting();\n    const ptrn = /rpfl_\\d+/i;\n    for (let i = 0; i < ASTargeting.length; i++) {\n      if (ptrn.test(ASTargeting[i].key)) {\n        ASTargeting = ASTargeting[i].values;\n      }\n    }\n    if (!data.targeting) { data.targeting = {}; }\n    data.targeting['rpfl_' + data.account] = ASTargeting;\n    data.targeting['rpfl_elemid'] = 'c';\n\n    if (data['method']) { delete data['method']; }\n    if (data['account']) { delete data['account']; }\n    if (data['pos']) { delete data['pos']; }\n    if (data['kw']) { delete data['kw']; }\n    if (data['visitor']) { delete data['visitor']; }\n    if (data['inventory']) { delete data['inventory']; }\n    doubleclick(global, data);\n  }\n\n  loadScript(global, 'https://ads.rubiconproject.com/header/' + encodeURIComponent(data.account) + '.js', () => {\n    global.rubicontag.cmd.push(() => {\n      const rubicontag = global.rubicontag;\n      const slot = rubicontag.defineSlot(data.slot, dimensions, 'c');\n\n      if (data.pos) { slot.setPosition(data.pos); }\n      if (data.kw) { rubicontag.addKW(data.kw); }\n      if (data.visitor) { setFPD('V', data.visitor); }\n      if (data.inventory) { setFPD('I', data.inventory); }\n      rubicontag.setUrl(getSourceUrl(context.location.href));\n      rubicontag.setIntegration('amp');\n      rubicontag.run(gptrun, 1000);\n    });\n  });\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction smartTag(global, data) {\n  const pageURL = getSourceUrl(context.location.href);\n  /* eslint-disable */\n  global.rp_account = data.account;\n  global.rp_site = data.site;\n  global.rp_zonesize = data.zone + '-' + data.size;\n  global.rp_adtype = 'js';\n  global.rp_page = pageURL;\n  global.rp_kw = data.kw;\n  global.rp_visitor = data.visitor;\n  global.rp_inventory = data.inventory;\n  global.rp_amp = 'st';\n  global.rp_callback = data.callback;\n  /* eslint-enable */\n  writeScript(global, 'https://ads.rubiconproject.com/ad/'\n      + encodeURIComponent(data.account) + '.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function sharethrough(global, data) {\n  validateData(data, ['pkey'], []);\n  global.pkey = data.pkey;\n  writeScript(global, 'https://native.sharethrough.com/iframe/amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from '../3p/3p';\n\n/* global sklikProvider: false */\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function sklik(global, data) {\n  loadScript(global, 'https://c.imedia.cz/js/amp.js', () => {\n    const parentId = 'sklik_parent';\n\n    const parentElement = document.createElement('div');\n    parentElement.id = parentId;\n    window.document.body.appendChild(parentElement);\n\n    data.elm = parentId;\n    data.url = global.context.canonicalUrl;\n\n    sklikProvider.show(data);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function slimcutmedia(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global._scm_amp = {\n    allowed_data: ['pid', 'ffc'],\n    mandatory_data: ['pid'],\n    data,\n  };\n\n  validateData(data,\n      global._scm_amp.mandatory_data, global._scm_amp.allowed_data);\n\n  loadScript(global, 'https://static.freeskreen.com/publisher/' + encodeURIComponent(data.pid) + '/freeskreen.min.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function smartadserver(global, data) {\n  // For more flexibility, we construct the call to SmartAdServer's URL in the external loader, based on the data received from the AMP tag.\n  loadScript(global, 'https://ec-ns.sascdn.com/diff/js/amp.v0.js', () => {\n    global.sas.callAmpAd(data);\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function smartclip(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global._smartclip_amp = {\n    allowed_data: ['extra'],\n    mandatory_data: ['plc', 'sz'],\n    data,\n  };\n\n  validateData(data,\n      global._smartclip_amp.mandatory_data, global._smartclip_amp.allowed_data);\n\n  const rand = Math.round(Math.random() * 100000000);\n\n  loadScript(global, 'https://des.smartclip.net/ads?type=dyn&plc='\n    + encodeURIComponent(data.plc) + '&sz=' + encodeURIComponent(data.sz)\n    + (data.extra ? '&' + encodeURI(data.extra) : '') + '&rnd=' + rand);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function sortable(global, data) {\n  validateData(data, ['site', 'name'], ['responsive']);\n\n  const slot = global.document.getElementById('c');\n  const ad = global.document.createElement('div');\n  const size = (data.responsive === 'true') ?\n    'auto'\n    : data.width + 'x' + data.height;\n  ad.className = 'ad-tag';\n  ad.setAttribute('data-ad-name', data.name);\n  ad.setAttribute('data-ad-size', size);\n  slot.appendChild(ad);\n  loadScript(global, 'https://tags-cdn.deployads.com/a/'\n      + encodeURIComponent(data.site) + '.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n*/\n /*\n *********\n * Existing sovrn customers feel free to contact amp-implementations@sovrn.com for assistance with setting up your amp-ad tagid\n * New customers please see www.sovrn.com to sign up and get started!\n *********\n */\nimport {writeScript} from '../3p/3p';\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function sovrn(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global.width = data.width;\n  global.height = data.height;\n  global.domain = data.domain;\n  global.u = data.u;\n  global.iid = data.iid;\n  global.aid = data.aid;\n  global.z = data.z;\n  global.tf = data.tf;\n  writeScript(global, 'https://ap.lijit.com/www/sovrn_amp/sovrn_ads.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData} from '../3p/3p';\nimport {startsWith} from '../src/string';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function spotx(global, data) {\n  // ensure we have valid channel id\n  validateData(data, ['spotx_channel_id', 'width', 'height']);\n\n  // Because 3p's loadScript does not allow for data attributes,\n  // we will write the JS tag ourselves.\n  const script = global.document.createElement('script');\n\n  data['spotx_content_width'] = data.spotx_content_width || data.width;\n  data['spotx_content_height'] = data.spotx_content_height || data.height;\n  data['spotx_content_page_url'] = global.context.location.href ||\n      global.context.sourceUrl;\n\n  // Add data-* attribute for each data value passed in.\n  for (const key in data) {\n    if (data.hasOwnProperty(key) && startsWith(key, 'spotx_')) {\n      script.setAttribute(`data-${key}`, data[key]);\n    }\n  }\n\n  global['spotx_ad_done_function'] = function(spotxAdFound) {\n    if (!spotxAdFound) {\n      global.context.noContentAvailable();\n    }\n  };\n\n  // TODO(KenneyE): Implement AdLoaded callback in script to accurately trigger renderStart()\n  script.onload = global.context.renderStart;\n\n  script.src = `//js.spotx.tv/easi/v1/${data['spotx_channel_id']}.js`;\n  global.document.body.appendChild(script);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function sunmedia(global, data) {\n /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global._sunmedia_amp = {\n    allowed_data: ['cskp', 'crst', 'cdb', 'cid'],\n    mandatory_data: ['cid'],\n    data,\n  };\n\n  validateData(data,\n      global._sunmedia_amp.mandatory_data, global._sunmedia_amp.allowed_data);\n\n  loadScript(global, 'https://vod.addevweb.com/sunmedia/amp/ads/SMIntextAMP.js');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  loadScript,\n  validateData,\n  computeInMasterFrame,\n} from '../3p/3p';\n\nexport function swoop(global, data) {\n  // Required properties\n  validateData(data, [\n    'layout',\n    'placement',\n    'publisher',\n    'slot',\n  ]);\n\n  computeInMasterFrame(global, 'swoop-load', done => {\n    global.swoopIabConfig = data;\n\n    loadScript(global, 'https://www.swoop-amp.com/amp.js', () => done(global.Swoop != null));\n  }, success => {\n    if (success) {\n      if (!global.context.isMaster) {\n        global.context.master.Swoop.announcePlace(global, data);\n      }\n    } else {\n      global.context.noContentAvailable();\n      throw new Error('Swoop failed to load');\n    }\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function taboola(global, data) {\n  // do not copy the following attributes from the 'data' object\n  // to _tablloa global object\n  const blackList = ['height', 'type', 'width', 'placement', 'mode'];\n\n  // ensure we have vlid publisher, placement and mode\n  // and exactly one page-type\n  validateData(data, ['publisher', 'placement', 'mode',\n    ['article', 'video', 'photo', 'search', 'category', 'homepage', 'other']]);\n\n  // setup default values for referrer and url\n  const params = {\n    referrer: data.referrer || global.context.referrer,\n    url: data.url || global.context.canonicalUrl,\n  };\n\n  // copy none blacklisted attribute to the 'params' map\n  Object.keys(data).forEach(k => {\n    if (blackList.indexOf(k) === -1) {\n      params[k] = data[k];\n    }\n  });\n\n  // push the two object into the '_taboola' global\n  (global._taboola = global._taboola || []).push([{\n    viewId: global.context.pageViewId,\n    publisher: data.publisher,\n    placement: data.placement,\n    mode: data.mode,\n    framework: 'amp',\n    container: 'c',\n  },\n    params,\n    {flush: true}]\n  );\n\n  // install observation on entering/leaving the view\n  global.context.observeIntersection(function(changes) {\n    changes.forEach(function(c) {\n      if (c.intersectionRect.height) {\n        global._taboola.push({\n          visible: true,\n          rects: c,\n          placement: data.placement,\n        });\n      }\n    });\n  });\n\n  // load the taboola loader asynchronously\n  loadScript(global, `https://cdn.taboola.com/libtrc/${encodeURIComponent(data.publisher)}/loader.js`);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function teads(global, data) {\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global._teads_amp = {\n    allowed_data: ['pid', 'tag'],\n    mandatory_data: ['pid'],\n    mandatory_tag_data: ['tta', 'ttp'],\n    data,\n  };\n\n  validateData(data,\n      global._teads_amp.mandatory_data, global._teads_amp.allowed_data);\n\n  if (data.tag) {\n    validateData(data.tag, global._teads_amp.mandatory_tag_data);\n    global._tta = data.tag.tta;\n    global._ttp = data.tag.ttp;\n\n    loadScript(global, 'https://cdn.teads.tv/media/format/' + encodeURI(data.tag.js ||'v3/teads-format.min.js'));\n  } else {\n    loadScript(global, 'https://a.teads.tv/page/' + encodeURIComponent(data.pid) + '/tag');\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateSrcPrefix} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function triplelift(global, data) {\n  const src = data.src;\n  validateSrcPrefix('https://ib.3lift.com/', src);\n  loadScript(global, src);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function valuecommerce(global, data) {\n  validateData(data, ['pid'], ['sid', 'vcptn','om']);\n  global.vcParam = data;\n  writeScript(global, 'https://amp.valuecommerce.com/amp_bridge.js');\n}\n\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * Created by Webedia on 07/03/16 - last updated on 11/10/16\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function webediads(global, data) {\n  validateData(data, ['site', 'page', 'position'], ['query']);\n  loadScript(global, 'https://eu1.wbdds.com/amp.min.js', () => {\n    global.wads.amp.init({\n      'site': data.site,\n      'page': data.page,\n      'position': data.position,\n      'query': (data.query) ? data.query : '',\n    });\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function weboramaDisplay(global, data) {\n  const mandatoryFields = [\n    'width',\n    'height',\n    'wbo_account_id',\n    'wbo_tracking_element_id',\n    'wbo_fullhost',\n  ];\n\n  const optionalFields = [\n    'wbo_bid_price',\n    'wbo_price_paid',\n    'wbo_random',\n    'wbo_debug',\n    'wbo_host',\n    'wbo_publisherclick',\n    // 'wbo_clicktrackers',\n    // 'wbo_imptrackers',\n    // 'wbo_zindex',\n    'wbo_customparameter',\n    'wbo_disable_unload_event',\n    'wbo_donottrack',\n    'wbo_script_variant',\n    'wbo_is_mobile',\n    'wbo_vars',\n    'wbo_weak_encoding',\n  ];\n\n  validateData(data, mandatoryFields, optionalFields);\n\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global.weborama_display_tag = {\n    // Default settings to work with AMP\n    forcesecure: true,\n    bursttarget: 'self',\n    burst: 'never',\n\n    // Settings taken from component config\n    width: data.width,\n    height: data.height,\n    account_id: data.wbo_account_id,\n    customparameter: data.wbo_customparameter,\n    tracking_element_id: data.wbo_tracking_element_id,\n    host: data.wbo_host,\n    fullhost: data.wbo_fullhost,\n    bid_price: data.wbo_bid_price,\n    price_paid: data.wbo_price_paid,\n    random: data.wbo_random,\n    debug: data.wbo_debug,\n    publisherclick: data.wbo_publisherclick,\n    // clicktrackers: data.wbo_clicktrackers,\n    // imptrackers: data.wbo_imptrackers,\n    // zindex: data.wbo_zindex, // This is actually quite useless for now, since we are launced in a non-friendly iframe.\n    disable_unload_event: data.wbo_disable_unload_event,\n    donottrack: data.wbo_donottrack,\n    script_variant: data.wbo_script_variant,\n    is_mobile: data.wbo_is_mobile,\n    vars: data.wbo_vars,\n    weak_encoding: data.wbo_weak_encoding,\n  };\n\n  writeScript(global, 'https://cstatic.weborama.fr/js/advertiserv2/adperf_launch_1.0.0_scrambled.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function widespace(global, data) {\n\n  const WS_AMP_CODE_VER = '1.0.0';\n\n  validateData(data, ['sid'], []);\n\n  const url = 'https://engine.widespace.com/map/engine/dynamic?isamp=1'\n      + '&ampver=' + WS_AMP_CODE_VER\n      + '&sid=' + encodeURIComponent(data.sid);\n\n  writeScript(global, url);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function xlift(global, data) {\n  validateData(data, ['mediaid']);\n\n  global.xliftParams = data;\n  const d = global.document.createElement('div');\n  d.id = '_XL_recommend';\n  global.document.getElementById('c').appendChild(d);\n\n  d.addEventListener('SuccessLoadedXliftAd', function(e) {\n    e.detail = e.detail || {adSizeInfo: {}};\n    global.context.renderStart(e.detail.adSizeInfo);\n  });\n  d.addEventListener('FailureLoadedXliftAd', function() {\n    global.context.noContentAvailable();\n  });\n\n  //assign XliftAmpHelper property to global(window)\n  global.XliftAmpHelper = null;\n\n  loadScript(global, 'https://cdn.x-lift.jp/resources/common/xlift_amp.js', () => {\n    if (!global.XliftAmpHelper) {\n      global.context.noContentAvailable();\n    }\n    else {\n      global.XliftAmpHelper.show();\n    }\n  }, () => {\n    global.context.noContentAvailable();\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n* @param {!Window} global\n* @param {!Object} data\n*/\nexport function yahoo(global, data) {\n  validateData(data, ['sid', 'site', 'sa']);\n  global.yadData = data;\n  writeScript(global, 'https://s.yimg.com/os/ampad/display.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function yahoojp(global, data) {\n  validateData(data, ['yadsid'], []);\n  global.yahoojpParam = data;\n  writeScript(global,\n      'https://s.yimg.jp/images/listing/tool/yads/ydn/amp/amp.js');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {loadScript, validateData} from '../3p/3p';\n\nconst n = 'yandexContextAsyncCallbacks';\nconst renderTo = 'yandex_rtb';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function yandex(global, data) {\n  validateData(data, ['blockId'], ['data', 'isAdfox']);\n\n  addToQueue(global, data);\n  loadScript(global,\n      'https://yastatic.net/partner-code/loaders/context_amp.js');\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nfunction addToQueue(global, data) {\n  global[n] = global[n] || [];\n  global[n].push(() => {\n\n    // Create container\n    createContainer(global, renderTo);\n\n    // Show Ad in container\n    global.Ya.Context.AdvManager.render({\n      blockId: data.blockId,\n      statId: data.statId,\n      renderTo,\n      data: data.data,\n      async: true,\n      onRender: () => {\n        // Move adfox queue\n        if (data.isAdfox && global.Ya.adfoxCode.onRender) {\n          global.Ya.adfoxCode.onRender();\n        }\n      },\n    }, () => {\n      global.context.noContentAvailable();\n    });\n  });\n}\n\n/**\n * @param {!Window} global\n * @param {string} id\n */\nfunction createContainer(global, id) {\n  const d = global.document.createElement('div');\n  d.id = id;\n  global.document.getElementById('c').appendChild(d);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, loadScript} from '../3p/3p';\nimport {doubleclick} from '../ads/google/doubleclick';\nimport {rethrowAsync} from '../src/log';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function yieldbot(global, data) {\n  validateData(data, ['psn', 'ybSlot', 'slot'], [\n    'targeting', 'categoryExclusions', 'tagForChildDirectedTreatment',\n    'cookieOptions','overrideWidth', 'overrideHeight',\n  ]);\n\n  global.ybotq = global.ybotq || [];\n\n  loadScript(global, 'https://cdn.yldbt.com/js/yieldbot.intent.amp.js', () => {\n    global.ybotq.push(() => {\n      try {\n        const dimensions = [[\n          parseInt(data.overrideWidth || data.width, 10),\n          parseInt(data.overrideHeight || data.height, 10),\n        ]];\n\n        global.yieldbot.psn(data.psn);\n        global.yieldbot.enableAsync();\n        if (window.context.isMaster) {\n          global.yieldbot.defineSlot(data.ybSlot, {sizes: dimensions});\n          global.yieldbot.go();\n        } else {\n          const slots = {};\n          slots[data.ybSlot] = dimensions;\n          global.yieldbot.nextPageview(slots);\n        }\n      } catch (e) {\n        rethrowAsync(e);\n      }\n    });\n\n    global.ybotq.push(() => {\n      try {\n        const targeting = global.yieldbot.getSlotCriteria(data['ybSlot']);\n        data['targeting'] = data['targeting'] || {};\n        for (const key in targeting) {\n          data.targeting[key] = targeting[key];\n        }\n      } catch (e) {\n        rethrowAsync(e);\n      }\n      delete data['ybSlot'];\n      delete data['psn'];\n      doubleclick(global, data);\n    });\n  });\n}\n\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function yieldmo(global, data) {\n\n  const ymElem = global.document.createElement('div');\n  ymElem.id = 'ym_' + data.ymid;\n  ymElem.className = 'ym';\n  ymElem.dataset.ampEnabled = true;\n  global.document.getElementById('c').appendChild(ymElem);\n\n  const ymJs = 'https://static.yieldmo.com/ym.amp1.js';\n\n  loadScript(global, ymJs);\n}\n","/**\n  * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n  *\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\n  * you may not use this file except in compliance with the License.\n  * You may obtain a copy of the License at\n  *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS-IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n\n import {writeScript, validateData} from '../3p/3p';\n\n/**\n  * @param {!Window} global\n  * @param {!Object} data\n  */\n export function yieldone(global, data) {\n   validateData(data, ['pubid', 'pid','width', 'height'], []);\n\n   global.yieldoneParam = data;\n   writeScript(global,\n       'https://img.ak.impact-ad.jp/ic/pone/commonjs/yone-amp.js');\n }\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, loadScript} from '../3p/3p';\n\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function zedo(global, data) {\n  // check mandatory fields\n  validateData(data,\n      ['superId', 'network', 'placementId', 'channel', 'publisher', 'dim'],\n      ['charset', 'callback', 'renderer']);\n\n  loadScript(global, 'https://ss3.zedo.com/gecko/tag/Gecko.amp.min.js', () => {\n    const ZGTag = global.ZGTag;\n    const charset = data.charset || '';\n    const callback = data.callback || function() {};\n    const geckoTag = new ZGTag(data.superId, data.network, '', '',\n      charset, callback);\n    geckoTag.setAMP();\n    // define placement\n    const placement = geckoTag.addPlacement(data.placementId,\n        data.channel, data.publisher, data.dim, data.width, data.height);\n    if (data.renderer) {\n      for (const key in data.renderer) {\n        placement.includeRenderer(data.renderer[key].name,\n            data.renderer[key].value);\n      }\n    } else {\n      placement.includeRenderer('display', {});\n    }\n    //create a slot div to display ad\n    const slot = global.document.createElement('div');\n    slot.id = 'zdt_' + data.placementId;\n\n    const divContainer = global.document.getElementById('c');\n    if (divContainer) {\n      divContainer.appendChild(slot);\n    }\n\n    // call load ads\n    geckoTag.loadAds();\n\n    // call div ready\n    geckoTag.placementReady(data.placementId);\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateData} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function zergnet(global, data) {\n  validateData(data, ['zergid'], []);\n  global.zergnetWidgetId = data.zergid;\n  writeScript(global, 'https://www.zergnet.com/zerg-amp.js');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {validateData, writeScript} from '../3p/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function zucks(global, data) {\n  validateData(data, ['frameId']);\n  writeScript(global, `https://j.zucks.net.zimg.jp/j?f=${data['frameId']}`);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {internalListenImplementation} from './event-helper-listen';\nimport {parseJson} from './json';\n\n\n/** @const */\nconst AMP_MESSAGE_PREFIX = 'amp-';\n\n\n/** @enum {string} */\nexport const MessageType = {\n  // For amp-ad\n  SEND_EMBED_STATE: 'send-embed-state',\n  EMBED_STATE: 'embed-state',\n  SEND_EMBED_CONTEXT: 'send-embed-context',\n  EMBED_CONTEXT: 'embed-context',\n  SEND_INTERSECTIONS: 'send-intersections',\n  INTERSECTION: 'intersection',\n  EMBED_SIZE: 'embed-size',\n  EMBED_SIZE_CHANGED: 'embed-size-changed',\n  EMBED_SIZE_DENIED: 'embed-size-denied',\n  NO_CONTENT: 'no-content',\n\n  // For the frame to be placed in full overlay mode for lightboxes\n  FULL_OVERLAY_FRAME: 'full-overlay-frame',\n  FULL_OVERLAY_FRAME_RESPONSE: 'full-overlay-frame-response',\n  CANCEL_FULL_OVERLAY_FRAME: 'cancel-full-overlay-frame',\n  CANCEL_FULL_OVERLAY_FRAME_RESPONSE: 'cancel-full-overlay-frame-response',\n\n  // For amp-inabox\n  SEND_POSITIONS: 'send-positions',\n  POSITION: 'position',\n};\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {boolean=} opt_capture\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_capture) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_capture);\n}\n\n\n/**\n * Serialize an AMP post message. Output looks like:\n * 'amp-011481323099490{\"type\":\"position\",\"sentinel\":\"12345\",\"foo\":\"bar\"}'\n * @param {string} type\n * @param {string} sentinel\n * @param {JsonObject=} data\n * @param {?string=} rtvVersion\n * @returns {string}\n */\nexport function serializeMessage(type, sentinel, data = dict(),\n    rtvVersion = null) {\n  // TODO: consider wrap the data in a \"data\" field. { type, sentinal, data }\n  const message = data;\n  message['type'] = type;\n  message['sentinel'] = sentinel;\n  return AMP_MESSAGE_PREFIX + (rtvVersion || '') + JSON.stringify(message);\n}\n\n\n/**\n * Deserialize an AMP post message.\n * Returns null if it's not valid AMP message format.\n *\n * @param {*} message\n * @returns {?JsonObject|undefined}\n */\nexport function deserializeMessage(message) {\n  if (!isAmpMessage(message)) {\n    return null;\n  }\n  const startPos = message.indexOf('{');\n  dev().assert(startPos != -1, 'JSON missing in %s', message);\n  try {\n    return parseJson(message.substr(startPos));\n  } catch (e) {\n    dev().error('MESSAGING', 'Failed to parse message: ' + message, e);\n    return null;\n  }\n}\n\n\n/**\n *  Returns true if message looks like it is an AMP postMessage\n *  @param {*} message\n *  @return {!boolean}\n */\nexport function isAmpMessage(message) {\n  return (typeof message == 'string' &&\n      message.indexOf(AMP_MESSAGE_PREFIX) == 0 &&\n      message.indexOf('{') != -1);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n    new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n    new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Listens for the specified event on the element.\n *\n * Do not use this directly. This method is implemented as a shared\n * dependency. Use `listen()` in either `event-helper` or `3p-frame-messaging`,\n * depending on your use case.\n *\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {boolean=} opt_capture\n * @return {!UnlistenDef}\n */\nexport function internalListenImplementation(element, eventType, listener,\n    opt_capture) {\n  let localElement = element;\n  let localListener = listener;\n  /** @type {?Function}  */\n  let wrapped = event => {\n    try {\n      return localListener(event);\n    } catch (e) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n  };\n  const capture = opt_capture || false;\n  localElement.addEventListener(eventType, wrapped, capture);\n  return () => {\n    if (localElement) {\n      localElement.removeEventListener(eventType, wrapped, capture);\n    }\n    // Ensure these are GC'd\n    localListener = null;\n    localElement = null;\n    wrapped = null;\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\nimport {isObject} from './types';\n\n\n// NOTE Type are changed to {*} because of\n// https://github.com/google/closure-compiler/issues/1999\n\n/**\n * JSON scalar. It's either string, number or boolean.\n * @typedef {*} should be string|number|boolean\n */\nlet JSONScalarDef;\n\n\n/**\n * JSON object. It's a map with string keys and JSON values.\n * @typedef {*} should be !Object<string, ?JSONValueDef>\n */\nlet JSONObjectDef;\n\n\n/**\n * JSON array. It's an array with JSON values.\n * @typedef {*} should be !Array<?JSONValueDef>\n */\nlet JSONArrayDef;\n\n\n/**\n * JSON value. It's either a scalar, an object or an array.\n * @typedef {*} should be !JSONScalarDef|!JSONObjectDef|!JSONArrayDef\n */\nlet JSONValueDef;\n\n\n/**\n * Recreates objects with prototype-less copies.\n * @param {!JsonObject} obj\n * @return {!JsonObject}\n */\nexport function recreateNonProtoObject(obj) {\n  const copy = Object.create(null);\n  for (const k in obj) {\n    if (!hasOwnProperty(obj, k)) {\n      continue;\n    }\n    const v = obj[k];\n    copy[k] = isObject(v) ? recreateNonProtoObject(v) : v;\n  }\n  return /** @type {!JsonObject} */ (copy);\n}\n\n\n/**\n * Returns a value from an object for a field-based expression. The expression\n * is a simple nested dot-notation of fields, such as `field1.field2`. If any\n * field in a chain does not exist or is not an object, the returned value will\n * be `undefined`.\n *\n * @param {!JsonObject} obj\n * @param {string} expr\n * @return {*}\n */\nexport function getValueForExpr(obj, expr) {\n  // The `.` indicates \"the object itself\".\n  if (expr == '.') {\n    return obj;\n  }\n  // Otherwise, navigate via properties.\n  const parts = expr.split('.');\n  let value = obj;\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    if (!part) {\n      value = undefined;\n      break;\n    }\n    if (!isObject(value) ||\n            value[part] === undefined ||\n            !hasOwnProperty(value, part)) {\n      value = undefined;\n      break;\n    }\n    value = value[part];\n  }\n  return value;\n}\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n\n/**\n * @param {*} obj\n * @param {string} key\n * @return {boolean}\n */\nfunction hasOwnProperty(obj, key) {\n  if (obj == null || typeof obj != 'object') {\n    return false;\n  }\n  return Object.prototype.hasOwnProperty.call(\n      /** @type {!Object} */ (obj), key);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n\n/** @const Time when this JS loaded.  */\nconst start = Date.now();\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * Logging class.\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.calcLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  calcLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.level_ != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      messages.unshift(Date.now() - start, '[' + tag + ']');\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.level_ != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.level_ >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.level_ >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.level_ >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.level_ >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   */\n  error(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a value,\n   * the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return T\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const message = error.message;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @private\n */\nfunction createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier\n  // than the binary that does call `initLogConstructor` (amp.js), the extension\n  // will throw an error as that extension will never be able to initialize\n  // the log instances and we also don't want it to call `initLogConstructor`\n  // either (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are\n  // ready for use (stored globally) after the main binary calls\n  // `initLogConstructor`.\n  dev();\n  user();\n}\n\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *\n * @return {!Log}\n */\nexport function user() {\n  if (logs.user) {\n    return logs.user;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.user = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.OFF;\n  }, USER_ERROR_SENTINEL);\n}\n\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped in\n * the PROD binary. However, `devLog().assert` result is preserved in either case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {startsWith} from './string';\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * A #querySelector query to see if we have any scripts with development paths.\n * @type {string}\n */\nconst developmentScriptQuery = 'script[src*=\"/dist/\"],script[src*=\"/base/\"]';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // For 3p integration code\n  if (win.context && win.context.mode) {\n    return win.context.mode;\n  }\n\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when the --fortesting flag is NOT used.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n  const FORCE_LOCALDEV = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const AMP_CONFIG_3P_FRAME_HOST = self.AMP_CONFIG &&\n      self.AMP_CONFIG.thirdPartyFrameHost;\n\n  const isLocalDev = IS_DEV && !!(win.location.hostname == 'localhost' ||\n      (FORCE_LOCALDEV && win.location.hostname == AMP_CONFIG_3P_FRAME_HOST) ||\n      (win.location.ancestorOrigins && win.location.ancestorOrigins[0] &&\n        startsWith(win.location.ancestorOrigins[0], 'http://localhost:'))) &&\n      // Filter out localhost running against a prod script.\n      // Because all allowed scripts are ours, we know that these can only\n      // occur during local dev.\n      (!win.document || !!win.document.querySelector(developmentScriptQuery));\n\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation\n    development: !!(hashQuery['development'] == '1' ||\n        win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: IS_DEV && !!(win.AMP_TEST || win.__karma__),\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * This class helps to manage observers. Observers can be added, removed or\n * fired through and instance of this class.\n * @template TYPE\n */\nexport class Observable {\n\n  constructor() {\n    /** @type {?Array<function(TYPE)>} */\n    this.handlers_ = null;\n  }\n\n  /**\n   * Adds the observer to this instance.\n   * @param {function(TYPE)} handler Observer's handler.\n   * @return {!UnlistenDef}\n   */\n  add(handler) {\n    if (!this.handlers_) {\n      this.handlers_ = [];\n    }\n    this.handlers_.push(handler);\n    return () => {\n      this.remove(handler);\n    };\n  }\n\n  /**\n   * Removes the observer from this instance.\n   * @param {function(TYPE)} handler Observer's instance.\n   */\n  remove(handler) {\n    if (!this.handlers_) {\n      return;\n    }\n    const index = this.handlers_.indexOf(handler);\n    if (index > -1) {\n      this.handlers_.splice(index, 1);\n    }\n  }\n\n  /**\n   * Removes all observers.\n   */\n  removeAll() {\n    if (!this.handlers_) {\n      return;\n    }\n    this.handlers_.length = 0;\n  }\n\n  /**\n   * Fires an event. All observers are called.\n   * @param {TYPE=} opt_event\n   */\n  fire(opt_event) {\n    if (!this.handlers_) {\n      return;\n    }\n    const handlers = this.handlers_;\n    for (let i = 0; i < handlers.length; i++) {\n      const handler = handlers[i];\n      handler(opt_event);\n    }\n  }\n\n  /**\n   * Returns number of handlers. Mostly needed for tests.\n   * @return {number}\n   */\n  getHandlerCount() {\n    if (!this.handlers_) {\n      return 0;\n    }\n    return this.handlers_.length;\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @returns {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n};\n\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @returns {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes removed and character after to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {!function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './utils/object.js';\nimport {startsWith} from './string';\n\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {Element} element\n * @param {string} property\n * @param {*} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] = opt_units ? value + opt_units : value;\n  }\n}\n\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return value + 'px';\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x},${opt_y})`;\n}\n\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n      /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g, '($1,$2,$3, 1)');\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */(win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */(style) || map();\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Determines if value is of FormData type.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFormData(value) {\n  return toString(value) === '[object FormData]';\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = decodeURIComponent(match[1]).trim();\n    const value = match[2] ? decodeURIComponent(match[2]).trim() : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {startsWith, endsWith} from './string';\nimport {user} from './log';\nimport {getMode} from './mode';\nimport {urls} from './config';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {Object<string, !Location>}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* paramters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrl(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = Object.create(null));\n  }\n\n  const fromCache = cache[url];\n  if (fromCache) {\n    return fromCache;\n  }\n\n  const info = parseUrlWithA(a, url);\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_nocache) {\n    return frozen;\n  }\n  return cache[url] = frozen;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url) {\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null,  // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n  return info;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n      mainAndQuery[1]\n          ? (opt_addToFront\n              ? `?${paramString}&${mainAndQuery[1]}`\n              : `?${mainAndQuery[1]}&${paramString}`)\n          : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!Object<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!Object<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n    urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrl(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrl(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the new\n * search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParams(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(/^[?&]/, '');  // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(prefix == 'a' || prefix == 'c' || prefix == 'v',\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n      ? 'https://' + decodeURIComponent(path[3])\n      : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') + removeAmpJsParams(url.search) +\n      (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrl(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrl(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrl(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrl(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url have __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrl(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Returns a `map`, and will always return a at-dict like object.\n * The JsonObject type is just a simple object that is a dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  return /** @type {!JsonObject} */ (map(opt_initial));\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} maxDepth The maximum depth for deep merge, beyond which\n *    Object.assign will be used.\n * @return {!Object}\n * @throws {Error} if `source` contains a circular reference\n */\nfunction deepMerge_(target, source, maxDepth) {\n  // Keep track of seen objects to prevent infinite loops on objects with\n  // recursive references.\n  const seen = [];\n  // Traversal must be breadth-first so any object encountered for the first\n  // time does not have a reference  at a shallower depth. Otherwise, a\n  // circular reference found at depth == maxDepth could cause an unexpected\n  // change at a shallower depth if the same object exists at a shallower depth.\n  const queue = [{target, source, depth: 0}];\n  while (queue.length > 0) {\n    const {target, source, depth} = queue.shift();\n    if (seen.includes(source)) {\n      throw new Error('Source object contains circular references');\n    }\n    seen.push(source);\n    if (target === source) {\n      continue;\n    }\n    if (depth > maxDepth) {\n      Object.assign(target, source);\n      continue;\n    }\n    Object.keys(source).forEach(key => {\n      const newValue = source[key];\n      // Perform a deep merge IFF both a and b have the same property and\n      // the properties on both a and b are non-null plain objects.\n      if (hasOwn(target, key)) {\n        const oldValue = target[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({target: oldValue, source: newValue, depth: depth + 1});\n          return;\n        }\n      }\n      target[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * Deep merge object b into object a. Both a and b should only contain\n * primitives, arrays, and plain objects. For any conflicts, object b wins.\n * Arrays are replaced, not merged. Plain objects are recursively merged.\n * @param {!Object} target\n * @param {!Object} source\n * @param {number=} opt_maxDepth The maximum depth for deep merge,\n *     beyond which Object.assign will be used.\n * @return {!Object}\n * @throws {Error} if `source` contains a circular reference\n */\nexport function deepMerge(target, source, opt_maxDepth) {\n  return deepMerge_(target, source, opt_maxDepth || Number.POSITIVE_INFINITY);\n}\n","(function (global) {\n  var babelHelpers = global.babelHelpers = {};\n\n  babelHelpers.inherits = function (subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  };\n\n  babelHelpers.createClass = (function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  })();\n\n  babelHelpers.slice = Array.prototype.slice;\n  babelHelpers.bind = Function.prototype.bind;\n\n  babelHelpers.interopRequireWildcard = function (obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n        }\n      }\n\n      newObj[\"default\"] = obj;\n      return newObj;\n    }\n  };\n\n  babelHelpers.interopRequireDefault = function (obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n  };\n\n  babelHelpers.get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        return get(parent, property, receiver);\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  };\n\n  babelHelpers.classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  babelHelpers.defineProperty = function(obj, key, value) {\n      obj[key] = value;\n      return obj;\n  };\n})(typeof global === \"undefined\" ? self : global);\n"]}